import{m as D}from"./mittBus-rOgeEvW-.js";import{b as e,aC as k,aD as p,e as r,F as y,h as S,o as w,g as h}from"./index-COk3Z_ZD.js";import{_}from"./index-BW6ERbb9.js";import{r as $}from"./map-BRfhlIZR.js";import"./Draw-9J-PLlaz.js";import"./gis-BoOjk0-F.js";import"./DemoPopupDetailDialog-CQNHdZAd.js";import"./plugin-vueexport-helper-DlAUqK2U.js";const C=i=>{let a=null;return i.currentPopupData?a=i.currentPopupData:a=i.popupData,e(y,null,[e("div",{class:"common_popup_item"},[e(k,{title:a.newCellName,border:!0,class:"margin-top",column:2,size:"small"},{default:()=>[e(p,{label:"cgi"},{default:()=>[a.cgi]}),e(p,{label:"网络制式"},{default:()=>[a.networkType]}),e(p,{label:"基站类型"},{default:()=>[a.coverType]}),e(p,{label:"站号"},{default:()=>[a.stationNo]}),e(p,{label:"频段"},{default:()=>[a.workFrequency]}),a.antDirectionAngle&&e(p,{label:"方位角"},{default:()=>[a.antDirectionAngle,r("°")]}),e(p,{label:"经纬度"},{default:()=>[r("["),a.longitude,r(", "),a.latitude,r("]")]})]}),e("span",{class:"get_more","data-function":"getMore"},[r("查看更多")])])])},v=i=>{let a=null;return i.currentPopupData?a=i.currentPopupData:a=i.popupData,e(y,null,[e("div",{class:"common_popup_item"},[e("h3",null,[r("POI搜索结果")]),e("ul",null,[e("li",null,[e("dl",null,[e("dt",null,[r("地址:")]),e("dd",null,[a.address])])]),e("li",null,[e("dl",null,[e("dt",null,[r("名称:")]),e("dd",null,[a.name])])]),e("li",null,[e("dl",null,[e("dt",null,[r("经纬度:")]),e("dd",null,[r("["),a.lonlat,r("]")])])])])])])},b=(i,a)=>{let d=[];const g=i.popupData.map(c=>{let t={};switch(c.get("type")){case"Marker":t=c.get("pointData");break;case"Curve":t=c.get("curveData");break}if(d.push(t),!t)return;switch(t.networkType){case"4g":t.newCellName=t.cellName;break;case"5g":t.newCellName=t.nrCellName;break}const m=f=>e("div",{class:"feature_item","data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("span",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[r("["),t.networkType,r("] "),t.newCellName]),e("dl",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("dt",null,[r("cgi:")]),e("dd",null,[t.cgi])]),f||"",e("dl",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("dt",null,[r("状态:")]),e("dd",null,[t.cellLifeStatus])])]),F=()=>e("div",{class:"feature_item","data-function":"getSingleByFeatures","data-unique":`hotPointID:${t.hotPointID}`},[e("span",{"data-function":"getSingleByFeatures","data-unique":`hotPointID:${t.hotPointID}`},[r("[POI点] "),t.address]),e("dl",{"data-function":"getSingleByFeatures","data-unique":`hotPointID:${t.hotPointID}`},[e("dt",null,[r("名称:")]),e("dd",null,[t.name])]),e("dl",{"data-function":"getSingleByFeatures","data-unique":`hotPointID:${t.hotPointID}`},[e("dt",null,[r("经纬度:")]),e("dd",null,[r("["),t.lonlat,r("]")])])]);if(!c.get("businessType")&&!c.get("drawType"))return i.type.length>3?m(e("dl",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("dt",null,[r("基站类型:")]),e("dd",null,[t.coverType,r(" - ["),c.get("type")==="Marker"?"标注点":"扇区",r("]")])])):m();if(c.get("businessType")==="POIMarker")return F()});return a(d),e(y,null,[e("div",{class:"common_features_popup_item"},[e("ul",{class:"features_top"},[e("li",null,[i.name]),e("li",null,[r("类型: "),i.type])]),g])])},I=(i,a)=>{let d=0,g=0;const c=i.popupData.map(t=>{switch(t.coverType){case"室内":d+=1;break;case"室外":g+=1;break}switch(t.networkType){case"4g":t.newCellName=t.cellName;break;case"5g":t.newCellName=t.nrCellName;break}return e("div",{class:"feature_item","data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("span",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[r("["),t.networkType,r("] "),t.newCellName]),e("dl",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("dt",null,[r("cgi:")]),e("dd",null,[t.cgi])]),e("dl",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("dt",null,[r("状态:")]),e("dd",null,[t.cellLifeStatus])])])});return a(i.popupData),e(y,null,[e("div",{class:"common_features_popup_item"},[e("ul",{class:"features_top"},[e("li",null,[i.popupData.length,r(" 个要素")]),e("li",null,[r("点要素: "),d]),e("li",null,[r("扇区要素: "),g])]),c])])},R={__name:"index",setup(i){const a=S(null);let d="频率";D.on("fixCommonPopupData",u=>{switch(u.popupData.networkType){case"4g":u.popupData.newCellName=u.popupData.cellName;break;case"5g":u.popupData.newCellName=u.popupData.nrCellName;break}}),D.on("setCommonPopupInner",({popupObj:u,featureItem:l,callback:s})=>{if(!l){let n=u.currentPopupData;if(n||(n=u.popupData),n.searchType==="POI"){s(v(u));return}s(C(u));return}if(l.get("businessType")==="POIMarker"){s(v(u));return}s(C(u))}),D.on("setFeaturesPopupInner",({popupObj:u,callback:l,next:s})=>{u.noFeature?l(I(u,n=>{s(n)})):l(b(u,n=>{s(n)}))}),D.on("popupDataGetMore",async({currentPopupObj:u,callback:l})=>{!u.currentPopupData&&u.popupData&&(u.currentPopupData=u.popupData),l(u.currentPopupData)});const g=(u,l)=>{a.value.renderFeatureByData(u,l,(s,n)=>{if(n.coverType==="室内"){let o=[];o={lonlat:[n.longitude,n.latitude],pointData:n},a.value.addPoint(s,o)}if(n.coverType==="室外"){let o=[];o.push({lonlat:[n.longitude,n.latitude],curveData:n}),a.value.addCurve(s,o,B=>c(B.curveData))}})},c=(u,l=.4)=>{switch(d){case"频率":return t(u,l=.4);case"健康度":return m(u,l=.4)}},t=(u,l=.4)=>{let s=null,n="rgba(255, 205, 67, 0.3)",o=0;switch(u.workFrequency){case"A频段":s=a.value.setFeaturesStyle(`rgba(200, 22, 100, ${l})`,n),o=100;break;case"D频段":s=a.value.setFeaturesStyle(`rgba(55, 33, 188, ${l})`,n),o=110;break;case"E频段":s=a.value.setFeaturesStyle(`rgba(88, 99, 200, ${l})`,n),o=120;break;case"F频段":s=a.value.setFeaturesStyle(`rgba(255, 255, 0, ${l})`,n),o=130;break;case"FDD":s=a.value.setFeaturesStyle(`rgba(255, 76, 127, ${l})`,n),o=140;break;default:s=a.value.setFeaturesStyle(`rgba(32, 222, 230, ${l})`,n),o=150;break}return{myCurveStyle:s,myCurveRadius:o}},m=(u,l=.4)=>{let s=null,n="rgba(255, 205, 67, 0.3)",o=0;switch(u.workFrequency){case"A频段":s=a.value.setFeaturesStyle(`rgba(200, 22, 100, ${l})`,n),o=100;break;case"D频段":s=a.value.setFeaturesStyle(`rgba(55, 33, 188, ${l})`,n),o=110;break;case"E频段":s=a.value.setFeaturesStyle(`rgba(88, 99, 200, ${l})`,n),o=120;break;case"F频段":s=a.value.setFeaturesStyle(`rgba(255, 255, 0, ${l})`,n),o=130;break;case"FDD":s=a.value.setFeaturesStyle(`rgba(255, 76, 127, ${l})`,n),o=140;break;default:s=a.value.setFeaturesStyle(`rgba(32, 222, 230, ${l})`,n),o=150;break}return{myCurveStyle:s,myCurveRadius:o}},F=(u,l)=>{},f=async u=>{P(u);let l=await $();const{cell4gList:s,cell5gList:n}=l.data;n.forEach(o=>{o.networkType="5g"}),g(u,s),g(u,n)},P=u=>{let l=a.value.getCurrentViewPosition(u);return{minLatitude:l.bottomRight[1],maxLatitude:l.topLeft[1],minLongitude:l.topLeft[0],maxLongitude:l.bottomRight[0]}};return(u,l)=>(w(),h(_,{class:"empty_map",ref_key:"refOpenlayerBaseMap",ref:a,isShowLend:!0,currentPageType:"demo",onGetOlMapInstance:F,onGetCurrentViewData:f},null,512))}};export{R as default};
