import{bW as N,bX as Cu,K as bl,bY as ai,bZ as Xe,b_ as He,b$ as wl,aE as me,c0 as gn,an as se,c1 as Dl,bU as nt,c2 as Au,ap as C,c3 as Ne,f as St,aD as we,ay as H,bd as U,bs as Tl,c4 as Iu,k as We,bl as $,c5 as ut,O as ne,c6 as yn,c7 as Cl,c8 as mn,c9 as Al,ca as Il,cb as Ll,cc as Pl,ab as be,bQ as Lu,j as ce,cd as Pu,I as Mu,ao as Ge,ce as Ze,cf as Ci,cg as Ai,au as B,ch as $e,ci as Sn,aG as Le,av as le,ax as ie,as as De,M as at,aq as O,cj as Ml,ck as xt,cl as Hr,cm as Ke,cn as xn,co as Vu,T as Yt,Z as de,b as ye,cp as Te,cq as Vl,bR as Ve,cr as Hi,al as F,J as ot,cs as Xt,ct as ju,cu as jl,bN as _n,cv as sa,cw as kt,cx as ua,cy as Nu,cz as Wi,W as Pe,am as oe,bS as Wr,bT as he,aw as Me,cA as Qi,cB as Ji,v as Ee,bF as Eu,cD as Ft,cE as Ii,cF as je,ar as Fe,l as fa,bV as oi,cG as li,cH as it,cI as bn,cJ as Ru,cK as ku,cL as zt,cM as ca,cN as zu,cO as _e,cP as Fr,cQ as Bu,cR as Ou,cS as Gu,cT as wn,cU as Nl,c as si,cV as El,cW as Dn,cX as Tn,cY as Hu,U as Cn,cZ as Lt,a5 as Pt,c_ as Wu,c$ as Fu,d0 as $u,d1 as Uu,d2 as An,x as Yu,d3 as Xu,az as Re,d4 as Rl,d5 as Zu,aC as Qe,aB as Je,aF as In,a as kl,n as zl,d6 as Bl,d7 as $t,d8 as Ol,F as Ku,d9 as Ln,o as _t,m as Mt,A as Gl,da as Hl,db as Wl,dc as Fl,dd as qu,de as Qu,df as Ju,dg as $l,dh as Ul,di as Yl,S as Pn,dj as $r,dk as Ur,dl as ef,dm as Mn,z as er,dn as tf,dp as Xl,dq as Vn,dr as jn,ds as Zl,dt as tr,du as rf,dv as ge,dw as Kl,dx as Nn,dy as ql,dz as nf,dA as va,dB as Fi,P as bt,t as af,dC as Yr,dD as $i,dE as ha,dF as of,dG as lf,dH as sf,dI as Ql,dJ as da,dK as uf,dL as ui,dM as ff,Y as cf,u as vf,bK as hf,dN as E,aA as df,dO as Zt,dP as pf,dQ as gf,dR as Jl,dS as pa,dT as yf,dU as mf,a7 as Sf,a3 as es,dV as xf,dW as ts,R as Xr,dX as _f,a8 as bf,dY as wf,dZ as Df,d_ as Tf,d$ as Cf,e0 as Af,e1 as If,e2 as Lf,e3 as is,e4 as Pf,e5 as Mf,e6 as rs,e7 as Vf,e8 as ga,y as jf,e9 as Nf,ea as Ef,eb as Rf,ec as kf,ed as ns,ee as as,ef as Vt,eg as fi,eh as zf,ei as Bf,ej as Of,ek as Gf,el as En,h as ir,em as Zr,en as Hf,eo as Wf,ep as Ff,a0 as $f,aP as Uf,i as Yf,r as Xf,eq as Li,er as Zf,es as Kf,et as Ui,g as qf,eu as Qf,ai as Jf,ev as Kr,a4 as rr,ew as ec,ex as tc,ey as ic,D as ya,ez as rc,eA as et,eB as Kt,eC as nc,eD as ma,ae as ac,L as oc,eE as lc,eF as sc,eG as os,eH as ls,eI as uc,eJ as fc,eK as cc,eL as vc,eM as hc,eN as dc,eO as Yi,eP as pc,eQ as gc,eR as yc,eS as mc,eT as Sc,eU as xc,eV as _c,eW as bc,eX as wc,eY as ss,eZ as Rn,e_ as Dc,e$ as Tc,f0 as Cc,f1 as Ac,f2 as Sa,f3 as Ic,bi as Lc,bw as Pc,bv as Mc,by as Vc,bz as jc,bA as Nc,bB as Ec,bx as Rc,bo as kc,br as zc,bt as Bc,bn as Oc,bm as Gc,bq as Hc,bu as Wc,f4 as Fc,f5 as $c,bp as Uc,bj as Yc,bC as Xc,bk as Zc,aU as Kc,b1 as qc}from"./installCanvasRenderer-BBkNgtIH.js";import{l as us,G as Qc}from"./Graph-B2IlQAJs.js";import{aC as Jc,h as ci,R as ev,av as tv,r as iv,o as rv,c as nv,a as nr,b as xa,w as _a,e as ba,n as av,z as ov}from"./index-_sZYDcgc.js";import{_ as lv}from"./plugin-vueexport-helper-DlAUqK2U.js";var sv=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.render=function(e,r,n,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===e.id){var l=this._mapDraw;l&&o.add(l.group)}else if(e.needsDrawMap){var l=this._mapDraw||new Cu(n);o.add(l.group),l.draw(e,r,n,this,a),this._mapDraw=l}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(e,r,n)}}},i.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},i.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},i.prototype._renderSymbols=function(e,r,n){var a=e.originalData,o=this.group;a.each(a.mapDimension("value"),function(l,s){if(!isNaN(l)){var u=a.getItemLayout(s);if(!(!u||!u.point)){var f=u.point,c=u.offset,v=new bl({style:{fill:e.getData().getVisual("style").fill},shape:{cx:f[0]+c*9,cy:f[1],r:3},silent:!0,z2:8+(c?0:ai+1)});if(!c){var h=e.mainSeries.getData(),d=a.getName(s),p=h.indexOfName(d),y=a.getItemModel(s),S=y.getModel("label"),x=h.getItemGraphicEl(p);Xe(v,He(y),{labelFetcher:{getFormattedLabel:function(m,_){return e.getFormattedLabel(p,_)}},defaultText:d}),v.disableLabelAnimation=!0,S.get("position")||v.setTextConfig({position:"bottom"}),x.onHoverStateChange=function(m){wl(v,m)}}o.add(v)}}})},i.type="map",i}(me),uv=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(r){if(r!=null){var n=this.getData().getName(r),a=this.coordinateSystem,o=a.getRegion(n);return o&&a.dataToPoint(o.getCenter())}},e}return i.prototype.getInitialData=function(e){for(var r=gn(this,{coordDimensions:["value"],encodeDefaulter:se(Dl,this)}),n=nt(),a=[],o=0,l=r.count();o<l;o++){var s=r.getName(o);n.set(s,!0)}var u=Au.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return C(u.regions,function(f){var c=f.name;n.get(c)||a.push(c)}),r.appendValues([],a),r},i.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},i.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},i.prototype.getRawValue=function(e){var r=this.getData();return r.get(r.mapDimension("value"),e)},i.prototype.getRegionModel=function(e){var r=this.getData();return r.getItemModel(r.indexOfName(e))},i.prototype.formatTooltip=function(e,r,n){for(var a=this.getData(),o=this.getRawValue(e),l=a.getName(e),s=this.seriesGroup,u=[],f=0;f<s.length;f++){var c=s[f].originalData.indexOfName(l),v=a.mapDimension("value");isNaN(s[f].originalData.get(v,c))||u.push(s[f].name)}return Ne("section",{header:u.join(", "),noHeader:!u.length,blocks:[Ne("nameValue",{name:l,value:o})]})},i.prototype.setZoom=function(e){this.option.zoom=e},i.prototype.setCenter=function(e){this.option.center=e},i.prototype.getLegendIcon=function(e){var r=e.icon||"roundRect",n=St(r,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return n.setStyle(e.itemStyle),n.style.stroke="none",r.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},i.type="series.map",i.dependencies=["geo"],i.layoutMode="box",i.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},i}(we);function fv(t,i){var e={};return C(t,function(r){r.each(r.mapDimension("value"),function(n,a){var o="ec-"+r.getName(a);e[o]=e[o]||[],isNaN(n)||e[o].push(n)})}),t[0].map(t[0].mapDimension("value"),function(r,n){for(var a="ec-"+t[0].getName(n),o=0,l=1/0,s=-1/0,u=e[a].length,f=0;f<u;f++)l=Math.min(l,e[a][f]),s=Math.max(s,e[a][f]),o+=e[a][f];var c;return i==="min"?c=l:i==="max"?c=s:i==="average"?c=o/u:c=o,u===0?NaN:c})}function cv(t){var i={};t.eachSeriesByType("map",function(e){var r=e.getHostGeoModel(),n=r?"o"+r.id:"i"+e.getMapType();(i[n]=i[n]||[]).push(e)}),C(i,function(e,r){for(var n=fv(H(e,function(o){return o.getData()}),e[0].get("mapValueCalculation")),a=0;a<e.length;a++)e[a].originalData=e[a].getData();for(var a=0;a<e.length;a++)e[a].seriesGroup=e,e[a].needsDrawMap=a===0&&!e[a].getHostGeoModel(),e[a].setData(n.cloneShallow()),e[a].mainSeries=e[0]})}function vv(t){var i={};t.eachSeriesByType("map",function(e){var r=e.getMapType();if(!(e.getHostGeoModel()||i[r])){var n={};C(e.seriesGroup,function(o){var l=o.coordinateSystem,s=o.originalData;o.get("showLegendSymbol")&&t.getComponent("legend")&&s.each(s.mapDimension("value"),function(u,f){var c=s.getName(f),v=l.getRegion(c);if(!(!v||isNaN(u))){var h=n[c]||0,d=l.dataToPoint(v.getCenter());n[c]=h+1,s.setItemLayout(f,{point:d,offset:h})}})});var a=e.getData();a.each(function(o){var l=a.getName(o),s=a.getItemLayout(o)||{};s.showLabel=!n[l],a.setItemLayout(o,s)}),i[r]=!0}})}function hv(t){U(Tl),t.registerChartView(sv),t.registerSeriesModel(uv),t.registerLayout(vv),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,cv),Iu("map",t.registerAction)}function dv(t){var i=t;i.hierNode={defaultAncestor:null,ancestor:i,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e=[i],r,n;r=e.pop();)if(n=r.children,r.isExpand&&n.length)for(var a=n.length,o=a-1;o>=0;o--){var l=n[o];l.hierNode={defaultAncestor:null,ancestor:l,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},e.push(l)}}function pv(t,i){var e=t.isExpand?t.children:[],r=t.parentNode.children,n=t.hierNode.i?r[t.hierNode.i-1]:null;if(e.length){mv(t);var a=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;n?(t.hierNode.prelim=n.hierNode.prelim+i(t,n),t.hierNode.modifier=t.hierNode.prelim-a):t.hierNode.prelim=a}else n&&(t.hierNode.prelim=n.hierNode.prelim+i(t,n));t.parentNode.hierNode.defaultAncestor=Sv(t,n,t.parentNode.hierNode.defaultAncestor||r[0],i)}function gv(t){var i=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:i},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function wa(t){return arguments.length?t:bv}function Bt(t,i){return t-=Math.PI/2,{x:i*Math.cos(t),y:i*Math.sin(t)}}function yv(t,i){return We(t.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})}function mv(t){for(var i=t.children,e=i.length,r=0,n=0;--e>=0;){var a=i[e];a.hierNode.prelim+=r,a.hierNode.modifier+=r,n+=a.hierNode.change,r+=a.hierNode.shift+n}}function Sv(t,i,e,r){if(i){for(var n=t,a=t,o=a.parentNode.children[0],l=i,s=n.hierNode.modifier,u=a.hierNode.modifier,f=o.hierNode.modifier,c=l.hierNode.modifier;l=ar(l),a=or(a),l&&a;){n=ar(n),o=or(o),n.hierNode.ancestor=t;var v=l.hierNode.prelim+c-a.hierNode.prelim-u+r(l,a);v>0&&(_v(xv(l,t,e),t,v),u+=v,s+=v),c+=l.hierNode.modifier,u+=a.hierNode.modifier,s+=n.hierNode.modifier,f+=o.hierNode.modifier}l&&!ar(n)&&(n.hierNode.thread=l,n.hierNode.modifier+=c-s),a&&!or(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=u-f,e=t)}return e}function ar(t){var i=t.children;return i.length&&t.isExpand?i[i.length-1]:t.hierNode.thread}function or(t){var i=t.children;return i.length&&t.isExpand?i[0]:t.hierNode.thread}function xv(t,i,e){return t.hierNode.ancestor.parentNode===i.parentNode?t.hierNode.ancestor:e}function _v(t,i,e){var r=e/(i.hierNode.i-t.hierNode.i);i.hierNode.change-=r,i.hierNode.shift+=e,i.hierNode.modifier+=e,i.hierNode.prelim+=e,t.hierNode.change+=r}function bv(t,i){return t.parentNode===i.parentNode?1:2}var wv=function(){function t(){this.parentPoint=[],this.childPoints=[]}return t}(),Dv=function(t){N(i,t);function i(e){return t.call(this,e)||this}return i.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},i.prototype.getDefaultShape=function(){return new wv},i.prototype.buildPath=function(e,r){var n=r.childPoints,a=n.length,o=r.parentPoint,l=n[0],s=n[a-1];if(a===1){e.moveTo(o[0],o[1]),e.lineTo(l[0],l[1]);return}var u=r.orient,f=u==="TB"||u==="BT"?0:1,c=1-f,v=$(r.forkPosition,1),h=[];h[f]=o[f],h[c]=o[c]+(s[c]-o[c])*v,e.moveTo(o[0],o[1]),e.lineTo(h[0],h[1]),e.moveTo(l[0],l[1]),h[f]=l[f],e.lineTo(h[0],h[1]),h[f]=s[f],e.lineTo(h[0],h[1]),e.lineTo(s[0],s[1]);for(var d=1;d<a-1;d++){var p=n[d];e.moveTo(p[0],p[1]),h[f]=p[f],e.lineTo(h[0],h[1])}},i}(ut),Tv=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e._mainGroup=new ne,e}return i.prototype.init=function(e,r){this._controller=new yn(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},i.prototype.render=function(e,r,n){var a=e.getData(),o=e.layoutInfo,l=this._mainGroup,s=e.get("layout");s==="radial"?(l.x=o.x+o.width/2,l.y=o.y+o.height/2):(l.x=o.x,l.y=o.y),this._updateViewCoordSys(e,n),this._updateController(e,r,n);var u=this._data;a.diff(u).add(function(f){Da(a,f)&&Ta(a,f,null,l,e)}).update(function(f,c){var v=u.getItemGraphicEl(c);if(!Da(a,f)){v&&Aa(u,c,v,l,e);return}Ta(a,f,v,l,e)}).remove(function(f){var c=u.getItemGraphicEl(f);c&&Aa(u,f,c,l,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),e.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(f,c){f.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:c})})}),this._data=a},i.prototype._updateViewCoordSys=function(e,r){var n=e.getData(),a=[];n.each(function(c){var v=n.getItemLayout(c);v&&!isNaN(v.x)&&!isNaN(v.y)&&a.push([+v.x,+v.y])});var o=[],l=[];Cl(a,o,l);var s=this._min,u=this._max;l[0]-o[0]===0&&(o[0]=s?s[0]:o[0]-1,l[0]=u?u[0]:l[0]+1),l[1]-o[1]===0&&(o[1]=s?s[1]:o[1]-1,l[1]=u?u[1]:l[1]+1);var f=e.coordinateSystem=new mn;f.zoomLimit=e.get("scaleLimit"),f.setBoundingRect(o[0],o[1],l[0]-o[0],l[1]-o[1]),f.setCenter(e.get("center"),r),f.setZoom(e.get("zoom")),this.group.attr({x:f.x,y:f.y,scaleX:f.scaleX,scaleY:f.scaleY}),this._min=o,this._max=l},i.prototype._updateController=function(e,r,n){var a=this,o=this._controller,l=this._controllerHost,s=this.group;o.setPointerChecker(function(u,f,c){var v=s.getBoundingRect();return v.applyTransform(s.transform),v.contain(f,c)&&!Al(u,n,e)}),o.enable(e.get("roam")),l.zoomLimit=e.get("scaleLimit"),l.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){Il(l,u.dx,u.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Ll(l,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(e),n.updateLabelLayout()})},i.prototype._updateNodeAndLinkScale=function(e){var r=e.getData(),n=this._getNodeGlobalScale(e);r.eachItemGraphicEl(function(a,o){a.setSymbolScale(n)})},i.prototype._getNodeGlobalScale=function(e){var r=e.coordinateSystem;if(r.type!=="view")return 1;var n=this._nodeScaleRatio,a=r.scaleX||1,o=r.getZoom(),l=(o-1)*n+1;return l/a},i.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},i.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},i.type="tree",i}(me);function Da(t,i){var e=t.getItemLayout(i);return e&&!isNaN(e.x)&&!isNaN(e.y)}function Ta(t,i,e,r,n){var a=!e,o=t.tree.getNodeByDataIndex(i),l=o.getModel(),s=o.getVisual("style").fill,u=o.isExpand===!1&&o.children.length!==0?s:"#fff",f=t.tree.root,c=o.parentNode===f?o:o.parentNode||o,v=t.getItemGraphicEl(c.dataIndex),h=c.getLayout(),d=v?{x:v.__oldX,y:v.__oldY,rawX:v.__radialOldRawX,rawY:v.__radialOldRawY}:h,p=o.getLayout();a?(e=new Pl(t,i,null,{symbolInnerColor:u,useNameLabel:!0}),e.x=d.x,e.y=d.y):e.updateData(t,i,null,{symbolInnerColor:u,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=p.rawX,e.__radialRawY=p.rawY,r.add(e),t.setItemGraphicEl(i,e),e.__oldX=e.x,e.__oldY=e.y,be(e,{x:p.x,y:p.y},n);var y=e.getSymbolPath();if(n.get("layout")==="radial"){var S=f.children[0],x=S.getLayout(),m=S.children.length,_=void 0,b=void 0;if(p.x===x.x&&o.isExpand===!0&&S.children.length){var w={x:(S.children[0].getLayout().x+S.children[m-1].getLayout().x)/2,y:(S.children[0].getLayout().y+S.children[m-1].getLayout().y)/2};_=Math.atan2(w.y-x.y,w.x-x.x),_<0&&(_=Math.PI*2+_),b=w.x<x.x,b&&(_=_-Math.PI)}else _=Math.atan2(p.y-x.y,p.x-x.x),_<0&&(_=Math.PI*2+_),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(b=p.x<x.x,b&&(_=_-Math.PI)):(b=p.x>x.x,b||(_=_-Math.PI));var D=b?"left":"right",T=l.getModel("label"),A=T.get("rotate"),I=A*(Math.PI/180),L=y.getTextContent();L&&(y.setTextConfig({position:T.get("position")||D,rotation:A==null?-_:I,origin:"center"}),L.setStyle("verticalAlign","middle"))}var M=l.get(["emphasis","focus"]),V=M==="relative"?Lu(o.getAncestorsIndices(),o.getDescendantIndices()):M==="ancestor"?o.getAncestorsIndices():M==="descendant"?o.getDescendantIndices():null;V&&(ce(e).focus=V),Cv(n,o,f,e,d,h,p,r),e.__edge&&(e.onHoverStateChange=function(P){if(P!=="blur"){var j=o.parentNode&&t.getItemGraphicEl(o.parentNode.dataIndex);j&&j.hoverState===Pu||wl(e.__edge,P)}})}function Cv(t,i,e,r,n,a,o,l){var s=i.getModel(),u=t.get("edgeShape"),f=t.get("layout"),c=t.getOrient(),v=t.get(["lineStyle","curveness"]),h=t.get("edgeForkPosition"),d=s.getModel("lineStyle").getLineStyle(),p=r.__edge;if(u==="curve")i.parentNode&&i.parentNode!==e&&(p||(p=r.__edge=new Mu({shape:qr(f,c,v,n,n)})),be(p,{shape:qr(f,c,v,a,o)},t));else if(u==="polyline"&&f==="orthogonal"&&i!==e&&i.children&&i.children.length!==0&&i.isExpand===!0){for(var y=i.children,S=[],x=0;x<y.length;x++){var m=y[x].getLayout();S.push([m.x,m.y])}p||(p=r.__edge=new Dv({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:c,forkPosition:h}})),be(p,{shape:{parentPoint:[o.x,o.y],childPoints:S}},t)}p&&!(u==="polyline"&&!i.isExpand)&&(p.useStyle(Ge({strokeNoScale:!0,fill:null},d)),Ze(p,s,"lineStyle"),Ci(p),l.add(p))}function Ca(t,i,e,r,n){var a=i.tree.root,o=fs(a,t),l=o.source,s=o.sourceLayout,u=i.getItemGraphicEl(t.dataIndex);if(u){var f=i.getItemGraphicEl(l.dataIndex),c=f.__edge,v=u.__edge||(l.isExpand===!1||l.children.length===1?c:void 0),h=r.get("edgeShape"),d=r.get("layout"),p=r.get("orient"),y=r.get(["lineStyle","curveness"]);v&&(h==="curve"?Ai(v,{shape:qr(d,p,y,s,s),style:{opacity:0}},r,{cb:function(){e.remove(v)},removeOpt:n}):h==="polyline"&&r.get("layout")==="orthogonal"&&Ai(v,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},r,{cb:function(){e.remove(v)},removeOpt:n}))}}function fs(t,i){for(var e=i.parentNode===t?i:i.parentNode||i,r;r=e.getLayout(),r==null;)e=e.parentNode===t?e:e.parentNode||e;return{source:e,sourceLayout:r}}function Aa(t,i,e,r,n){var a=t.tree.getNodeByDataIndex(i),o=t.tree.root,l=fs(o,a).sourceLayout,s={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};Ai(e,{x:l.x+1,y:l.y+1},n,{cb:function(){r.remove(e),t.setItemGraphicEl(i,null)},removeOpt:s}),e.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:s}),a.children.forEach(function(u){Ca(u,t,r,n,s)}),Ca(a,t,r,n,s)}function qr(t,i,e,r,n){var a,o,l,s,u,f,c,v;if(t==="radial"){u=r.rawX,c=r.rawY,f=n.rawX,v=n.rawY;var h=Bt(u,c),d=Bt(u,c+(v-c)*e),p=Bt(f,v+(c-v)*e),y=Bt(f,v);return{x1:h.x||0,y1:h.y||0,x2:y.x||0,y2:y.y||0,cpx1:d.x||0,cpy1:d.y||0,cpx2:p.x||0,cpy2:p.y||0}}else u=r.x,c=r.y,f=n.x,v=n.y,(i==="LR"||i==="RL")&&(a=u+(f-u)*e,o=c,l=f+(u-f)*e,s=v),(i==="TB"||i==="BT")&&(a=u,o=c+(v-c)*e,l=f,s=v+(c-v)*e);return{x1:u,y1:c,x2:f,y2:v,cpx1:a,cpy1:o,cpx2:l,cpy2:s}}var Av=function(){function t(i,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=i||"",this.hostTree=e}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(i,e,r){le(i)&&(r=e,e=i,i=null),i=i||{},ie(i)&&(i={order:i});var n=i.order||"preorder",a=this[i.attr||"children"],o;n==="preorder"&&(o=e.call(r,this));for(var l=0;!o&&l<a.length;l++)a[l].eachNode(i,e,r);n==="postorder"&&e.call(r,this)},t.prototype.updateDepthAndHeight=function(i){var e=0;this.depth=i;for(var r=0;r<this.children.length;r++){var n=this.children[r];n.updateDepthAndHeight(i+1),n.height>e&&(e=n.height)}this.height=e+1},t.prototype.getNodeById=function(i){if(this.getId()===i)return this;for(var e=0,r=this.children,n=r.length;e<n;e++){var a=r[e].getNodeById(i);if(a)return a}},t.prototype.contains=function(i){if(i===this)return!0;for(var e=0,r=this.children,n=r.length;e<n;e++){var a=r[e].contains(i);if(a)return a}},t.prototype.getAncestors=function(i){for(var e=[],r=i?this:this.parentNode;r;)e.push(r),r=r.parentNode;return e.reverse(),e},t.prototype.getAncestorsIndices=function(){for(var i=[],e=this;e;)i.push(e.dataIndex),e=e.parentNode;return i.reverse(),i},t.prototype.getDescendantIndices=function(){var i=[];return this.eachNode(function(e){i.push(e.dataIndex)}),i},t.prototype.getValue=function(i){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(i||"value"),this.dataIndex)},t.prototype.setLayout=function(i,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,i,e)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(i){if(!(this.dataIndex<0)){var e=this.hostTree,r=e.data.getItemModel(this.dataIndex);return r.getModel(i)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(i,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,i,e)},t.prototype.getVisual=function(i){return this.hostTree.data.getItemVisual(this.dataIndex,i)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var i=this.parentNode.children,e=0;e<i.length;++e)if(i[e]===this)return e;return-1}return-1},t.prototype.isAncestorOf=function(i){for(var e=i.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},t.prototype.isDescendantOf=function(i){return i!==this&&i.isAncestorOf(this)},t}(),kn=function(){function t(i){this.type="tree",this._nodes=[],this.hostModel=i}return t.prototype.eachNode=function(i,e,r){this.root.eachNode(i,e,r)},t.prototype.getNodeByDataIndex=function(i){var e=this.data.getRawIndex(i);return this._nodes[e]},t.prototype.getNodeById=function(i){return this.root.getNodeById(i)},t.prototype.update=function(){for(var i=this.data,e=this._nodes,r=0,n=e.length;r<n;r++)e[r].dataIndex=-1;for(var r=0,n=i.count();r<n;r++)e[i.getRawIndex(r)].dataIndex=r},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(i,e,r){var n=new t(e),a=[],o=1;l(i);function l(f,c){var v=f.value;o=Math.max(o,B(v)?v.length:1),a.push(f);var h=new Av($e(f.name,""),n);c?Iv(h,c):n.root=h,n._nodes.push(h);var d=f.children;if(d)for(var p=0;p<d.length;p++)l(d[p],h)}n.root.updateDepthAndHeight(0);var s=Sn(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,u=new Le(s,e);return u.initData(a),r&&r(u),us({mainData:u,struct:n,structAttr:"tree"}),n.update(),n},t}();function Iv(t,i){var e=i.children;t.parentNode!==i&&(e.push(t),t.parentNode=i)}function qt(t,i,e){if(t&&De(i,t.type)>=0){var r=e.getData().tree.root,n=t.targetNode;if(ie(n)&&(n=r.getNodeById(n)),n&&r.contains(n))return{node:n};var a=t.targetNodeId;if(a!=null&&(n=r.getNodeById(a)))return{node:n}}}function cs(t){for(var i=[];t;)t=t.parentNode,t&&i.push(t);return i.reverse()}function zn(t,i){var e=cs(t);return De(e,i)>=0}function Xi(t,i){for(var e=[];t;){var r=t.dataIndex;e.push({name:t.name,dataIndex:r,value:i.getRawValue(r)}),t=t.parentNode}return e.reverse(),e}var Lv=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return i.prototype.getInitialData=function(e){var r={name:e.name,children:e.data},n=e.leaves||{},a=new at(n,this,this.ecModel),o=kn.createTree(r,this,l);function l(c){c.wrapMethod("getItemModel",function(v,h){var d=o.getNodeByDataIndex(h);return d&&d.children.length&&d.isExpand||(v.parentModel=a),v})}var s=0;o.eachNode("preorder",function(c){c.depth>s&&(s=c.depth)});var u=e.expandAndCollapse,f=u&&e.initialTreeDepth>=0?e.initialTreeDepth:s;return o.root.eachNode("preorder",function(c){var v=c.hostTree.data.getRawDataItem(c.dataIndex);c.isExpand=v&&v.collapsed!=null?!v.collapsed:c.depth<=f}),o.data},i.prototype.getOrient=function(){var e=this.get("orient");return e==="horizontal"?e="LR":e==="vertical"&&(e="TB"),e},i.prototype.setZoom=function(e){this.option.zoom=e},i.prototype.setCenter=function(e){this.option.center=e},i.prototype.formatTooltip=function(e,r,n){for(var a=this.getData().tree,o=a.root.children[0],l=a.getNodeByDataIndex(e),s=l.getValue(),u=l.name;l&&l!==o;)u=l.parentNode.name+"."+u,l=l.parentNode;return Ne("nameValue",{name:u,value:s,noValue:isNaN(s)||s==null})},i.prototype.getDataParams=function(e){var r=t.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return r.treeAncestors=Xi(n,this),r.collapsed=!n.isExpand,r},i.type="series.tree",i.layoutMode="box",i.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},i}(we);function Pv(t,i,e){for(var r=[t],n=[],a;a=r.pop();)if(n.push(a),a.isExpand){var o=a.children;if(o.length)for(var l=0;l<o.length;l++)r.push(o[l])}for(;a=n.pop();)i(a,e)}function jt(t,i){for(var e=[t],r;r=e.pop();)if(i(r),r.isExpand){var n=r.children;if(n.length)for(var a=n.length-1;a>=0;a--)e.push(n[a])}}function Mv(t,i){t.eachSeriesByType("tree",function(e){Vv(e,i)})}function Vv(t,i){var e=yv(t,i);t.layoutInfo=e;var r=t.get("layout"),n=0,a=0,o=null;r==="radial"?(n=2*Math.PI,a=Math.min(e.height,e.width)/2,o=wa(function(m,_){return(m.parentNode===_.parentNode?1:2)/m.depth})):(n=e.width,a=e.height,o=wa());var l=t.getData().tree.root,s=l.children[0];if(s){dv(l),Pv(s,pv,o),l.hierNode.modifier=-s.hierNode.prelim,jt(s,gv);var u=s,f=s,c=s;jt(s,function(m){var _=m.getLayout().x;_<u.getLayout().x&&(u=m),_>f.getLayout().x&&(f=m),m.depth>c.depth&&(c=m)});var v=u===f?1:o(u,f)/2,h=v-u.getLayout().x,d=0,p=0,y=0,S=0;if(r==="radial")d=n/(f.getLayout().x+v+h),p=a/(c.depth-1||1),jt(s,function(m){y=(m.getLayout().x+h)*d,S=(m.depth-1)*p;var _=Bt(y,S);m.setLayout({x:_.x,y:_.y,rawX:y,rawY:S},!0)});else{var x=t.getOrient();x==="RL"||x==="LR"?(p=a/(f.getLayout().x+v+h),d=n/(c.depth-1||1),jt(s,function(m){S=(m.getLayout().x+h)*p,y=x==="LR"?(m.depth-1)*d:n-(m.depth-1)*d,m.setLayout({x:y,y:S},!0)})):(x==="TB"||x==="BT")&&(d=n/(f.getLayout().x+v+h),p=a/(c.depth-1||1),jt(s,function(m){y=(m.getLayout().x+h)*d,S=x==="TB"?(m.depth-1)*p:a-(m.depth-1)*p,m.setLayout({x:y,y:S},!0)}))}}}function jv(t){t.eachSeriesByType("tree",function(i){var e=i.getData(),r=e.tree;r.eachNode(function(n){var a=n.getModel(),o=a.getModel("itemStyle").getItemStyle(),l=e.ensureUniqueItemVisual(n.dataIndex,"style");O(l,o)})})}function Nv(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(i,e){e.eachComponent({mainType:"series",subType:"tree",query:i},function(r){var n=i.dataIndex,a=r.getData().tree,o=a.getNodeByDataIndex(n);o.isExpand=!o.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(i,e,r){e.eachComponent({mainType:"series",subType:"tree",query:i},function(n){var a=n.coordinateSystem,o=Ml(a,i,void 0,r);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}function Ev(t){t.registerChartView(Tv),t.registerSeriesModel(Lv),t.registerLayout(Mv),t.registerVisual(jv),Nv(t)}var Ia=["treemapZoomToNode","treemapRender","treemapMove"];function Rv(t){for(var i=0;i<Ia.length;i++)t.registerAction({type:Ia[i],update:"updateView"},xt);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,r){r.eachComponent({mainType:"series",subType:"treemap",query:e},n);function n(a,o){var l=["treemapZoomToNode","treemapRootToNode"],s=qt(e,l,a);if(s){var u=a.getViewRoot();u&&(e.direction=zn(u,s.node)?"rollUp":"drillDown"),a.resetViewRoot(s.node)}}})}function vs(t){var i=t.getData(),e=i.tree,r={};e.eachNode(function(n){for(var a=n;a&&a.depth>1;)a=a.parentNode;var o=Hr(t.ecModel,a.name||a.dataIndex+"",r);n.setVisual("decal",o)})}var kv=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.preventUsingHoverLayer=!0,e}return i.prototype.getInitialData=function(e,r){var n={name:e.name,children:e.data};hs(n);var a=e.levels||[],o=this.designatedVisualItemStyle={},l=new at({itemStyle:o},this,r);a=e.levels=zv(a,r);var s=H(a||[],function(c){return new at(c,l,r)},this),u=kn.createTree(n,this,f);function f(c){c.wrapMethod("getItemModel",function(v,h){var d=u.getNodeByDataIndex(h),p=d?s[d.depth]:null;return v.parentModel=p||l,v})}return u.data},i.prototype.optionUpdated=function(){this.resetViewRoot()},i.prototype.formatTooltip=function(e,r,n){var a=this.getData(),o=this.getRawValue(e),l=a.getName(e);return Ne("nameValue",{name:l,value:o})},i.prototype.getDataParams=function(e){var r=t.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return r.treeAncestors=Xi(n,this),r.treePathInfo=r.treeAncestors,r},i.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},O(this.layoutInfo,e)},i.prototype.mapIdToIndex=function(e){var r=this._idIndexMap;r||(r=this._idIndexMap=nt(),this._idIndexMapCount=0);var n=r.get(e);return n==null&&r.set(e,n=this._idIndexMapCount++),n},i.prototype.getViewRoot=function(){return this._viewRoot},i.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var r=this.getRawData().tree.root;(!e||e!==r&&!r.contains(e))&&(this._viewRoot=r)},i.prototype.enableAriaDecal=function(){vs(this)},i.type="series.treemap",i.layoutMode="box",i.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},i}(we);function hs(t){var i=0;C(t.children,function(r){hs(r);var n=r.value;B(n)&&(n=n[0]),i+=n});var e=t.value;B(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=i),e<0&&(e=0),B(t.value)?t.value[0]=e:t.value=e}function zv(t,i){var e=Ke(i.get("color")),r=Ke(i.get(["aria","decal","decals"]));if(e){t=t||[];var n,a;C(t,function(l){var s=new at(l),u=s.get("color"),f=s.get("decal");(s.get(["itemStyle","color"])||u&&u!=="none")&&(n=!0),(s.get(["itemStyle","decal"])||f&&f!=="none")&&(a=!0)});var o=t[0]||(t[0]={});return n||(o.color=e.slice()),!a&&r&&(o.decal=r.slice()),t}}var Bv=8,La=8,lr=5,Ov=function(){function t(i){this.group=new ne,i.add(this.group)}return t.prototype.render=function(i,e,r,n){var a=i.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!r)){var l=a.getModel("itemStyle"),s=a.getModel("emphasis"),u=l.getModel("textStyle"),f=s.getModel(["itemStyle","textStyle"]),c={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,c,u),this._renderContent(i,c,l,s,u,f,n),xn(o,c.pos,c.box)}},t.prototype._prepare=function(i,e,r){for(var n=i;n;n=n.parentNode){var a=$e(n.getModel().get("name"),""),o=r.getTextRect(a),l=Math.max(o.width+Bv*2,e.emptyItemWidth);e.totalWidth+=l+La,e.renderList.push({node:n,text:a,width:l})}},t.prototype._renderContent=function(i,e,r,n,a,o,l){for(var s=0,u=e.emptyItemWidth,f=i.get(["breadcrumb","height"]),c=Vu(e.pos,e.box),v=e.totalWidth,h=e.renderList,d=n.getModel("itemStyle").getItemStyle(),p=h.length-1;p>=0;p--){var y=h[p],S=y.node,x=y.width,m=y.text;v>c.width&&(v-=x-u,x=u,m=null);var _=new Yt({shape:{points:Gv(s,0,x,f,p===h.length-1,p===0)},style:Ge(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new de({style:ye(a,{text:m})}),textConfig:{position:"inside"},z2:ai*1e4,onclick:se(l,S)});_.disableLabelAnimation=!0,_.getTextContent().ensureState("emphasis").style=ye(o,{text:m}),_.ensureState("emphasis").style=d,Te(_,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(_),Hv(_,i,S),s+=x+La}},t.prototype.remove=function(){this.group.removeAll()},t}();function Gv(t,i,e,r,n,a){var o=[[n?t:t-lr,i],[t+e,i],[t+e,i+r],[n?t:t-lr,i+r]];return!a&&o.splice(2,0,[t+e+lr,i+r/2]),!n&&o.push([t,i+r/2]),o}function Hv(t,i,e){ce(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:i.componentIndex,seriesIndex:i.seriesIndex,seriesName:i.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&Xi(e,i)}}var Wv=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(i,e,r,n,a){return this._elExistsMap[i.id]?!1:(this._elExistsMap[i.id]=!0,this._storage.push({el:i,target:e,duration:r,delay:n,easing:a}),!0)},t.prototype.finished=function(i){return this._finishedCallback=i,this},t.prototype.start=function(){for(var i=this,e=this._storage.length,r=function(){e--,e<=0&&(i._storage.length=0,i._elExistsMap={},i._finishedCallback&&i._finishedCallback())},n=0,a=this._storage.length;n<a;n++){var o=this._storage[n];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},t}();function Fv(){return new Wv}var Qr=ne,Pa=Pe,Ma=3,Va="label",ja="upperLabel",$v=ai*10,Uv=ai*2,Yv=ai*3,ht=Vl([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Na=function(t){var i=ht(t);return i.stroke=i.fill=i.lineWidth=null,i},Pi=Ve(),Xv=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e._state="ready",e._storage=Nt(),e}return i.prototype.render=function(e,r,n,a){var o=r.findComponents({mainType:"series",subType:"treemap",query:a});if(!(De(o,e)<0)){this.seriesModel=e,this.api=n,this.ecModel=r;var l=["treemapZoomToNode","treemapRootToNode"],s=qt(a,l,e),u=a&&a.type,f=e.layoutInfo,c=!this._oldTree,v=this._storage,h=u==="treemapRootToNode"&&s&&v?{rootNodeGroup:v.nodeGroup[s.node.getRawIndex()],direction:a.direction}:null,d=this._giveContainerGroup(f),p=e.get("animation"),y=this._doRender(d,e,h);p&&!c&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(d,y,e,h):y.renderFinally(),this._resetController(n),this._renderBreadcrumb(e,n,s)}},i.prototype._giveContainerGroup=function(e){var r=this._containerGroup;return r||(r=this._containerGroup=new Qr,this._initEvents(r),this.group.add(r)),r.x=e.x,r.y=e.y,r},i.prototype._doRender=function(e,r,n){var a=r.getData().tree,o=this._oldTree,l=Nt(),s=Nt(),u=this._storage,f=[];function c(x,m,_,b){return Zv(r,s,u,n,l,f,x,m,_,b)}p(a.root?[a.root]:[],o&&o.root?[o.root]:[],e,a===o||!o,0);var v=y(u);if(this._oldTree=a,this._storage=s,this._controllerHost){var h=this.seriesModel.layoutInfo,d=a.root.getLayout();d.width===h.width&&d.height===h.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:l,willDeleteEls:v,renderFinally:S};function p(x,m,_,b,w){b?(m=x,C(x,function(A,I){!A.isRemoved()&&T(I,I)})):new Hi(m,x,D,D).add(T).update(T).remove(se(T,null)).execute();function D(A){return A.getId()}function T(A,I){var L=A!=null?x[A]:null,M=I!=null?m[I]:null,V=c(L,M,_,w);V&&p(L&&L.viewChildren||[],M&&M.viewChildren||[],V,b,w+1)}}function y(x){var m=Nt();return x&&C(x,function(_,b){var w=m[b];C(_,function(D){D&&(w.push(D),Pi(D).willDelete=!0)})}),m}function S(){C(v,function(x){C(x,function(m){m.parent&&m.parent.remove(m)})}),C(f,function(x){x.invisible=!0,x.dirty()})}},i.prototype._doAnimation=function(e,r,n,a){var o=n.get("animationDurationUpdate"),l=n.get("animationEasing"),s=(le(o)?0:o)||0,u=(le(l)?null:l)||"cubicOut",f=Fv();C(r.willDeleteEls,function(c,v){C(c,function(h,d){if(!h.invisible){var p=h.parent,y,S=Pi(p);if(a&&a.direction==="drillDown")y=p===a.rootNodeGroup?{shape:{x:0,y:0,width:S.nodeWidth,height:S.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var x=0,m=0;S.willDelete||(x=S.nodeWidth/2,m=S.nodeHeight/2),y=v==="nodeGroup"?{x,y:m,style:{opacity:0}}:{shape:{x,y:m,width:0,height:0},style:{opacity:0}}}y&&f.add(h,y,s,0,u)}})}),C(this._storage,function(c,v){C(c,function(h,d){var p=r.lastsForAnimation[v][d],y={};p&&(h instanceof ne?p.oldX!=null&&(y.x=h.x,y.y=h.y,h.x=p.oldX,h.y=p.oldY):(p.oldShape&&(y.shape=O({},h.shape),h.setShape(p.oldShape)),p.fadein?(h.setStyle("opacity",0),y.style={opacity:1}):h.style.opacity!==1&&(y.style={opacity:1})),f.add(h,y,s,0,u))})},this),this._state="animating",f.finished(F(function(){this._state="ready",r.renderFinally()},this)).start()},i.prototype._resetController=function(e){var r=this._controller,n=this._controllerHost;n||(this._controllerHost={target:this.group},n=this._controllerHost),r||(r=this._controller=new yn(e.getZr()),r.enable(this.seriesModel.get("roam")),n.zoomLimit=this.seriesModel.get("scaleLimit"),n.zoom=this.seriesModel.get("zoom"),r.on("pan",F(this._onPan,this)),r.on("zoom",F(this._onZoom,this)));var a=new ot(0,0,e.getWidth(),e.getHeight());r.setPointerChecker(function(o,l,s){return a.contain(l,s)})},i.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},i.prototype._onPan=function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>Ma||Math.abs(e.dy)>Ma)){var r=this.seriesModel.getData().tree.root;if(!r)return;var n=r.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},i.prototype._onZoom=function(e){var r=e.originX,n=e.originY,a=e.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var l=o.getLayout();if(!l)return;var s=new ot(l.x,l.y,l.width,l.height),u=null,f=this._controllerHost;u=f.zoomLimit;var c=f.zoom=f.zoom||1;if(c*=a,u){var v=u.min||0,h=u.max||1/0;c=Math.max(Math.min(h,c),v)}var d=c/f.zoom;f.zoom=c;var p=this.seriesModel.layoutInfo;r-=p.x,n-=p.y;var y=_n();Xt(y,y,[-r,-n]),ju(y,y,[d,d]),Xt(y,y,[r,n]),s.applyTransform(y),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x,y:s.y,width:s.width,height:s.height}})}},i.prototype._initEvents=function(e){var r=this;e.on("click",function(n){if(r._state==="ready"){var a=r.seriesModel.get("nodeClick",!0);if(a){var o=r.findTarget(n.offsetX,n.offsetY);if(o){var l=o.node;if(l.getLayout().isLeafRoot)r._rootToNode(o);else if(a==="zoomToNode")r._zoomToNode(o);else if(a==="link"){var s=l.hostTree.data.getItemModel(l.dataIndex),u=s.get("link",!0),f=s.get("target",!0)||"blank";u&&jl(u,f)}}}}},this)},i.prototype._renderBreadcrumb=function(e,r,n){var a=this;n||(n=e.get("leafDepth",!0)!=null?{node:e.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),n||(n={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Ov(this.group))).render(e,r,n.node,function(o){a._state!=="animating"&&(zn(e.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},i.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Nt(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},i.prototype.dispose=function(){this._clearController()},i.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},i.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},i.prototype.findTarget=function(e,r){var n,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var l=this._storage.background[o.getRawIndex()];if(l){var s=l.transformCoordToLocal(e,r),u=l.shape;if(u.x<=s[0]&&s[0]<=u.x+u.width&&u.y<=s[1]&&s[1]<=u.y+u.height)n={node:o,offsetX:s[0],offsetY:s[1]};else return!1}},this),n},i.type="treemap",i}(me);function Nt(){return{nodeGroup:[],background:[],content:[]}}function Zv(t,i,e,r,n,a,o,l,s,u){if(!o)return;var f=o.getLayout(),c=t.getData(),v=o.getModel();if(c.setItemGraphicEl(o.dataIndex,null),!f||!f.isInView)return;var h=f.width,d=f.height,p=f.borderWidth,y=f.invisible,S=o.getRawIndex(),x=l&&l.getRawIndex(),m=o.viewChildren,_=f.upperHeight,b=m&&m.length,w=v.getModel("itemStyle"),D=v.getModel(["emphasis","itemStyle"]),T=v.getModel(["blur","itemStyle"]),A=v.getModel(["select","itemStyle"]),I=w.get("borderRadius")||0,L=Q("nodeGroup",Qr);if(!L)return;if(s.add(L),L.x=f.x||0,L.y=f.y||0,L.markRedraw(),Pi(L).nodeWidth=h,Pi(L).nodeHeight=d,f.isAboveViewRoot)return L;var M=Q("background",Pa,u,Uv);M&&W(L,M,b&&f.upperLabelHeight);var V=v.getModel("emphasis"),P=V.get("focus"),j=V.get("blurScope"),R=V.get("disabled"),k=P==="ancestor"?o.getAncestorsIndices():P==="descendant"?o.getDescendantIndices():P;if(b)sa(L)&&kt(L,!1),M&&(kt(M,!R),c.setItemGraphicEl(o.dataIndex,M),ua(M,k,j));else{var z=Q("content",Pa,u,Yv);z&&Z(L,z),M.disableMorphing=!0,M&&sa(M)&&kt(M,!1),kt(L,!R),c.setItemGraphicEl(o.dataIndex,L),ua(L,k,j)}return L;function W(X,G,q){var K=ce(G);if(K.dataIndex=o.dataIndex,K.seriesIndex=t.seriesIndex,G.setShape({x:0,y:0,width:h,height:d,r:I}),y)Y(G);else{G.invisible=!1;var ee=o.getVisual("style"),ve=ee.stroke,pe=Na(w);pe.fill=ve;var re=ht(D);re.fill=D.get("borderColor");var Se=ht(T);Se.fill=T.get("borderColor");var xe=ht(A);if(xe.fill=A.get("borderColor"),q){var ke=h-2*p;J(G,ve,ee.opacity,{x:p,y:0,width:ke,height:_})}else G.removeTextContent();G.setStyle(pe),G.ensureState("emphasis").style=re,G.ensureState("blur").style=Se,G.ensureState("select").style=xe,Ci(G)}X.add(G)}function Z(X,G){var q=ce(G);q.dataIndex=o.dataIndex,q.seriesIndex=t.seriesIndex;var K=Math.max(h-2*p,0),ee=Math.max(d-2*p,0);if(G.culling=!0,G.setShape({x:p,y:p,width:K,height:ee,r:I}),y)Y(G);else{G.invisible=!1;var ve=o.getVisual("style"),pe=ve.fill,re=Na(w);re.fill=pe,re.decal=ve.decal;var Se=ht(D),xe=ht(T),ke=ht(A);J(G,pe,ve.opacity,null),G.setStyle(re),G.ensureState("emphasis").style=Se,G.ensureState("blur").style=xe,G.ensureState("select").style=ke,Ci(G)}X.add(G)}function Y(X){!X.invisible&&a.push(X)}function J(X,G,q,K){var ee=v.getModel(K?ja:Va),ve=$e(v.get("name"),null),pe=ee.getShallow("show");Xe(X,He(v,K?ja:Va),{defaultText:pe?ve:null,inheritColor:G,defaultOpacity:q,labelFetcher:t,labelDataIndex:o.dataIndex});var re=X.getTextContent();if(re){var Se=re.style,xe=Nu(Se.padding||0);K&&(X.setTextConfig({layoutRect:K}),re.disableLabelLayout=!0),re.beforeUpdate=function(){var ft=Math.max((K?K.width:X.shape.width)-xe[1]-xe[3],0),ct=Math.max((K?K.height:X.shape.height)-xe[0]-xe[2],0);(Se.width!==ft||Se.height!==ct)&&re.setStyle({width:ft,height:ct})},Se.truncateMinChar=2,Se.lineOverflow="truncate",te(Se,K,f);var ke=re.getState("emphasis");te(ke?ke.style:null,K,f)}}function te(X,G,q){var K=X?X.text:null;if(!G&&q.isLeafRoot&&K!=null){var ee=t.get("drillDownIcon",!0);X.text=ee?ee+" "+K:K}}function Q(X,G,q,K){var ee=x!=null&&e[X][x],ve=n[X];return ee?(e[X][x]=null,ae(ve,ee)):y||(ee=new G,ee instanceof Wi&&(ee.z2=Kv(q,K)),Ce(ve,ee)),i[X][S]=ee}function ae(X,G){var q=X[S]={};G instanceof Qr?(q.oldX=G.x,q.oldY=G.y):q.oldShape=O({},G.shape)}function Ce(X,G){var q=X[S]={},K=o.parentNode,ee=G instanceof ne;if(K&&(!r||r.direction==="drillDown")){var ve=0,pe=0,re=n.background[K.getRawIndex()];!r&&re&&re.oldShape&&(ve=re.oldShape.width,pe=re.oldShape.height),ee?(q.oldX=0,q.oldY=pe):q.oldShape={x:ve,y:pe,width:0,height:0}}q.fadein=!ee}}function Kv(t,i){return t*$v+i}var Qt=C,qv=Me,Mi=-1,fe=function(){function t(i){var e=i.mappingMethod,r=i.type,n=this.option=oe(i);this.type=r,this.mappingMethod=e,this._normalizeData=eh[e];var a=t.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[e],e==="piecewise"?(sr(n),Qv(n)):e==="category"?n.categories?Jv(n):sr(n,!0):(Wr(e!=="linear"||n.dataExtent),sr(n))}return t.prototype.mapValueToVisual=function(i){var e=this._normalizeData(i);return this._normalizedToVisual(e,i)},t.prototype.getNormalizer=function(){return F(this._normalizeData,this)},t.listVisualTypes=function(){return he(t.visualHandlers)},t.isValidType=function(i){return t.visualHandlers.hasOwnProperty(i)},t.eachVisual=function(i,e,r){Me(i)?C(i,e,r):e.call(r,i)},t.mapVisual=function(i,e,r){var n,a=B(i)?[]:Me(i)?{}:(n=!0,null);return t.eachVisual(i,function(o,l){var s=e.call(r,o,l);n?a=s:a[l]=s}),a},t.retrieveVisuals=function(i){var e={},r;return i&&Qt(t.visualHandlers,function(n,a){i.hasOwnProperty(a)&&(e[a]=i[a],r=!0)}),r?e:null},t.prepareVisualTypes=function(i){if(B(i))i=i.slice();else if(qv(i)){var e=[];Qt(i,function(r,n){e.push(n)}),i=e}else return[];return i.sort(function(r,n){return n==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),i},t.dependsOn=function(i,e){return e==="color"?!!(i&&i.indexOf(e)===0):i===e},t.findPieceIndex=function(i,e,r){for(var n,a=1/0,o=0,l=e.length;o<l;o++){var s=e[o].value;if(s!=null){if(s===i||ie(s)&&s===i+"")return o;r&&v(s,o)}}for(var o=0,l=e.length;o<l;o++){var u=e[o],f=u.interval,c=u.close;if(f){if(f[0]===-1/0){if(hi(c[1],i,f[1]))return o}else if(f[1]===1/0){if(hi(c[0],f[0],i))return o}else if(hi(c[0],f[0],i)&&hi(c[1],i,f[1]))return o;r&&v(f[0],o),r&&v(f[1],o)}}if(r)return i===1/0?e.length-1:i===-1/0?0:n;function v(h,d){var p=Math.abs(h-i);p<a&&(a=p,n=d)}},t.visualHandlers={color:{applyVisual:Et("color"),getColorMapper:function(){var i=this.option;return F(i.mappingMethod==="category"?function(e,r){return!r&&(e=this._normalizeData(e)),Ot.call(this,e)}:function(e,r,n){var a=!!n;return!r&&(e=this._normalizeData(e)),n=Qi(e,i.parsedVisual,n),a?n:Ji(n,"rgba")},this)},_normalizedToVisual:{linear:function(i){return Ji(Qi(i,this.option.parsedVisual),"rgba")},category:Ot,piecewise:function(i,e){var r=en.call(this,e);return r==null&&(r=Ji(Qi(i,this.option.parsedVisual),"rgba")),r},fixed:dt}},colorHue:vi(function(i,e){return Ft(i,e)}),colorSaturation:vi(function(i,e){return Ft(i,null,e)}),colorLightness:vi(function(i,e){return Ft(i,null,null,e)}),colorAlpha:vi(function(i,e){return Ii(i,e)}),decal:{applyVisual:Et("decal"),_normalizedToVisual:{linear:null,category:Ot,piecewise:null,fixed:null}},opacity:{applyVisual:Et("opacity"),_normalizedToVisual:Jr([0,1])},liftZ:{applyVisual:Et("liftZ"),_normalizedToVisual:{linear:dt,category:dt,piecewise:dt,fixed:dt}},symbol:{applyVisual:function(i,e,r){var n=this.mapValueToVisual(i);r("symbol",n)},_normalizedToVisual:{linear:Ea,category:Ot,piecewise:function(i,e){var r=en.call(this,e);return r==null&&(r=Ea.call(this,i)),r},fixed:dt}},symbolSize:{applyVisual:Et("symbolSize"),_normalizedToVisual:Jr([0,1])}},t}();function Qv(t){var i=t.pieceList;t.hasSpecialVisual=!1,C(i,function(e,r){e.originIndex=r,e.visual!=null&&(t.hasSpecialVisual=!0)})}function Jv(t){var i=t.categories,e=t.categoryMap={},r=t.visual;if(Qt(i,function(o,l){e[o]=l}),!B(r)){var n=[];Me(r)?Qt(r,function(o,l){var s=e[l];n[s??Mi]=o}):n[Mi]=r,r=ds(t,n)}for(var a=i.length-1;a>=0;a--)r[a]==null&&(delete e[i[a]],i.pop())}function sr(t,i){var e=t.visual,r=[];Me(e)?Qt(e,function(a){r.push(a)}):e!=null&&r.push(e);var n={color:1,symbol:1};!i&&r.length===1&&!n.hasOwnProperty(t.type)&&(r[1]=r[0]),ds(t,r)}function vi(t){return{applyVisual:function(i,e,r){var n=this.mapValueToVisual(i);r("color",t(e("color"),n))},_normalizedToVisual:Jr([0,1])}}function Ea(t){var i=this.option.visual;return i[Math.round(Ee(t,[0,1],[0,i.length-1],!0))]||{}}function Et(t){return function(i,e,r){r(t,this.mapValueToVisual(i))}}function Ot(t){var i=this.option.visual;return i[this.option.loop&&t!==Mi?t%i.length:t]}function dt(){return this.option.visual[0]}function Jr(t){return{linear:function(i){return Ee(i,t,this.option.visual,!0)},category:Ot,piecewise:function(i,e){var r=en.call(this,e);return r==null&&(r=Ee(i,t,this.option.visual,!0)),r},fixed:dt}}function en(t){var i=this.option,e=i.pieceList;if(i.hasSpecialVisual){var r=fe.findPieceIndex(t,e),n=e[r];if(n&&n.visual)return n.visual[this.type]}}function ds(t,i){return t.visual=i,t.type==="color"&&(t.parsedVisual=H(i,function(e){var r=Eu(e);return r||[0,0,0,1]})),i}var eh={linear:function(t){return Ee(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var i=this.option.pieceList,e=fe.findPieceIndex(t,i,!0);if(e!=null)return Ee(e,[0,i.length-1],[0,1],!0)},category:function(t){var i=this.option.categories?this.option.categoryMap[t]:t;return i??Mi},fixed:xt};function hi(t,i,e){return t?i<=e:i<e}var th="itemStyle",ps=Ve();const ih={seriesType:"treemap",reset:function(t){var i=t.getData().tree,e=i.root;e.isRemoved()||gs(e,{},t.getViewRoot().getAncestors(),t)}};function gs(t,i,e,r){var n=t.getModel(),a=t.getLayout(),o=t.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var l=n.getModel(th),s=rh(l,i,r),u=o.ensureUniqueItemVisual(t.dataIndex,"style"),f=l.get("borderColor"),c=l.get("borderColorSaturation"),v;c!=null&&(v=Ra(s),f=nh(c,v)),u.stroke=f;var h=t.viewChildren;if(!h||!h.length)v=Ra(s),u.fill=v;else{var d=ah(t,n,a,l,s,h);C(h,function(p,y){if(p.depth>=e.length||p===e[p.depth]){var S=oh(n,s,p,y,d,r);gs(p,S,e,r)}})}}}function rh(t,i,e){var r=O({},i),n=e.designatedVisualItemStyle;return C(["color","colorAlpha","colorSaturation"],function(a){n[a]=i[a];var o=t.get(a);n[a]=null,o!=null&&(r[a]=o)}),r}function Ra(t){var i=ur(t,"color");if(i){var e=ur(t,"colorAlpha"),r=ur(t,"colorSaturation");return r&&(i=Ft(i,null,null,r)),e&&(i=Ii(i,e)),i}}function nh(t,i){return i!=null?Ft(i,null,null,t):null}function ur(t,i){var e=t[i];if(e!=null&&e!=="none")return e}function ah(t,i,e,r,n,a){if(!(!a||!a.length)){var o=fr(i,"color")||n.color!=null&&n.color!=="none"&&(fr(i,"colorAlpha")||fr(i,"colorSaturation"));if(o){var l=i.get("visualMin"),s=i.get("visualMax"),u=e.dataExtent.slice();l!=null&&l<u[0]&&(u[0]=l),s!=null&&s>u[1]&&(u[1]=s);var f=i.get("colorMappingBy"),c={type:o.name,dataExtent:u,visual:o.range};c.type==="color"&&(f==="index"||f==="id")?(c.mappingMethod="category",c.loop=!0):c.mappingMethod="linear";var v=new fe(c);return ps(v).drColorMappingBy=f,v}}}function fr(t,i){var e=t.get(i);return B(e)&&e.length?{name:i,range:e}:null}function oh(t,i,e,r,n,a){var o=O({},i);if(n){var l=n.type,s=l==="color"&&ps(n).drColorMappingBy,u=s==="index"?r:s==="id"?a.mapIdToIndex(e.getId()):e.getValue(t.get("visualDimension"));o[l]=n.mapValueToVisual(u)}return o}var Jt=Math.max,Vi=Math.min,ka=je,Bn=C,ys=["itemStyle","borderWidth"],lh=["itemStyle","gapWidth"],sh=["upperLabel","show"],uh=["upperLabel","height"];const fh={seriesType:"treemap",reset:function(t,i,e,r){var n=e.getWidth(),a=e.getHeight(),o=t.option,l=We(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),s=o.size||[],u=$(ka(l.width,s[0]),n),f=$(ka(l.height,s[1]),a),c=r&&r.type,v=["treemapZoomToNode","treemapRootToNode"],h=qt(r,v,t),d=c==="treemapRender"||c==="treemapMove"?r.rootRect:null,p=t.getViewRoot(),y=cs(p);if(c!=="treemapMove"){var S=c==="treemapZoomToNode"?gh(t,h,p,u,f):d?[d.width,d.height]:[u,f],x=o.sort;x&&x!=="asc"&&x!=="desc"&&(x="desc");var m={squareRatio:o.squareRatio,sort:x,leafDepth:o.leafDepth};p.hostTree.clearLayouts();var _={x:0,y:0,width:S[0],height:S[1],area:S[0]*S[1]};p.setLayout(_),ms(p,m,!1,0),_=p.getLayout(),Bn(y,function(w,D){var T=(y[D+1]||p).getValue();w.setLayout(O({dataExtent:[T,T],borderWidth:0,upperHeight:0},_))})}var b=t.getData().tree.root;b.setLayout(yh(l,d,h),!0),t.setLayoutInfo(l),Ss(b,new ot(-l.x,-l.y,n,a),y,p,0)}};function ms(t,i,e,r){var n,a;if(!t.isRemoved()){var o=t.getLayout();n=o.width,a=o.height;var l=t.getModel(),s=l.get(ys),u=l.get(lh)/2,f=xs(l),c=Math.max(s,f),v=s-u,h=c-u;t.setLayout({borderWidth:s,upperHeight:c,upperLabelHeight:f},!0),n=Jt(n-2*v,0),a=Jt(a-v-h,0);var d=n*a,p=ch(t,l,d,i,e,r);if(p.length){var y={x:v,y:h,width:n,height:a},S=Vi(n,a),x=1/0,m=[];m.area=0;for(var _=0,b=p.length;_<b;){var w=p[_];m.push(w),m.area+=w.getLayout().area;var D=ph(m,S,i.squareRatio);D<=x?(_++,x=D):(m.area-=m.pop().getLayout().area,za(m,S,y,u,!1),S=Vi(y.width,y.height),m.length=m.area=0,x=1/0)}if(m.length&&za(m,S,y,u,!0),!e){var T=l.get("childrenVisibleMin");T!=null&&d<T&&(e=!0)}for(var _=0,b=p.length;_<b;_++)ms(p[_],i,e,r+1)}}}function ch(t,i,e,r,n,a){var o=t.children||[],l=r.sort;l!=="asc"&&l!=="desc"&&(l=null);var s=r.leafDepth!=null&&r.leafDepth<=a;if(n&&!s)return t.viewChildren=[];o=Fe(o,function(h){return!h.isRemoved()}),hh(o,l);var u=dh(i,o,l);if(u.sum===0)return t.viewChildren=[];if(u.sum=vh(i,e,u.sum,l,o),u.sum===0)return t.viewChildren=[];for(var f=0,c=o.length;f<c;f++){var v=o[f].getValue()/u.sum*e;o[f].setLayout({area:v})}return s&&(o.length&&t.setLayout({isLeafRoot:!0},!0),o.length=0),t.viewChildren=o,t.setLayout({dataExtent:u.dataExtent},!0),o}function vh(t,i,e,r,n){if(!r)return e;for(var a=t.get("visibleMin"),o=n.length,l=o,s=o-1;s>=0;s--){var u=n[r==="asc"?o-s-1:s].getValue();u/e*i<a&&(l=s,e-=u)}return r==="asc"?n.splice(0,o-l):n.splice(l,o-l),e}function hh(t,i){return i&&t.sort(function(e,r){var n=i==="asc"?e.getValue()-r.getValue():r.getValue()-e.getValue();return n===0?i==="asc"?e.dataIndex-r.dataIndex:r.dataIndex-e.dataIndex:n}),t}function dh(t,i,e){for(var r=0,n=0,a=i.length;n<a;n++)r+=i[n].getValue();var o=t.get("visualDimension"),l;return!i||!i.length?l=[NaN,NaN]:o==="value"&&e?(l=[i[i.length-1].getValue(),i[0].getValue()],e==="asc"&&l.reverse()):(l=[1/0,-1/0],Bn(i,function(s){var u=s.getValue(o);u<l[0]&&(l[0]=u),u>l[1]&&(l[1]=u)})),{sum:r,dataExtent:l}}function ph(t,i,e){for(var r=0,n=1/0,a=0,o=void 0,l=t.length;a<l;a++)o=t[a].getLayout().area,o&&(o<n&&(n=o),o>r&&(r=o));var s=t.area*t.area,u=i*i*e;return s?Jt(u*r/s,s/(u*n)):1/0}function za(t,i,e,r,n){var a=i===e.width?0:1,o=1-a,l=["x","y"],s=["width","height"],u=e[l[a]],f=i?t.area/i:0;(n||f>e[s[o]])&&(f=e[s[o]]);for(var c=0,v=t.length;c<v;c++){var h=t[c],d={},p=f?h.getLayout().area/f:0,y=d[s[o]]=Jt(f-2*r,0),S=e[l[a]]+e[s[a]]-u,x=c===v-1||S<p?S:p,m=d[s[a]]=Jt(x-2*r,0);d[l[o]]=e[l[o]]+Vi(r,y/2),d[l[a]]=u+Vi(r,m/2),u+=x,h.setLayout(d,!0)}e[l[o]]+=f,e[s[o]]-=f}function gh(t,i,e,r,n){var a=(i||{}).node,o=[r,n];if(!a||a===e)return o;for(var l,s=r*n,u=s*t.option.zoomToNodeRatio;l=a.parentNode;){for(var f=0,c=l.children,v=0,h=c.length;v<h;v++)f+=c[v].getValue();var d=a.getValue();if(d===0)return o;u*=f/d;var p=l.getModel(),y=p.get(ys),S=Math.max(y,xs(p));u+=4*y*y+(3*y+S)*Math.pow(u,.5),u>fa&&(u=fa),a=l}u<s&&(u=s);var x=Math.pow(u/s,.5);return[r*x,n*x]}function yh(t,i,e){if(i)return{x:i.x,y:i.y};var r={x:0,y:0};if(!e)return r;var n=e.node,a=n.getLayout();if(!a)return r;for(var o=[a.width/2,a.height/2],l=n;l;){var s=l.getLayout();o[0]+=s.x,o[1]+=s.y,l=l.parentNode}return{x:t.width/2-o[0],y:t.height/2-o[1]}}function Ss(t,i,e,r,n){var a=t.getLayout(),o=e[n],l=o&&o===t;if(!(o&&!l||n===e.length&&t!==r)){t.setLayout({isInView:!0,invisible:!l&&!i.intersect(a),isAboveViewRoot:l},!0);var s=new ot(i.x-a.x,i.y-a.y,i.width,i.height);Bn(t.viewChildren||[],function(u){Ss(u,s,e,r,n+1)})}}function xs(t){return t.get(sh)?t.get(uh):0}function mh(t){t.registerSeriesModel(kv),t.registerChartView(Xv),t.registerVisual(ih),t.registerLayout(fh),Rv(t)}function Sh(t){var i=t.findComponents({mainType:"legend"});!i||!i.length||t.eachSeriesByType("graph",function(e){var r=e.getCategoriesData(),n=e.getGraph(),a=n.data,o=r.mapArray(r.getName);a.filterSelf(function(l){var s=a.getItemModel(l),u=s.getShallow("category");if(u!=null){oi(u)&&(u=o[u]);for(var f=0;f<i.length;f++)if(!i[f].isSelected(u))return!1}return!0})})}function xh(t){var i={};t.eachSeriesByType("graph",function(e){var r=e.getCategoriesData(),n=e.getData(),a={};r.each(function(o){var l=r.getName(o);a["ec-"+l]=o;var s=r.getItemModel(o),u=s.getModel("itemStyle").getItemStyle();u.fill||(u.fill=e.getColorFromPalette(l,i)),r.setItemVisual(o,"style",u);for(var f=["symbol","symbolSize","symbolKeepAspect"],c=0;c<f.length;c++){var v=s.getShallow(f[c],!0);v!=null&&r.setItemVisual(o,f[c],v)}}),r.count()&&n.each(function(o){var l=n.getItemModel(o),s=l.getShallow("category");if(s!=null){ie(s)&&(s=a["ec-"+s]);var u=r.getItemVisual(s,"style"),f=n.ensureUniqueItemVisual(o,"style");O(f,u);for(var c=["symbol","symbolSize","symbolKeepAspect"],v=0;v<c.length;v++)n.setItemVisual(o,c[v],r.getItemVisual(s,c[v]))}})})}function di(t){return t instanceof Array||(t=[t,t]),t}function _h(t){t.eachSeriesByType("graph",function(i){var e=i.getGraph(),r=i.getEdgeData(),n=di(i.get("edgeSymbol")),a=di(i.get("edgeSymbolSize"));r.setVisual("fromSymbol",n&&n[0]),r.setVisual("toSymbol",n&&n[1]),r.setVisual("fromSymbolSize",a&&a[0]),r.setVisual("toSymbolSize",a&&a[1]),r.setVisual("style",i.getModel("lineStyle").getLineStyle()),r.each(function(o){var l=r.getItemModel(o),s=e.getEdgeByIndex(o),u=di(l.getShallow("symbol",!0)),f=di(l.getShallow("symbolSize",!0)),c=l.getModel("lineStyle").getLineStyle(),v=r.ensureUniqueItemVisual(o,"style");switch(O(v,c),v.stroke){case"source":{var h=s.node1.getVisual("style");v.stroke=h&&h.fill;break}case"target":{var h=s.node2.getVisual("style");v.stroke=h&&h.fill;break}}u[0]&&s.setVisual("fromSymbol",u[0]),u[1]&&s.setVisual("toSymbol",u[1]),f[0]&&s.setVisual("fromSymbolSize",f[0]),f[1]&&s.setVisual("toSymbolSize",f[1])})})}var tn="-->",Zi=function(t){return t.get("autoCurveness")||null},_s=function(t,i){var e=Zi(t),r=20,n=[];if(oi(e))r=e;else if(B(e)){t.__curvenessList=e;return}i>r&&(r=i);var a=r%2?r+2:r+3;n=[];for(var o=0;o<a;o++)n.push((o%2?o+1:o)/10*(o%2?-1:1));t.__curvenessList=n},ei=function(t,i,e){var r=[t.id,t.dataIndex].join("."),n=[i.id,i.dataIndex].join(".");return[e.uid,r,n].join(tn)},bs=function(t){var i=t.split(tn);return[i[0],i[2],i[1]].join(tn)},bh=function(t,i){var e=ei(t.node1,t.node2,i);return i.__edgeMap[e]},wh=function(t,i){var e=rn(ei(t.node1,t.node2,i),i),r=rn(ei(t.node2,t.node1,i),i);return e+r},rn=function(t,i){var e=i.__edgeMap;return e[t]?e[t].length:0};function Dh(t){Zi(t)&&(t.__curvenessList=[],t.__edgeMap={},_s(t))}function Th(t,i,e,r){if(Zi(e)){var n=ei(t,i,e),a=e.__edgeMap,o=a[bs(n)];a[n]&&!o?a[n].isForward=!0:o&&a[n]&&(o.isForward=!0,a[n].isForward=!1),a[n]=a[n]||[],a[n].push(r)}}function On(t,i,e,r){var n=Zi(i),a=B(n);if(!n)return null;var o=bh(t,i);if(!o)return null;for(var l=-1,s=0;s<o.length;s++)if(o[s]===e){l=s;break}var u=wh(t,i);_s(i,u),t.lineStyle=t.lineStyle||{};var f=ei(t.node1,t.node2,i),c=i.__curvenessList,v=a||u%2?0:1;if(o.isForward)return c[v+l];var h=bs(f),d=rn(h,i),p=c[l+d+v];return r?a?n&&n[0]===0?(d+v)%2?p:-p:((d%2?0:1)+v)%2?p:-p:(d+v)%2?p:-p:c[l+d+v]}function ws(t){var i=t.coordinateSystem;if(!(i&&i.type!=="view")){var e=t.getGraph();e.eachNode(function(r){var n=r.getModel();r.setLayout([+n.get("x"),+n.get("y")])}),Gn(e,t)}}function Gn(t,i){t.eachEdge(function(e,r){var n=li(e.getModel().get(["lineStyle","curveness"]),-On(e,i,r,!0),0),a=it(e.node1.getLayout()),o=it(e.node2.getLayout()),l=[a,o];+n&&l.push([(a[0]+o[0])/2-(a[1]-o[1])*n,(a[1]+o[1])/2-(o[0]-a[0])*n]),e.setLayout(l)})}function Ch(t,i){t.eachSeriesByType("graph",function(e){var r=e.get("layout"),n=e.coordinateSystem;if(n&&n.type!=="view"){var a=e.getData(),o=[];C(n.dimensions,function(v){o=o.concat(a.mapDimensionsAll(v))});for(var l=0;l<a.count();l++){for(var s=[],u=!1,f=0;f<o.length;f++){var c=a.get(o[f],l);isNaN(c)||(u=!0),s.push(c)}u?a.setItemLayout(l,n.dataToPoint(s)):a.setItemLayout(l,[NaN,NaN])}Gn(a.graph,e)}else(!r||r==="none")&&ws(e)})}function Gt(t){var i=t.coordinateSystem;if(i.type!=="view")return 1;var e=t.option.nodeScaleRatio,r=i.scaleX,n=i.getZoom(),a=(n-1)*e+1;return a/r}function Ht(t){var i=t.getVisual("symbolSize");return i instanceof Array&&(i=(i[0]+i[1])/2),+i}var Ba=Math.PI,cr=[];function Hn(t,i,e,r){var n=t.coordinateSystem;if(!(n&&n.type!=="view")){var a=n.getBoundingRect(),o=t.getData(),l=o.graph,s=a.width/2+a.x,u=a.height/2+a.y,f=Math.min(a.width,a.height)/2,c=o.count();if(o.setLayout({cx:s,cy:u}),!!c){if(e){var v=n.pointToData(r),h=v[0],d=v[1],p=[h-s,d-u];bn(p,p),Ru(p,p,f),e.setLayout([s+p[0],u+p[1]],!0);var y=t.get(["circular","rotateLabel"]);Ds(e,y,s,u)}Ah[i](t,l,o,f,s,u,c),l.eachEdge(function(S,x){var m=li(S.getModel().get(["lineStyle","curveness"]),On(S,t,x),0),_=it(S.node1.getLayout()),b=it(S.node2.getLayout()),w,D=(_[0]+b[0])/2,T=(_[1]+b[1])/2;+m&&(m*=3,w=[s*m+D*(1-m),u*m+T*(1-m)]),S.setLayout([_,b,w])})}}}var Ah={value:function(t,i,e,r,n,a,o){var l=0,s=e.getSum("value"),u=Math.PI*2/(s||o);i.eachNode(function(f){var c=f.getValue("value"),v=u*(s?c:1)/2;l+=v,f.setLayout([r*Math.cos(l)+n,r*Math.sin(l)+a]),l+=v})},symbolSize:function(t,i,e,r,n,a,o){var l=0;cr.length=o;var s=Gt(t);i.eachNode(function(c){var v=Ht(c);isNaN(v)&&(v=2),v<0&&(v=0),v*=s;var h=Math.asin(v/2/r);isNaN(h)&&(h=Ba/2),cr[c.dataIndex]=h,l+=h*2});var u=(2*Ba-l)/o/2,f=0;i.eachNode(function(c){var v=u+cr[c.dataIndex];f+=v,(!c.getLayout()||!c.getLayout().fixed)&&c.setLayout([r*Math.cos(f)+n,r*Math.sin(f)+a]),f+=v})}};function Ds(t,i,e,r){var n=t.getGraphicEl();if(n){var a=t.getModel(),o=a.get(["label","rotate"])||0,l=n.getSymbolPath();if(i){var s=t.getLayout(),u=Math.atan2(s[1]-r,s[0]-e);u<0&&(u=Math.PI*2+u);var f=s[0]<e;f&&(u=u-Math.PI);var c=f?"left":"right";l.setTextConfig({rotation:-u,position:c,origin:"center"});var v=l.ensureState("emphasis");O(v.textConfig||(v.textConfig={}),{position:c})}else l.setTextConfig({rotation:o*=Math.PI/180})}}function Ih(t){t.eachSeriesByType("graph",function(i){i.get("layout")==="circular"&&Hn(i,"symbolSize")})}var wt=Fr;function Lh(t,i,e){for(var r=t,n=i,a=e.rect,o=a.width,l=a.height,s=[a.x+o/2,a.y+l/2],u=e.gravity==null?.1:e.gravity,f=0;f<r.length;f++){var c=r[f];c.p||(c.p=ku(o*(Math.random()-.5)+s[0],l*(Math.random()-.5)+s[1])),c.pp=it(c.p),c.edges=null}var v=e.friction==null?.6:e.friction,h=v,d,p;return{warmUp:function(){h=v*.8},setFixed:function(y){r[y].fixed=!0},setUnfixed:function(y){r[y].fixed=!1},beforeStep:function(y){d=y},afterStep:function(y){p=y},step:function(y){d&&d(r,n);for(var S=[],x=r.length,m=0;m<n.length;m++){var _=n[m];if(!_.ignoreForceLayout){var b=_.n1,w=_.n2;zt(S,w.p,b.p);var D=ca(S)-_.d,T=w.w/(b.w+w.w);isNaN(T)&&(T=0),bn(S,S),!b.fixed&&wt(b.p,b.p,S,T*D*h),!w.fixed&&wt(w.p,w.p,S,-(1-T)*D*h)}}for(var m=0;m<x;m++){var A=r[m];A.fixed||(zt(S,s,A.p),wt(A.p,A.p,S,u*h))}for(var m=0;m<x;m++)for(var b=r[m],I=m+1;I<x;I++){var w=r[I];zt(S,w.p,b.p);var D=ca(S);D===0&&(zu(S,Math.random()-.5,Math.random()-.5),D=1);var L=(b.rep+w.rep)/D/D;!b.fixed&&wt(b.pp,b.pp,S,L),!w.fixed&&wt(w.pp,w.pp,S,-L)}for(var M=[],m=0;m<x;m++){var A=r[m];A.fixed||(zt(M,A.p,A.pp),wt(A.p,A.p,M,h),_e(A.pp,A.p))}h=h*.992;var V=h<.01;p&&p(r,n,V),y&&y(V)}}}function Ph(t){t.eachSeriesByType("graph",function(i){var e=i.coordinateSystem;if(!(e&&e.type!=="view"))if(i.get("layout")==="force"){var r=i.preservedPoints||{},n=i.getGraph(),a=n.data,o=n.edgeData,l=i.getModel("force"),s=l.get("initLayout");i.preservedPoints?a.each(function(m){var _=a.getId(m);a.setItemLayout(m,r[_]||[NaN,NaN])}):!s||s==="none"?ws(i):s==="circular"&&Hn(i,"value");var u=a.getDataExtent("value"),f=o.getDataExtent("value"),c=l.get("repulsion"),v=l.get("edgeLength"),h=B(c)?c:[c,c],d=B(v)?v:[v,v];d=[d[1],d[0]];var p=a.mapArray("value",function(m,_){var b=a.getItemLayout(_),w=Ee(m,u,h);return isNaN(w)&&(w=(h[0]+h[1])/2),{w,rep:w,fixed:a.getItemModel(_).get("fixed"),p:!b||isNaN(b[0])||isNaN(b[1])?null:b}}),y=o.mapArray("value",function(m,_){var b=n.getEdgeByIndex(_),w=Ee(m,f,d);isNaN(w)&&(w=(d[0]+d[1])/2);var D=b.getModel(),T=li(b.getModel().get(["lineStyle","curveness"]),-On(b,i,_,!0),0);return{n1:p[b.node1.dataIndex],n2:p[b.node2.dataIndex],d:w,curveness:T,ignoreForceLayout:D.get("ignoreForceLayout")}}),S=e.getBoundingRect(),x=Lh(p,y,{rect:S,gravity:l.get("gravity"),friction:l.get("friction")});x.beforeStep(function(m,_){for(var b=0,w=m.length;b<w;b++)m[b].fixed&&_e(m[b].p,n.getNodeByIndex(b).getLayout())}),x.afterStep(function(m,_,b){for(var w=0,D=m.length;w<D;w++)m[w].fixed||n.getNodeByIndex(w).setLayout(m[w].p),r[a.getId(w)]=m[w].p;for(var w=0,D=_.length;w<D;w++){var T=_[w],A=n.getEdgeByIndex(w),I=T.n1.p,L=T.n2.p,M=A.getLayout();M=M?M.slice():[],M[0]=M[0]||[],M[1]=M[1]||[],_e(M[0],I),_e(M[1],L),+T.curveness&&(M[2]=[(I[0]+L[0])/2-(I[1]-L[1])*T.curveness,(I[1]+L[1])/2-(L[0]-I[0])*T.curveness]),A.setLayout(M)}}),i.forceLayout=x,i.preservedPoints=r,x.step()}else i.forceLayout=null})}function Mh(t,i,e){var r=O(t.getBoxLayoutParams(),{aspect:e});return We(r,{width:i.getWidth(),height:i.getHeight()})}function Vh(t,i){var e=[];return t.eachSeriesByType("graph",function(r){var n=r.get("coordinateSystem");if(!n||n==="view"){var a=r.getData(),o=a.mapArray(function(y){var S=a.getItemModel(y);return[+S.get("x"),+S.get("y")]}),l=[],s=[];Cl(o,l,s),s[0]-l[0]===0&&(s[0]+=1,l[0]-=1),s[1]-l[1]===0&&(s[1]+=1,l[1]-=1);var u=(s[0]-l[0])/(s[1]-l[1]),f=Mh(r,i,u);isNaN(u)&&(l=[f.x,f.y],s=[f.x+f.width,f.y+f.height]);var c=s[0]-l[0],v=s[1]-l[1],h=f.width,d=f.height,p=r.coordinateSystem=new mn;p.zoomLimit=r.get("scaleLimit"),p.setBoundingRect(l[0],l[1],c,v),p.setViewRect(f.x,f.y,h,d),p.setCenter(r.get("center"),i),p.setZoom(r.get("zoom")),e.push(p)}}),e}var vr=[],hr=[],dr=[],Dt=Ou,pr=Gu,Oa=Math.abs;function Ga(t,i,e){for(var r=t[0],n=t[1],a=t[2],o=1/0,l,s=e*e,u=.1,f=.1;f<=.9;f+=.1){vr[0]=Dt(r[0],n[0],a[0],f),vr[1]=Dt(r[1],n[1],a[1],f);var c=Oa(pr(vr,i)-s);c<o&&(o=c,l=f)}for(var v=0;v<32;v++){var h=l+u;hr[0]=Dt(r[0],n[0],a[0],l),hr[1]=Dt(r[1],n[1],a[1],l),dr[0]=Dt(r[0],n[0],a[0],h),dr[1]=Dt(r[1],n[1],a[1],h);var c=pr(hr,i)-s;if(Oa(c)<.01)break;var d=pr(dr,i)-s;u/=2,c<0?d>=0?l=l+u:l=l-u:d>=0?l=l-u:l=l+u}return l}function gr(t,i){var e=[],r=Bu,n=[[],[],[]],a=[[],[]],o=[];i/=2,t.eachEdge(function(l,s){var u=l.getLayout(),f=l.getVisual("fromSymbol"),c=l.getVisual("toSymbol");u.__original||(u.__original=[it(u[0]),it(u[1])],u[2]&&u.__original.push(it(u[2])));var v=u.__original;if(u[2]!=null){if(_e(n[0],v[0]),_e(n[1],v[2]),_e(n[2],v[1]),f&&f!=="none"){var h=Ht(l.node1),d=Ga(n,v[0],h*i);r(n[0][0],n[1][0],n[2][0],d,e),n[0][0]=e[3],n[1][0]=e[4],r(n[0][1],n[1][1],n[2][1],d,e),n[0][1]=e[3],n[1][1]=e[4]}if(c&&c!=="none"){var h=Ht(l.node2),d=Ga(n,v[1],h*i);r(n[0][0],n[1][0],n[2][0],d,e),n[1][0]=e[1],n[2][0]=e[2],r(n[0][1],n[1][1],n[2][1],d,e),n[1][1]=e[1],n[2][1]=e[2]}_e(u[0],n[0]),_e(u[1],n[2]),_e(u[2],n[1])}else{if(_e(a[0],v[0]),_e(a[1],v[1]),zt(o,a[1],a[0]),bn(o,o),f&&f!=="none"){var h=Ht(l.node1);Fr(a[0],a[0],o,h*i)}if(c&&c!=="none"){var h=Ht(l.node2);Fr(a[1],a[1],o,-h*i)}_e(u[0],a[0]),_e(u[1],a[1])}})}function Ha(t){return t.type==="view"}var jh=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.init=function(e,r){var n=new wn,a=new Nl,o=this.group;this._controller=new yn(r.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(a.group),this._symbolDraw=n,this._lineDraw=a,this._firstRender=!0},i.prototype.render=function(e,r,n){var a=this,o=e.coordinateSystem;this._model=e;var l=this._symbolDraw,s=this._lineDraw,u=this.group;if(Ha(o)){var f={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(f):be(u,f,e)}gr(e.getGraph(),Gt(e));var c=e.getData();l.updateData(c);var v=e.getEdgeData();s.updateData(v),this._updateNodeAndLinkScale(),this._updateController(e,r,n),clearTimeout(this._layoutTimeout);var h=e.forceLayout,d=e.get(["force","layoutAnimation"]);h&&this._startForceLayoutIteration(h,d);var p=e.get("layout");c.graph.eachNode(function(m){var _=m.dataIndex,b=m.getGraphicEl(),w=m.getModel();if(b){b.off("drag").off("dragend");var D=w.get("draggable");D&&b.on("drag",function(A){switch(p){case"force":h.warmUp(),!a._layouting&&a._startForceLayoutIteration(h,d),h.setFixed(_),c.setItemLayout(_,[b.x,b.y]);break;case"circular":c.setItemLayout(_,[b.x,b.y]),m.setLayout({fixed:!0},!0),Hn(e,"symbolSize",m,[A.offsetX,A.offsetY]),a.updateLayout(e);break;case"none":default:c.setItemLayout(_,[b.x,b.y]),Gn(e.getGraph(),e),a.updateLayout(e);break}}).on("dragend",function(){h&&h.setUnfixed(_)}),b.setDraggable(D,!!w.get("cursor"));var T=w.get(["emphasis","focus"]);T==="adjacency"&&(ce(b).focus=m.getAdjacentDataIndices())}}),c.graph.eachEdge(function(m){var _=m.getGraphicEl(),b=m.getModel().get(["emphasis","focus"]);_&&b==="adjacency"&&(ce(_).focus={edge:[m.dataIndex],node:[m.node1.dataIndex,m.node2.dataIndex]})});var y=e.get("layout")==="circular"&&e.get(["circular","rotateLabel"]),S=c.getLayout("cx"),x=c.getLayout("cy");c.graph.eachNode(function(m){Ds(m,y,S,x)}),this._firstRender=!1},i.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},i.prototype._startForceLayoutIteration=function(e,r){var n=this;(function a(){e.step(function(o){n.updateLayout(n._model),(n._layouting=!o)&&(r?n._layoutTimeout=setTimeout(a,16):a())})})()},i.prototype._updateController=function(e,r,n){var a=this,o=this._controller,l=this._controllerHost,s=this.group;if(o.setPointerChecker(function(u,f,c){var v=s.getBoundingRect();return v.applyTransform(s.transform),v.contain(f,c)&&!Al(u,n,e)}),!Ha(e.coordinateSystem)){o.disable();return}o.enable(e.get("roam")),l.zoomLimit=e.get("scaleLimit"),l.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){Il(l,u.dx,u.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Ll(l,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(),gr(e.getGraph(),Gt(e)),a._lineDraw.updateLayout(),n.updateLabelLayout()})},i.prototype._updateNodeAndLinkScale=function(){var e=this._model,r=e.getData(),n=Gt(e);r.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(n)})},i.prototype.updateLayout=function(e){gr(e.getGraph(),Gt(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},i.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},i.type="graph",i}(me);function Ts(t,i,e,r,n){for(var a=new Qc(r),o=0;o<t.length;o++)a.addNode(je(t[o].id,t[o].name,o),o);for(var l=[],s=[],u=0,o=0;o<i.length;o++){var f=i[o],c=f.source,v=f.target;a.addEdge(c,v,u)&&(s.push(f),l.push(je($e(f.id,null),c+" > "+v)),u++)}var h=e.get("coordinateSystem"),d;if(h==="cartesian2d"||h==="polar")d=si(t,e);else{var p=El.get(h),y=p?p.dimensions||[]:[];De(y,"value")<0&&y.concat(["value"]);var S=Sn(t,{coordDimensions:y,encodeDefine:e.getEncode()}).dimensions;d=new Le(S,e),d.initData(t)}var x=new Le(["value"],e);return x.initData(s,l),n&&n(d,x),us({mainData:d,struct:a,structAttr:"graph",datas:{node:d,edge:x},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var Nh=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.hasSymbolVisual=!0,e}return i.prototype.init=function(e){t.prototype.init.apply(this,arguments);var r=this;function n(){return r._categoriesData}this.legendVisualProvider=new Dn(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},i.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},i.prototype.mergeDefaultAndTheme=function(e){t.prototype.mergeDefaultAndTheme.apply(this,arguments),Tn(e,"edgeLabel",["show"])},i.prototype.getInitialData=function(e,r){var n=e.edges||e.links||[],a=e.data||e.nodes||[],o=this;if(a&&n){Dh(this);var l=Ts(a,n,this,!0,s);return C(l.edges,function(u){Th(u.node1,u.node2,this,u.dataIndex)},this),l.data}function s(u,f){u.wrapMethod("getItemModel",function(d){var p=o._categoriesModels,y=d.getShallow("category"),S=p[y];return S&&(S.parentModel=d.parentModel,d.parentModel=S),d});var c=at.prototype.getModel;function v(d,p){var y=c.call(this,d,p);return y.resolveParentPath=h,y}f.wrapMethod("getItemModel",function(d){return d.resolveParentPath=h,d.getModel=v,d});function h(d){if(d&&(d[0]==="label"||d[1]==="label")){var p=d.slice();return d[0]==="label"?p[0]="edgeLabel":d[1]==="label"&&(p[1]="edgeLabel"),p}return d}}},i.prototype.getGraph=function(){return this.getData().graph},i.prototype.getEdgeData=function(){return this.getGraph().edgeData},i.prototype.getCategoriesData=function(){return this._categoriesData},i.prototype.formatTooltip=function(e,r,n){if(n==="edge"){var a=this.getData(),o=this.getDataParams(e,n),l=a.graph.getEdgeByIndex(e),s=a.getName(l.node1.dataIndex),u=a.getName(l.node2.dataIndex),f=[];return s!=null&&f.push(s),u!=null&&f.push(u),Ne("nameValue",{name:f.join(" > "),value:o.value,noValue:o.value==null})}var c=Hu({series:this,dataIndex:e,multipleSeries:r});return c},i.prototype._updateCategoriesData=function(){var e=H(this.option.categories||[],function(n){return n.value!=null?n:O({value:0},n)}),r=new Le(["value"],this);r.initData(e),this._categoriesData=r,this._categoriesModels=r.mapArray(function(n){return r.getItemModel(n)})},i.prototype.setZoom=function(e){this.option.zoom=e},i.prototype.setCenter=function(e){this.option.center=e},i.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},i.type="series.graph",i.dependencies=["grid","polar","geo","singleAxis","calendar"],i.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},i}(we),Eh={type:"graphRoam",event:"graphRoam",update:"none"};function Rh(t){t.registerChartView(jh),t.registerSeriesModel(Nh),t.registerProcessor(Sh),t.registerVisual(xh),t.registerVisual(_h),t.registerLayout(Ch),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,Ih),t.registerLayout(Ph),t.registerCoordinateSystem("graphView",{dimensions:mn.dimensions,create:Vh}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},xt),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},xt),t.registerAction(Eh,function(i,e,r){e.eachComponent({mainType:"series",query:i},function(n){var a=n.coordinateSystem,o=Ml(a,i,void 0,r);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}var kh=["itemStyle","opacity"],zh=function(t){N(i,t);function i(e,r){var n=t.call(this)||this,a=n,o=new Cn,l=new de;return a.setTextContent(l),n.setTextGuideLine(o),n.updateData(e,r,!0),n}return i.prototype.updateData=function(e,r,n){var a=this,o=e.hostModel,l=e.getItemModel(r),s=e.getItemLayout(r),u=l.getModel("emphasis"),f=l.get(kh);f=f??1,n||Lt(a),a.useStyle(e.getItemVisual(r,"style")),a.style.lineJoin="round",n?(a.setShape({points:s.points}),a.style.opacity=0,Pt(a,{style:{opacity:f}},o,r)):be(a,{style:{opacity:f},shape:{points:s.points}},o,r),Ze(a,l),this._updateLabel(e,r),Te(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},i.prototype._updateLabel=function(e,r){var n=this,a=this.getTextGuideLine(),o=n.getTextContent(),l=e.hostModel,s=e.getItemModel(r),u=e.getItemLayout(r),f=u.label,c=e.getItemVisual(r,"style"),v=c.fill;Xe(o,He(s),{labelFetcher:e.hostModel,labelDataIndex:r,defaultOpacity:c.opacity,defaultText:e.getName(r)},{normal:{align:f.textAlign,verticalAlign:f.verticalAlign}}),n.setTextConfig({local:!0,inside:!!f.inside,insideStroke:v,outsideFill:v});var h=f.linePoints;a.setShape({points:h}),n.textGuideLineConfig={anchor:h?new Wu(h[0][0],h[0][1]):null},be(o,{style:{x:f.x,y:f.y}},l,r),o.attr({rotation:f.rotation,originX:f.x,originY:f.y,z2:10}),Fu(n,$u(s),{stroke:v})},i}(Yt),Bh=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.ignoreLabelLineUpdate=!0,e}return i.prototype.render=function(e,r,n){var a=e.getData(),o=this._data,l=this.group;a.diff(o).add(function(s){var u=new zh(a,s);a.setItemGraphicEl(s,u),l.add(u)}).update(function(s,u){var f=o.getItemGraphicEl(u);f.updateData(a,s),l.add(f),a.setItemGraphicEl(s,f)}).remove(function(s){var u=o.getItemGraphicEl(s);Uu(u,e,s)}).execute(),this._data=a},i.prototype.remove=function(){this.group.removeAll(),this._data=null},i.prototype.dispose=function(){},i.type="funnel",i}(me),Oh=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Dn(F(this.getData,this),F(this.getRawData,this)),this._defaultLabelLine(e)},i.prototype.getInitialData=function(e,r){return gn(this,{coordDimensions:["value"],encodeDefaulter:se(Dl,this)})},i.prototype._defaultLabelLine=function(e){Tn(e,"labelLine",["show"]);var r=e.labelLine,n=e.emphasis.labelLine;r.show=r.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},i.prototype.getDataParams=function(e){var r=this.getData(),n=t.prototype.getDataParams.call(this,e),a=r.mapDimension("value"),o=r.getSum(a);return n.percent=o?+(r.get(a,e)/o*100).toFixed(2):0,n.$vars.push("percent"),n},i.type="series.funnel",i.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},i}(we);function Gh(t,i){return We(t.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})}function Hh(t,i){for(var e=t.mapDimension("value"),r=t.mapArray(e,function(s){return s}),n=[],a=i==="ascending",o=0,l=t.count();o<l;o++)n[o]=o;return le(i)?n.sort(i):i!=="none"&&n.sort(function(s,u){return a?r[s]-r[u]:r[u]-r[s]}),n}function Wh(t){var i=t.hostModel,e=i.get("orient");t.each(function(r){var n=t.getItemModel(r),a=n.getModel("label"),o=a.get("position"),l=n.getModel("labelLine"),s=t.getItemLayout(r),u=s.points,f=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",c,v,h,d;if(f)o==="insideLeft"?(v=(u[0][0]+u[3][0])/2+5,h=(u[0][1]+u[3][1])/2,c="left"):o==="insideRight"?(v=(u[1][0]+u[2][0])/2-5,h=(u[1][1]+u[2][1])/2,c="right"):(v=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,h=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,c="center"),d=[[v,h],[v,h]];else{var p=void 0,y=void 0,S=void 0,x=void 0,m=l.get("length");o==="left"?(p=(u[3][0]+u[0][0])/2,y=(u[3][1]+u[0][1])/2,S=p-m,v=S-5,c="right"):o==="right"?(p=(u[1][0]+u[2][0])/2,y=(u[1][1]+u[2][1])/2,S=p+m,v=S+5,c="left"):o==="top"?(p=(u[3][0]+u[0][0])/2,y=(u[3][1]+u[0][1])/2,x=y-m,h=x-5,c="center"):o==="bottom"?(p=(u[1][0]+u[2][0])/2,y=(u[1][1]+u[2][1])/2,x=y+m,h=x+5,c="center"):o==="rightTop"?(p=e==="horizontal"?u[3][0]:u[1][0],y=e==="horizontal"?u[3][1]:u[1][1],e==="horizontal"?(x=y-m,h=x-5,c="center"):(S=p+m,v=S+5,c="top")):o==="rightBottom"?(p=u[2][0],y=u[2][1],e==="horizontal"?(x=y+m,h=x+5,c="center"):(S=p+m,v=S+5,c="bottom")):o==="leftTop"?(p=u[0][0],y=e==="horizontal"?u[0][1]:u[1][1],e==="horizontal"?(x=y-m,h=x-5,c="center"):(S=p-m,v=S-5,c="right")):o==="leftBottom"?(p=e==="horizontal"?u[1][0]:u[3][0],y=e==="horizontal"?u[1][1]:u[2][1],e==="horizontal"?(x=y+m,h=x+5,c="center"):(S=p-m,v=S-5,c="right")):(p=(u[1][0]+u[2][0])/2,y=(u[1][1]+u[2][1])/2,e==="horizontal"?(x=y+m,h=x+5,c="center"):(S=p+m,v=S+5,c="left")),e==="horizontal"?(S=p,v=S):(x=y,h=x),d=[[p,y],[S,x]]}s.label={linePoints:d,x:v,y:h,verticalAlign:"middle",textAlign:c,inside:f}})}function Fh(t,i){t.eachSeriesByType("funnel",function(e){var r=e.getData(),n=r.mapDimension("value"),a=e.get("sort"),o=Gh(e,i),l=e.get("orient"),s=o.width,u=o.height,f=Hh(r,a),c=o.x,v=o.y,h=l==="horizontal"?[$(e.get("minSize"),u),$(e.get("maxSize"),u)]:[$(e.get("minSize"),s),$(e.get("maxSize"),s)],d=r.getDataExtent(n),p=e.get("min"),y=e.get("max");p==null&&(p=Math.min(d[0],0)),y==null&&(y=d[1]);var S=e.get("funnelAlign"),x=e.get("gap"),m=l==="horizontal"?s:u,_=(m-x*(r.count()-1))/r.count(),b=function(P,j){if(l==="horizontal"){var R=r.get(n,P)||0,k=Ee(R,[p,y],h,!0),z=void 0;switch(S){case"top":z=v;break;case"center":z=v+(u-k)/2;break;case"bottom":z=v+(u-k);break}return[[j,z],[j,z+k]]}var W=r.get(n,P)||0,Z=Ee(W,[p,y],h,!0),Y;switch(S){case"left":Y=c;break;case"center":Y=c+(s-Z)/2;break;case"right":Y=c+s-Z;break}return[[Y,j],[Y+Z,j]]};a==="ascending"&&(_=-_,x=-x,l==="horizontal"?c+=s:v+=u,f=f.reverse());for(var w=0;w<f.length;w++){var D=f[w],T=f[w+1],A=r.getItemModel(D);if(l==="horizontal"){var I=A.get(["itemStyle","width"]);I==null?I=_:(I=$(I,s),a==="ascending"&&(I=-I));var L=b(D,c),M=b(T,c+I);c+=I+x,r.setItemLayout(D,{points:L.concat(M.slice().reverse())})}else{var V=A.get(["itemStyle","height"]);V==null?V=_:(V=$(V,u),a==="ascending"&&(V=-V));var L=b(D,v),M=b(T,v+V);v+=V+x,r.setItemLayout(D,{points:L.concat(M.slice().reverse())})}}Wh(r)})}function $h(t){t.registerChartView(Bh),t.registerSeriesModel(Oh),t.registerLayout(Fh),t.registerProcessor(An("funnel"))}var Uh=.3,Yh=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e._dataGroup=new ne,e._initialized=!1,e}return i.prototype.init=function(){this.group.add(this._dataGroup)},i.prototype.render=function(e,r,n,a){this._progressiveEls=null;var o=this._dataGroup,l=e.getData(),s=this._data,u=e.coordinateSystem,f=u.dimensions,c=Fa(e);l.diff(s).add(v).update(h).remove(d).execute();function v(y){var S=Wa(l,o,y,f,u);yr(S,l,y,c)}function h(y,S){var x=s.getItemGraphicEl(S),m=Cs(l,y,f,u);l.setItemGraphicEl(y,x),be(x,{shape:{points:m}},e,y),Lt(x),yr(x,l,y,c)}function d(y){var S=s.getItemGraphicEl(y);o.remove(S)}if(!this._initialized){this._initialized=!0;var p=Xh(u,e,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(p)}this._data=l},i.prototype.incrementalPrepareRender=function(e,r,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},i.prototype.incrementalRender=function(e,r,n){for(var a=r.getData(),o=r.coordinateSystem,l=o.dimensions,s=Fa(r),u=this._progressiveEls=[],f=e.start;f<e.end;f++){var c=Wa(a,this._dataGroup,f,l,o);c.incremental=!0,yr(c,a,f,s),u.push(c)}},i.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},i.type="parallel",i}(me);function Xh(t,i,e){var r=t.model,n=t.getRect(),a=new Pe({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),o=r.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),Pt(a,{shape:{width:n.width,height:n.height}},i,e),a}function Cs(t,i,e,r){for(var n=[],a=0;a<e.length;a++){var o=e[a],l=t.get(t.mapDimension(o),i);Zh(l,r.getAxis(o).type)||n.push(r.dataToPoint(l,o))}return n}function Wa(t,i,e,r,n){var a=Cs(t,e,r,n),o=new Cn({shape:{points:a},z2:10});return i.add(o),t.setItemGraphicEl(e,o),o}function Fa(t){var i=t.get("smooth",!0);return i===!0&&(i=Uh),i=Yu(i),Xu(i)&&(i=0),{smooth:i}}function yr(t,i,e,r){t.useStyle(i.getItemVisual(e,"style")),t.style.fill=null,t.setShape("smooth",r.smooth);var n=i.getItemModel(e),a=n.getModel("emphasis");Ze(t,n,"lineStyle"),Te(t,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function Zh(t,i){return i==="category"?t==null:t==null||isNaN(t)}var Kh=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return i.prototype.getInitialData=function(e,r){return si(null,this,{useEncodeDefaulter:F(qh,null,this)})},i.prototype.getRawIndicesByActiveState=function(e){var r=this.coordinateSystem,n=this.getData(),a=[];return r.eachActiveState(n,function(o,l){e===o&&a.push(n.getRawIndex(l))}),a},i.type="series.parallel",i.dependencies=["parallel"],i.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},i}(we);function qh(t){var i=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(i){var e={};return C(i.dimensions,function(r){var n=Qh(r);e[r]=n}),e}}function Qh(t){return+t.replace("dim","")}var Jh=["lineStyle","opacity"],ed={seriesType:"parallel",reset:function(t,i){var e=t.coordinateSystem,r={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(n,a){e.eachActiveState(a,function(o,l){var s=r[o];if(o==="normal"&&a.hasItemOption){var u=a.getItemModel(l).get(Jh,!0);u!=null&&(s=u)}var f=a.ensureUniqueItemVisual(l,"style");f.opacity=s},n.start,n.end)}}}};function td(t){id(t),rd(t)}function id(t){if(!t.parallel){var i=!1;C(t.series,function(e){e&&e.type==="parallel"&&(i=!0)}),i&&(t.parallel=[{}])}}function rd(t){var i=Ke(t.parallelAxis);C(i,function(e){if(Me(e)){var r=e.parallelIndex||0,n=Ke(t.parallel)[r];n&&n.parallelAxisDefault&&Re(e,n.parallelAxisDefault,!1)}})}var nd=5,ad=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.render=function(e,r,n){this._model=e,this._api=n,this._handlers||(this._handlers={},C(od,function(a,o){n.getZr().on(o,this._handlers[o]=F(a,this))},this)),Rl(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},i.prototype.dispose=function(e,r){Zu(this,"_throttledDispatchExpand"),C(this._handlers,function(n,a){r.getZr().off(a,n)}),this._handlers=null},i.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},i.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(O({type:"parallelAxisExpand"},e))},i.type="parallel",i}(Qe),od={mousedown:function(t){mr(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var i=this._mouseDownPoint;if(mr(this,"click")&&i){var e=[t.offsetX,t.offsetY],r=Math.pow(i[0]-e[0],2)+Math.pow(i[1]-e[1],2);if(r>nd)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!(this._mouseDownPoint||!mr(this,"mousemove"))){var i=this._model,e=i.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),r=e.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(i.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:e.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function mr(t,i){var e=t._model;return e.get("axisExpandable")&&e.get("axisExpandTriggerOn")===i}var ld=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},i.prototype.mergeOption=function(e){var r=this.option;e&&Re(r,e,!0),this._initDimensions()},i.prototype.contains=function(e,r){var n=e.get("parallelIndex");return n!=null&&r.getComponent("parallel",n)===this},i.prototype.setAxisExpand=function(e){C(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){e.hasOwnProperty(r)&&(this.option[r]=e[r])},this)},i.prototype._initDimensions=function(){var e=this.dimensions=[],r=this.parallelAxisIndex=[],n=Fe(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);C(n,function(a){e.push("dim"+a.get("dim")),r.push(a.componentIndex)})},i.type="parallel",i.dependencies=["parallelAxis"],i.layoutMode="box",i.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},i}(Je),sd=function(t){N(i,t);function i(e,r,n,a,o){var l=t.call(this,e,r,n)||this;return l.type=a||"value",l.axisIndex=o,l}return i.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},i}(In),Sr=C,As=Math.min,Is=Math.max,$a=Math.floor,ud=Math.ceil,Ua=Ku,fd=Math.PI,cd=function(){function t(i,e,r){this.type="parallel",this._axesMap=nt(),this._axesLayout={},this.dimensions=i.dimensions,this._model=i,this._init(i,e,r)}return t.prototype._init=function(i,e,r){var n=i.dimensions,a=i.parallelAxisIndex;Sr(n,function(o,l){var s=a[l],u=e.getComponent("parallelAxis",s),f=this._axesMap.set(o,new sd(o,kl(u),[0,0],u.get("type"),s)),c=f.type==="category";f.onBand=c&&u.get("boundaryGap"),f.inverse=u.get("inverse"),u.axis=f,f.model=u,f.coordinateSystem=u.coordinateSystem=this},this)},t.prototype.update=function(i,e){this._updateAxesFromSeries(this._model,i)},t.prototype.containPoint=function(i){var e=this._makeLayoutInfo(),r=e.axisBase,n=e.layoutBase,a=e.pixelDimIndex,o=i[1-a],l=i[a];return o>=r&&o<=r+e.axisLength&&l>=n&&l<=n+e.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(i,e){e.eachSeries(function(r){if(i.contains(r,e)){var n=r.getData();Sr(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(n,n.mapDimension(a)),zl(o.scale,o.model)},this)}},this)},t.prototype.resize=function(i,e){this._rect=We(i.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var i=this._model,e=this._rect,r=["x","y"],n=["width","height"],a=i.get("layout"),o=a==="horizontal"?0:1,l=e[n[o]],s=[0,l],u=this.dimensions.length,f=pi(i.get("axisExpandWidth"),s),c=pi(i.get("axisExpandCount")||0,[0,u]),v=i.get("axisExpandable")&&u>3&&u>c&&c>1&&f>0&&l>0,h=i.get("axisExpandWindow"),d;if(h)d=pi(h[1]-h[0],s),h[1]=h[0]+d;else{d=pi(f*(c-1),s);var p=i.get("axisExpandCenter")||$a(u/2);h=[f*p-d/2],h[1]=h[0]+d}var y=(l-d)/(u-c);y<3&&(y=0);var S=[$a(Ua(h[0]/f,1))+1,ud(Ua(h[1]/f,1))-1],x=y/f*h[0];return{layout:a,pixelDimIndex:o,layoutBase:e[r[o]],layoutLength:l,axisBase:e[r[1-o]],axisLength:e[n[1-o]],axisExpandable:v,axisExpandWidth:f,axisCollapseWidth:y,axisExpandWindow:h,axisCount:u,winInnerIndices:S,axisExpandWindow0Pos:x}},t.prototype._layoutAxes=function(){var i=this._rect,e=this._axesMap,r=this.dimensions,n=this._makeLayoutInfo(),a=n.layout;e.each(function(o){var l=[0,n.axisLength],s=o.inverse?1:0;o.setExtent(l[s],l[1-s])}),Sr(r,function(o,l){var s=(n.axisExpandable?hd:vd)(l,n),u={horizontal:{x:s.position,y:n.axisLength},vertical:{x:0,y:s.position}},f={horizontal:fd/2,vertical:0},c=[u[a].x+i.x,u[a].y+i.y],v=f[a],h=_n();Bl(h,h,v),Xt(h,h,c),this._axesLayout[o]={position:c,rotation:v,transform:h,axisNameAvailableWidth:s.axisNameAvailableWidth,axisLabelShow:s.axisLabelShow,nameTruncateMaxWidth:s.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(i){return this._axesMap.get(i)},t.prototype.dataToPoint=function(i,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(i),e)},t.prototype.eachActiveState=function(i,e,r,n){r==null&&(r=0),n==null&&(n=i.count());var a=this._axesMap,o=this.dimensions,l=[],s=[];C(o,function(y){l.push(i.mapDimension(y)),s.push(a.get(y).model)});for(var u=this.hasAxisBrushed(),f=r;f<n;f++){var c=void 0;if(!u)c="normal";else{c="active";for(var v=i.getValues(l,f),h=0,d=o.length;h<d;h++){var p=s[h].getActiveState(v[h]);if(p==="inactive"){c="inactive";break}}}e(c,f)}},t.prototype.hasAxisBrushed=function(){for(var i=this.dimensions,e=this._axesMap,r=!1,n=0,a=i.length;n<a;n++)e.get(i[n]).model.getActiveState()!=="normal"&&(r=!0);return r},t.prototype.axisCoordToPoint=function(i,e){var r=this._axesLayout[e];return $t([i,0],r.transform)},t.prototype.getAxisLayout=function(i){return oe(this._axesLayout[i])},t.prototype.getSlidedAxisExpandWindow=function(i){var e=this._makeLayoutInfo(),r=e.pixelDimIndex,n=e.axisExpandWindow.slice(),a=n[1]-n[0],o=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(i))return{behavior:"none",axisExpandWindow:n};var l=i[r]-e.layoutBase-e.axisExpandWindow0Pos,s,u="slide",f=e.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),v=c[0]!=null;if(f)v&&f&&l<a*c[0]?(u="jump",s=l-a*c[2]):v&&f&&l>a*(1-c[0])?(u="jump",s=l-a*(1-c[2])):(s=l-a*c[1])>=0&&(s=l-a*(1-c[1]))<=0&&(s=0),s*=e.axisExpandWidth/f,s?Ol(s,n,o,"all"):u="none";else{var h=n[1]-n[0],d=o[1]*l/h;n=[Is(0,d-h/2)],n[1]=As(o[1],n[0]+h),n[0]=n[1]-h}return{axisExpandWindow:n,behavior:u}},t}();function pi(t,i){return As(Is(t,i[0]),i[1])}function vd(t,i){var e=i.layoutLength/(i.axisCount-1);return{position:e*t,axisNameAvailableWidth:e,axisLabelShow:!0}}function hd(t,i){var e=i.layoutLength,r=i.axisExpandWidth,n=i.axisCount,a=i.axisCollapseWidth,o=i.winInnerIndices,l,s=a,u=!1,f;return t<o[0]?(l=t*a,f=a):t<=o[1]?(l=i.axisExpandWindow0Pos+t*r-i.axisExpandWindow[0],s=r,u=!0):(l=e-(n-1-t)*a,f=a),{position:l,axisNameAvailableWidth:s,axisLabelShow:u,nameTruncateMaxWidth:f}}function dd(t,i){var e=[];return t.eachComponent("parallel",function(r,n){var a=new cd(r,t,i);a.name="parallel_"+n,a.resize(r,i),r.coordinateSystem=a,a.model=r,e.push(a)}),t.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var n=r.getReferringComponents("parallel",Ln).models[0];r.coordinateSystem=n.coordinateSystem}}),e}var pd={create:dd},nn=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.activeIntervals=[],e}return i.prototype.getAreaSelectStyle=function(){return Vl([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},i.prototype.setActiveIntervals=function(e){var r=this.activeIntervals=oe(e);if(r)for(var n=r.length-1;n>=0;n--)_t(r[n])},i.prototype.getActiveState=function(e){var r=this.activeIntervals;if(!r.length)return"normal";if(e==null||isNaN(+e))return"inactive";if(r.length===1){var n=r[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var a=0,o=r.length;a<o;a++)if(r[a][0]<=e&&e<=r[a][1])return"active";return"inactive"},i}(Je);Mt(nn,Gl);var gd=["axisLine","axisTickLabel","axisName"],yd=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.init=function(e,r){t.prototype.init.apply(this,arguments),(this._brushController=new Hl(r.getZr())).on("brush",F(this._onBrush,this))},i.prototype.render=function(e,r,n,a){if(!md(e,r,a)){this.axisModel=e,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new ne,this.group.add(this._axisGroup),!!e.get("show")){var l=xd(e,r),s=l.coordinateSystem,u=e.getAreaSelectStyle(),f=u.width,c=e.axis.dim,v=s.getAxisLayout(c),h=O({strokeContainThreshold:f},v),d=new Wl(e,h);C(gd,d.add,d),this._axisGroup.add(d.getGroup()),this._refreshBrushController(h,u,e,l,f,n),Fl(o,this._axisGroup,e)}}},i.prototype._refreshBrushController=function(e,r,n,a,o,l){var s=n.axis.getExtent(),u=s[1]-s[0],f=Math.min(30,Math.abs(u)*.1),c=ot.create({x:s[0],y:-o/2,width:u,height:o});c.x-=f,c.width+=2*f,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:qu(c),isTargetByCursor:Qu(c,l,a),getLinearBrushOtherExtent:Ju(c,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(Sd(n))},i.prototype._onBrush=function(e){var r=e.areas,n=this.axisModel,a=n.axis,o=H(r,function(l){return[a.coordToData(l.range[0],!0),a.coordToData(l.range[1],!0)]});(!n.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},i.prototype.dispose=function(){this._brushController.dispose()},i.type="parallelAxis",i}(Qe);function md(t,i,e){return e&&e.type==="axisAreaSelect"&&i.findComponents({mainType:"parallelAxis",query:e})[0]===t}function Sd(t){var i=t.axis;return H(t.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[i.dataToCoord(e[0],!0),i.dataToCoord(e[1],!0)]}})}function xd(t,i){return i.getComponent("parallel",t.get("parallelIndex"))}var _d={type:"axisAreaSelect",event:"axisAreaSelected"};function bd(t){t.registerAction(_d,function(i,e){e.eachComponent({mainType:"parallelAxis",query:i},function(r){r.axis.model.setActiveIntervals(i.intervals)})}),t.registerAction("parallelAxisExpand",function(i,e){e.eachComponent({mainType:"parallel",query:i},function(r){r.setAxisExpand(i)})})}var wd={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Ls(t){t.registerComponentView(ad),t.registerComponentModel(ld),t.registerCoordinateSystem("parallel",pd),t.registerPreprocessor(td),t.registerComponentModel(nn),t.registerComponentView(yd),$l(t,"parallel",nn,wd),bd(t)}function Dd(t){U(Ls),t.registerChartView(Yh),t.registerSeriesModel(Kh),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,ed)}var Td=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),Cd=function(t){N(i,t);function i(e){return t.call(this,e)||this}return i.prototype.getDefaultShape=function(){return new Td},i.prototype.buildPath=function(e,r){var n=r.extent;e.moveTo(r.x1,r.y1),e.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(e.lineTo(r.x2+n,r.y2),e.bezierCurveTo(r.cpx2+n,r.cpy2,r.cpx1+n,r.cpy1,r.x1+n,r.y1)):(e.lineTo(r.x2,r.y2+n),e.bezierCurveTo(r.cpx2,r.cpy2+n,r.cpx1,r.cpy1+n,r.x1,r.y1+n)),e.closePath()},i.prototype.highlight=function(){Ul(this)},i.prototype.downplay=function(){Yl(this)},i}(ut),Ad=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e._focusAdjacencyDisabled=!1,e}return i.prototype.render=function(e,r,n){var a=this,o=e.getGraph(),l=this.group,s=e.layoutInfo,u=s.width,f=s.height,c=e.getData(),v=e.getData("edge"),h=e.get("orient");this._model=e,l.removeAll(),l.x=s.x,l.y=s.y,o.eachEdge(function(d){var p=new Cd,y=ce(p);y.dataIndex=d.dataIndex,y.seriesIndex=e.seriesIndex,y.dataType="edge";var S=d.getModel(),x=S.getModel("lineStyle"),m=x.get("curveness"),_=d.node1.getLayout(),b=d.node1.getModel(),w=b.get("localX"),D=b.get("localY"),T=d.node2.getLayout(),A=d.node2.getModel(),I=A.get("localX"),L=A.get("localY"),M=d.getLayout(),V,P,j,R,k,z,W,Z;p.shape.extent=Math.max(1,M.dy),p.shape.orient=h,h==="vertical"?(V=(w!=null?w*u:_.x)+M.sy,P=(D!=null?D*f:_.y)+_.dy,j=(I!=null?I*u:T.x)+M.ty,R=L!=null?L*f:T.y,k=V,z=P*(1-m)+R*m,W=j,Z=P*m+R*(1-m)):(V=(w!=null?w*u:_.x)+_.dx,P=(D!=null?D*f:_.y)+M.sy,j=I!=null?I*u:T.x,R=(L!=null?L*f:T.y)+M.ty,k=V*(1-m)+j*m,z=P,W=V*m+j*(1-m),Z=R),p.setShape({x1:V,y1:P,x2:j,y2:R,cpx1:k,cpy1:z,cpx2:W,cpy2:Z}),p.useStyle(x.getItemStyle()),Ya(p.style,h,d);var Y=""+S.get("value"),J=He(S,"edgeLabel");Xe(p,J,{labelFetcher:{getFormattedLabel:function(ae,Ce,X,G,q,K){return e.getFormattedLabel(ae,Ce,"edge",G,li(q,J.normal&&J.normal.get("formatter"),Y),K)}},labelDataIndex:d.dataIndex,defaultText:Y}),p.setTextConfig({position:"inside"});var te=S.getModel("emphasis");Ze(p,S,"lineStyle",function(ae){var Ce=ae.getItemStyle();return Ya(Ce,h,d),Ce}),l.add(p),v.setItemGraphicEl(d.dataIndex,p);var Q=te.get("focus");Te(p,Q==="adjacency"?d.getAdjacentDataIndices():Q==="trajectory"?d.getTrajectoryDataIndices():Q,te.get("blurScope"),te.get("disabled"))}),o.eachNode(function(d){var p=d.getLayout(),y=d.getModel(),S=y.get("localX"),x=y.get("localY"),m=y.getModel("emphasis"),_=y.get(["itemStyle","borderRadius"])||0,b=new Pe({shape:{x:S!=null?S*u:p.x,y:x!=null?x*f:p.y,width:p.dx,height:p.dy,r:_},style:y.getModel("itemStyle").getItemStyle(),z2:10});Xe(b,He(y),{labelFetcher:{getFormattedLabel:function(D,T){return e.getFormattedLabel(D,T,"node")}},labelDataIndex:d.dataIndex,defaultText:d.id}),b.disableLabelAnimation=!0,b.setStyle("fill",d.getVisual("color")),b.setStyle("decal",d.getVisual("style").decal),Ze(b,y),l.add(b),c.setItemGraphicEl(d.dataIndex,b),ce(b).dataType="node";var w=m.get("focus");Te(b,w==="adjacency"?d.getAdjacentDataIndices():w==="trajectory"?d.getTrajectoryDataIndices():w,m.get("blurScope"),m.get("disabled"))}),c.eachItemGraphicEl(function(d,p){var y=c.getItemModel(p);y.get("draggable")&&(d.drift=function(S,x){a._focusAdjacencyDisabled=!0,this.shape.x+=S,this.shape.y+=x,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:c.getRawIndex(p),localX:this.shape.x/u,localY:this.shape.y/f})},d.ondragend=function(){a._focusAdjacencyDisabled=!1},d.draggable=!0,d.cursor="move")}),!this._data&&e.isAnimationEnabled()&&l.setClipPath(Id(l.getBoundingRect(),e,function(){l.removeClipPath()})),this._data=e.getData()},i.prototype.dispose=function(){},i.type="sankey",i}(me);function Ya(t,i,e){switch(t.fill){case"source":t.fill=e.node1.getVisual("color"),t.decal=e.node1.getVisual("style").decal;break;case"target":t.fill=e.node2.getVisual("color"),t.decal=e.node2.getVisual("style").decal;break;case"gradient":var r=e.node1.getVisual("color"),n=e.node2.getVisual("color");ie(r)&&ie(n)&&(t.fill=new Pn(0,0,+(i==="horizontal"),+(i==="vertical"),[{color:r,offset:0},{color:n,offset:1}]))}}function Id(t,i,e){var r=new Pe({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Pt(r,{shape:{width:t.width+20}},i,e),r}var Ld=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.getInitialData=function(e,r){var n=e.edges||e.links,a=e.data||e.nodes,o=e.levels;this.levelModels=[];for(var l=this.levelModels,s=0;s<o.length;s++)o[s].depth!=null&&o[s].depth>=0&&(l[o[s].depth]=new at(o[s],this,r));if(a&&n){var u=Ts(a,n,this,!0,f);return u.data}function f(c,v){c.wrapMethod("getItemModel",function(h,d){var p=h.parentModel,y=p.getData().getItemLayout(d);if(y){var S=y.depth,x=p.levelModels[S];x&&(h.parentModel=x)}return h}),v.wrapMethod("getItemModel",function(h,d){var p=h.parentModel,y=p.getGraph().getEdgeByIndex(d),S=y.node1.getLayout();if(S){var x=S.depth,m=p.levelModels[x];m&&(h.parentModel=m)}return h})}},i.prototype.setNodePosition=function(e,r){var n=this.option.data||this.option.nodes,a=n[e];a.localX=r[0],a.localY=r[1]},i.prototype.getGraph=function(){return this.getData().graph},i.prototype.getEdgeData=function(){return this.getGraph().edgeData},i.prototype.formatTooltip=function(e,r,n){function a(h){return isNaN(h)||h==null}if(n==="edge"){var o=this.getDataParams(e,n),l=o.data,s=o.value,u=l.source+" -- "+l.target;return Ne("nameValue",{name:u,value:s,noValue:a(s)})}else{var f=this.getGraph().getNodeByIndex(e),c=f.getLayout().value,v=this.getDataParams(e,n).data.name;return Ne("nameValue",{name:v!=null?v+"":null,value:c,noValue:a(c)})}},i.prototype.optionUpdated=function(){},i.prototype.getDataParams=function(e,r){var n=t.prototype.getDataParams.call(this,e,r);if(n.value==null&&r==="node"){var a=this.getGraph().getNodeByIndex(e),o=a.getLayout().value;n.value=o}return n},i.type="series.sankey",i.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},i}(we);function Pd(t,i){t.eachSeriesByType("sankey",function(e){var r=e.get("nodeWidth"),n=e.get("nodeGap"),a=Md(e,i);e.layoutInfo=a;var o=a.width,l=a.height,s=e.getGraph(),u=s.nodes,f=s.edges;jd(u);var c=Fe(u,function(p){return p.getLayout().value===0}),v=c.length!==0?0:e.get("layoutIterations"),h=e.get("orient"),d=e.get("nodeAlign");Vd(u,f,r,n,o,l,v,h,d)})}function Md(t,i){return We(t.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})}function Vd(t,i,e,r,n,a,o,l,s){Nd(t,i,e,n,a,l,s),zd(t,i,a,n,r,o,l),Yd(t,l)}function jd(t){C(t,function(i){var e=rt(i.outEdges,ji),r=rt(i.inEdges,ji),n=i.getValue()||0,a=Math.max(e,r,n);i.setLayout({value:a},!0)})}function Nd(t,i,e,r,n,a,o){for(var l=[],s=[],u=[],f=[],c=0,v=0;v<i.length;v++)l[v]=1;for(var v=0;v<t.length;v++)s[v]=t[v].inEdges.length,s[v]===0&&u.push(t[v]);for(var h=-1;u.length;){for(var d=0;d<u.length;d++){var p=u[d],y=p.hostGraph.data.getRawDataItem(p.dataIndex),S=y.depth!=null&&y.depth>=0;S&&y.depth>h&&(h=y.depth),p.setLayout({depth:S?y.depth:c},!0),a==="vertical"?p.setLayout({dy:e},!0):p.setLayout({dx:e},!0);for(var x=0;x<p.outEdges.length;x++){var m=p.outEdges[x],_=i.indexOf(m);l[_]=0;var b=m.node2,w=t.indexOf(b);--s[w]===0&&f.indexOf(b)<0&&f.push(b)}}++c,u=f,f=[]}for(var v=0;v<l.length;v++)if(l[v]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var D=h>c-1?h:c-1;o&&o!=="left"&&Ed(t,o,a,D);var T=a==="vertical"?(n-e)/D:(r-e)/D;kd(t,T,a)}function Ps(t){var i=t.hostGraph.data.getRawDataItem(t.dataIndex);return i.depth!=null&&i.depth>=0}function Ed(t,i,e,r){if(i==="right"){for(var n=[],a=t,o=0;a.length;){for(var l=0;l<a.length;l++){var s=a[l];s.setLayout({skNodeHeight:o},!0);for(var u=0;u<s.inEdges.length;u++){var f=s.inEdges[u];n.indexOf(f.node1)<0&&n.push(f.node1)}}a=n,n=[],++o}C(t,function(c){Ps(c)||c.setLayout({depth:Math.max(0,r-c.getLayout().skNodeHeight)},!0)})}else i==="justify"&&Rd(t,r)}function Rd(t,i){C(t,function(e){!Ps(e)&&!e.outEdges.length&&e.setLayout({depth:i},!0)})}function kd(t,i,e){C(t,function(r){var n=r.getLayout().depth*i;e==="vertical"?r.setLayout({y:n},!0):r.setLayout({x:n},!0)})}function zd(t,i,e,r,n,a,o){var l=Bd(t,o);Od(l,i,e,r,n,o),xr(l,n,e,r,o);for(var s=1;a>0;a--)s*=.99,Gd(l,s,o),xr(l,n,e,r,o),Ud(l,s,o),xr(l,n,e,r,o)}function Bd(t,i){var e=[],r=i==="vertical"?"y":"x",n=$r(t,function(a){return a.getLayout()[r]});return n.keys.sort(function(a,o){return a-o}),C(n.keys,function(a){e.push(n.buckets.get(a))}),e}function Od(t,i,e,r,n,a){var o=1/0;C(t,function(l){var s=l.length,u=0;C(l,function(c){u+=c.getLayout().value});var f=a==="vertical"?(r-(s-1)*n)/u:(e-(s-1)*n)/u;f<o&&(o=f)}),C(t,function(l){C(l,function(s,u){var f=s.getLayout().value*o;a==="vertical"?(s.setLayout({x:u},!0),s.setLayout({dx:f},!0)):(s.setLayout({y:u},!0),s.setLayout({dy:f},!0))})}),C(i,function(l){var s=+l.getValue()*o;l.setLayout({dy:s},!0)})}function xr(t,i,e,r,n){var a=n==="vertical"?"x":"y";C(t,function(o){o.sort(function(p,y){return p.getLayout()[a]-y.getLayout()[a]});for(var l,s,u,f=0,c=o.length,v=n==="vertical"?"dx":"dy",h=0;h<c;h++)s=o[h],u=f-s.getLayout()[a],u>0&&(l=s.getLayout()[a]+u,n==="vertical"?s.setLayout({x:l},!0):s.setLayout({y:l},!0)),f=s.getLayout()[a]+s.getLayout()[v]+i;var d=n==="vertical"?r:e;if(u=f-i-d,u>0){l=s.getLayout()[a]-u,n==="vertical"?s.setLayout({x:l},!0):s.setLayout({y:l},!0),f=l;for(var h=c-2;h>=0;--h)s=o[h],u=s.getLayout()[a]+s.getLayout()[v]+i-f,u>0&&(l=s.getLayout()[a]-u,n==="vertical"?s.setLayout({x:l},!0):s.setLayout({y:l},!0)),f=s.getLayout()[a]}})}function Gd(t,i,e){C(t.slice().reverse(),function(r){C(r,function(n){if(n.outEdges.length){var a=rt(n.outEdges,Hd,e)/rt(n.outEdges,ji);if(isNaN(a)){var o=n.outEdges.length;a=o?rt(n.outEdges,Wd,e)/o:0}if(e==="vertical"){var l=n.getLayout().x+(a-lt(n,e))*i;n.setLayout({x:l},!0)}else{var s=n.getLayout().y+(a-lt(n,e))*i;n.setLayout({y:s},!0)}}})})}function Hd(t,i){return lt(t.node2,i)*t.getValue()}function Wd(t,i){return lt(t.node2,i)}function Fd(t,i){return lt(t.node1,i)*t.getValue()}function $d(t,i){return lt(t.node1,i)}function lt(t,i){return i==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function ji(t){return t.getValue()}function rt(t,i,e){for(var r=0,n=t.length,a=-1;++a<n;){var o=+i(t[a],e);isNaN(o)||(r+=o)}return r}function Ud(t,i,e){C(t,function(r){C(r,function(n){if(n.inEdges.length){var a=rt(n.inEdges,Fd,e)/rt(n.inEdges,ji);if(isNaN(a)){var o=n.inEdges.length;a=o?rt(n.inEdges,$d,e)/o:0}if(e==="vertical"){var l=n.getLayout().x+(a-lt(n,e))*i;n.setLayout({x:l},!0)}else{var s=n.getLayout().y+(a-lt(n,e))*i;n.setLayout({y:s},!0)}}})})}function Yd(t,i){var e=i==="vertical"?"x":"y";C(t,function(r){r.outEdges.sort(function(n,a){return n.node2.getLayout()[e]-a.node2.getLayout()[e]}),r.inEdges.sort(function(n,a){return n.node1.getLayout()[e]-a.node1.getLayout()[e]})}),C(t,function(r){var n=0,a=0;C(r.outEdges,function(o){o.setLayout({sy:n},!0),n+=o.getLayout().dy}),C(r.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function Xd(t){t.eachSeriesByType("sankey",function(i){var e=i.getGraph(),r=e.nodes,n=e.edges;if(r.length){var a=1/0,o=-1/0;C(r,function(l){var s=l.getLayout().value;s<a&&(a=s),s>o&&(o=s)}),C(r,function(l){var s=new fe({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:i.get("color")}),u=s.mapValueToVisual(l.getLayout().value),f=l.getModel().get(["itemStyle","color"]);f!=null?(l.setVisual("color",f),l.setVisual("style",{fill:f})):(l.setVisual("color",u),l.setVisual("style",{fill:u}))})}n.length&&C(n,function(l){var s=l.getModel().get("lineStyle");l.setVisual("style",s)})})}function Zd(t){t.registerChartView(Ad),t.registerSeriesModel(Ld),t.registerLayout(Pd),t.registerVisual(Xd),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(i,e){e.eachComponent({mainType:"series",subType:"sankey",query:i},function(r){r.setNodePosition(i.dataIndex,[i.localX,i.localY])})})}var Ms=function(){function t(){}return t.prototype.getInitialData=function(i,e){var r,n=e.getComponent("xAxis",this.get("xAxisIndex")),a=e.getComponent("yAxis",this.get("yAxisIndex")),o=n.get("type"),l=a.get("type"),s;o==="category"?(i.layout="horizontal",r=n.getOrdinalMeta(),s=!0):l==="category"?(i.layout="vertical",r=a.getOrdinalMeta(),s=!0):i.layout=i.layout||"horizontal";var u=["x","y"],f=i.layout==="horizontal"?0:1,c=this._baseAxisDim=u[f],v=u[1-f],h=[n,a],d=h[f].get("type"),p=h[1-f].get("type"),y=i.data;if(y&&s){var S=[];C(y,function(_,b){var w;B(_)?(w=_.slice(),_.unshift(b)):B(_.value)?(w=O({},_),w.value=w.value.slice(),_.value.unshift(b)):w=_,S.push(w)}),i.data=S}var x=this.defaultValueDimensions,m=[{name:c,type:Ur(d),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:v,type:Ur(p),dimsDef:x.slice()}];return gn(this,{coordDimensions:m,dimensionsCount:x.length+1,encodeDefaulter:se(ef,m,this)})},t.prototype.getBaseAxis=function(){var i=this._baseAxisDim;return this.ecModel.getComponent(i+"Axis",this.get(i+"AxisIndex")).axis},t}(),Vs=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return i.type="series.boxplot",i.dependencies=["xAxis","yAxis","grid"],i.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},i}(we);Mt(Vs,Ms,!0);var Kd=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.render=function(e,r,n){var a=e.getData(),o=this.group,l=this._data;this._data||o.removeAll();var s=e.get("layout")==="horizontal"?1:0;a.diff(l).add(function(u){if(a.hasValue(u)){var f=a.getItemLayout(u),c=Xa(f,a,u,s,!0);a.setItemGraphicEl(u,c),o.add(c)}}).update(function(u,f){var c=l.getItemGraphicEl(f);if(!a.hasValue(u)){o.remove(c);return}var v=a.getItemLayout(u);c?(Lt(c),js(v,c,a,u)):c=Xa(v,a,u,s),o.add(c),a.setItemGraphicEl(u,c)}).remove(function(u){var f=l.getItemGraphicEl(u);f&&o.remove(f)}).execute(),this._data=a},i.prototype.remove=function(e){var r=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(a){a&&r.remove(a)})},i.type="boxplot",i}(me),qd=function(){function t(){}return t}(),Qd=function(t){N(i,t);function i(e){var r=t.call(this,e)||this;return r.type="boxplotBoxPath",r}return i.prototype.getDefaultShape=function(){return new qd},i.prototype.buildPath=function(e,r){var n=r.points,a=0;for(e.moveTo(n[a][0],n[a][1]),a++;a<4;a++)e.lineTo(n[a][0],n[a][1]);for(e.closePath();a<n.length;a++)e.moveTo(n[a][0],n[a][1]),a++,e.lineTo(n[a][0],n[a][1])},i}(ut);function Xa(t,i,e,r,n){var a=t.ends,o=new Qd({shape:{points:n?Jd(a,r,t):a}});return js(t,o,i,e,n),o}function js(t,i,e,r,n){var a=e.hostModel,o=Mn[n?"initProps":"updateProps"];o(i,{shape:{points:t.ends}},a,r),i.useStyle(e.getItemVisual(r,"style")),i.style.strokeNoScale=!0,i.z2=100;var l=e.getItemModel(r),s=l.getModel("emphasis");Ze(i,l),Te(i,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function Jd(t,i,e){return H(t,function(r){return r=r.slice(),r[i]=e.initBaseline,r})}var Ut=C;function ep(t){var i=tp(t);Ut(i,function(e){var r=e.seriesModels;r.length&&(ip(e),Ut(r,function(n,a){rp(n,e.boxOffsetList[a],e.boxWidthList[a])}))})}function tp(t){var i=[],e=[];return t.eachSeriesByType("boxplot",function(r){var n=r.getBaseAxis(),a=De(e,n);a<0&&(a=e.length,e[a]=n,i[a]={axis:n,seriesModels:[]}),i[a].seriesModels.push(r)}),i}function ip(t){var i=t.axis,e=t.seriesModels,r=e.length,n=t.boxWidthList=[],a=t.boxOffsetList=[],o=[],l;if(i.type==="category")l=i.getBandWidth();else{var s=0;Ut(e,function(d){s=Math.max(s,d.getData().count())});var u=i.getExtent();l=Math.abs(u[1]-u[0])/s}Ut(e,function(d){var p=d.get("boxWidth");B(p)||(p=[p,p]),o.push([$(p[0],l)||0,$(p[1],l)||0])});var f=l*.8-2,c=f/r*.3,v=(f-c*(r-1))/r,h=v/2-f/2;Ut(e,function(d,p){a.push(h),h+=c+v,n.push(Math.min(Math.max(v,o[p][0]),o[p][1]))})}function rp(t,i,e){var r=t.coordinateSystem,n=t.getData(),a=e/2,o=t.get("layout")==="horizontal"?0:1,l=1-o,s=["x","y"],u=n.mapDimension(s[o]),f=n.mapDimensionsAll(s[l]);if(u==null||f.length<5)return;for(var c=0;c<n.count();c++){var v=n.get(u,c),h=m(v,f[2],c),d=m(v,f[0],c),p=m(v,f[1],c),y=m(v,f[3],c),S=m(v,f[4],c),x=[];_(x,p,!1),_(x,y,!0),x.push(d,p,S,y),b(x,d),b(x,S),b(x,h),n.setItemLayout(c,{initBaseline:h[l],ends:x})}function m(w,D,T){var A=n.get(D,T),I=[];I[o]=w,I[l]=A;var L;return isNaN(w)||isNaN(A)?L=[NaN,NaN]:(L=r.dataToPoint(I),L[o]+=i),L}function _(w,D,T){var A=D.slice(),I=D.slice();A[o]+=a,I[o]-=a,T?w.push(A,I):w.push(I,A)}function b(w,D){var T=D.slice(),A=D.slice();T[o]-=a,A[o]+=a,w.push(T,A)}}function np(t,i){i=i||{};for(var e=[],r=[],n=i.boundIQR,a=n==="none"||n===0,o=0;o<t.length;o++){var l=_t(t[o].slice()),s=er(l,.25),u=er(l,.5),f=er(l,.75),c=l[0],v=l[l.length-1],h=(n??1.5)*(f-s),d=a?c:Math.max(c,s-h),p=a?v:Math.min(v,f+h),y=i.itemNameFormatter,S=le(y)?y({value:o}):ie(y)?y.replace("{value}",o+""):o+"";e.push([S,d,s,u,f,p]);for(var x=0;x<l.length;x++){var m=l[x];if(m<d||m>p){var _=[S,m];r.push(_)}}}return{boxData:e,outliers:r}}var ap={type:"echarts:boxplot",transform:function(i){var e=i.upstream;if(e.sourceFormat!==tf){var r="";Xl(r)}var n=np(e.getRawData(),i.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function op(t){t.registerSeriesModel(Vs),t.registerChartView(Kd),t.registerLayout(ep),t.registerTransform(ap)}var lp=["color","borderColor"],sp=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.render=function(e,r,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},i.prototype.incrementalPrepareRender=function(e,r,n){this._clear(),this._updateDrawMode(e)},i.prototype.incrementalRender=function(e,r,n,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,r):this._incrementalRenderNormal(e,r)},i.prototype.eachRendered=function(e){Vn(this._progressiveEls||this.group,e)},i.prototype._updateDrawMode=function(e){var r=e.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},i.prototype._renderNormal=function(e){var r=e.getData(),n=this._data,a=this.group,o=r.getLayout("isSimpleBox"),l=e.get("clip",!0),s=e.coordinateSystem,u=s.getArea&&s.getArea();this._data||a.removeAll(),r.diff(n).add(function(f){if(r.hasValue(f)){var c=r.getItemLayout(f);if(l&&Za(u,c))return;var v=_r(c,f,!0);Pt(v,{shape:{points:c.ends}},e,f),br(v,r,f,o),a.add(v),r.setItemGraphicEl(f,v)}}).update(function(f,c){var v=n.getItemGraphicEl(c);if(!r.hasValue(f)){a.remove(v);return}var h=r.getItemLayout(f);if(l&&Za(u,h)){a.remove(v);return}v?(be(v,{shape:{points:h.ends}},e,f),Lt(v)):v=_r(h),br(v,r,f,o),a.add(v),r.setItemGraphicEl(f,v)}).remove(function(f){var c=n.getItemGraphicEl(f);c&&a.remove(c)}).execute(),this._data=r},i.prototype._renderLarge=function(e){this._clear(),Ka(e,this.group);var r=e.get("clip",!0)?jn(e.coordinateSystem,!1,e):null;r?this.group.setClipPath(r):this.group.removeClipPath()},i.prototype._incrementalRenderNormal=function(e,r){for(var n=r.getData(),a=n.getLayout("isSimpleBox"),o;(o=e.next())!=null;){var l=n.getItemLayout(o),s=_r(l);br(s,n,o,a),s.incremental=!0,this.group.add(s),this._progressiveEls.push(s)}},i.prototype._incrementalRenderLarge=function(e,r){Ka(r,this.group,this._progressiveEls,!0)},i.prototype.remove=function(e){this._clear()},i.prototype._clear=function(){this.group.removeAll(),this._data=null},i.type="candlestick",i}(me),up=function(){function t(){}return t}(),fp=function(t){N(i,t);function i(e){var r=t.call(this,e)||this;return r.type="normalCandlestickBox",r}return i.prototype.getDefaultShape=function(){return new up},i.prototype.buildPath=function(e,r){var n=r.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))},i}(ut);function _r(t,i,e){var r=t.ends;return new fp({shape:{points:e?cp(r,t):r},z2:100})}function Za(t,i){for(var e=!0,r=0;r<i.ends.length;r++)if(t.contain(i.ends[r][0],i.ends[r][1])){e=!1;break}return e}function br(t,i,e,r){var n=i.getItemModel(e);t.useStyle(i.getItemVisual(e,"style")),t.style.strokeNoScale=!0,t.__simpleBox=r,Ze(t,n)}function cp(t,i){return H(t,function(e){return e=e.slice(),e[1]=i.initBaseline,e})}var vp=function(){function t(){}return t}(),wr=function(t){N(i,t);function i(e){var r=t.call(this,e)||this;return r.type="largeCandlestickBox",r}return i.prototype.getDefaultShape=function(){return new vp},i.prototype.buildPath=function(e,r){for(var n=r.points,a=0;a<n.length;)if(this.__sign===n[a++]){var o=n[a++];e.moveTo(o,n[a++]),e.lineTo(o,n[a++])}else a+=3},i}(ut);function Ka(t,i,e,r){var n=t.getData(),a=n.getLayout("largePoints"),o=new wr({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});i.add(o);var l=new wr({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});i.add(l);var s=new wr({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});i.add(s),Dr(1,o,t),Dr(-1,l,t),Dr(0,s,t),r&&(o.incremental=!0,l.incremental=!0),e&&e.push(o,l)}function Dr(t,i,e,r){var n=e.get(["itemStyle",t>0?"borderColor":"borderColor0"])||e.get(["itemStyle",t>0?"color":"color0"]);t===0&&(n=e.get(["itemStyle","borderColorDoji"]));var a=e.getModel("itemStyle").getItemStyle(lp);i.useStyle(a),i.style.fill=null,i.style.stroke=n}var Ns=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return i.prototype.getShadowDim=function(){return"open"},i.prototype.brushSelector=function(e,r,n){var a=r.getItemLayout(e);return a&&n.rect(a.brushRect)},i.type="series.candlestick",i.dependencies=["xAxis","yAxis","grid"],i.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},i}(we);Mt(Ns,Ms,!0);function hp(t){!t||!B(t.series)||C(t.series,function(i){Me(i)&&i.type==="k"&&(i.type="candlestick")})}var dp=["itemStyle","borderColor"],pp=["itemStyle","borderColor0"],gp=["itemStyle","borderColorDoji"],yp=["itemStyle","color"],mp=["itemStyle","color0"],Sp={seriesType:"candlestick",plan:Zl(),performRawSeries:!0,reset:function(t,i){function e(a,o){return o.get(a>0?yp:mp)}function r(a,o){return o.get(a===0?gp:a>0?dp:pp)}if(!i.isSeriesFiltered(t)){var n=t.pipelineContext.large;return!n&&{progress:function(a,o){for(var l;(l=a.next())!=null;){var s=o.getItemModel(l),u=o.getItemLayout(l).sign,f=s.getItemStyle();f.fill=e(u,s),f.stroke=r(u,s)||f.fill;var c=o.ensureUniqueItemVisual(l,"style");O(c,f)}}}}}},xp={seriesType:"candlestick",plan:Zl(),reset:function(t){var i=t.coordinateSystem,e=t.getData(),r=_p(t,e),n=0,a=1,o=["x","y"],l=e.getDimensionIndex(e.mapDimension(o[n])),s=H(e.mapDimensionsAll(o[a]),e.getDimensionIndex,e),u=s[0],f=s[1],c=s[2],v=s[3];if(e.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),l<0||s.length<4)return;return{progress:t.pipelineContext.large?d:h};function h(p,y){for(var S,x=y.getStore();(S=p.next())!=null;){var m=x.get(l,S),_=x.get(u,S),b=x.get(f,S),w=x.get(c,S),D=x.get(v,S),T=Math.min(_,b),A=Math.max(_,b),I=k(T,m),L=k(A,m),M=k(w,m),V=k(D,m),P=[];z(P,L,0),z(P,I,1),P.push(Z(V),Z(L),Z(M),Z(I));var j=y.getItemModel(S),R=!!j.get(["itemStyle","borderColorDoji"]);y.setItemLayout(S,{sign:qa(x,S,_,b,f,R),initBaseline:_>b?L[a]:I[a],ends:P,brushRect:W(w,D,m)})}function k(Y,J){var te=[];return te[n]=J,te[a]=Y,isNaN(J)||isNaN(Y)?[NaN,NaN]:i.dataToPoint(te)}function z(Y,J,te){var Q=J.slice(),ae=J.slice();Q[n]=tr(Q[n]+r/2,1,!1),ae[n]=tr(ae[n]-r/2,1,!0),te?Y.push(Q,ae):Y.push(ae,Q)}function W(Y,J,te){var Q=k(Y,te),ae=k(J,te);return Q[n]-=r/2,ae[n]-=r/2,{x:Q[0],y:Q[1],width:r,height:ae[1]-Q[1]}}function Z(Y){return Y[n]=tr(Y[n],1),Y}}function d(p,y){for(var S=rf(p.count*4),x=0,m,_=[],b=[],w,D=y.getStore(),T=!!t.get(["itemStyle","borderColorDoji"]);(w=p.next())!=null;){var A=D.get(l,w),I=D.get(u,w),L=D.get(f,w),M=D.get(c,w),V=D.get(v,w);if(isNaN(A)||isNaN(M)||isNaN(V)){S[x++]=NaN,x+=3;continue}S[x++]=qa(D,w,I,L,f,T),_[n]=A,_[a]=M,m=i.dataToPoint(_,null,b),S[x++]=m?m[0]:NaN,S[x++]=m?m[1]:NaN,_[a]=V,m=i.dataToPoint(_,null,b),S[x++]=m?m[1]:NaN}y.setLayout("largePoints",S)}}};function qa(t,i,e,r,n,a){var o;return e>r?o=-1:e<r?o=1:o=a?0:i>0?t.get(n,i-1)<=r?1:-1:1,o}function _p(t,i){var e=t.getBaseAxis(),r,n=e.type==="category"?e.getBandWidth():(r=e.getExtent(),Math.abs(r[1]-r[0])/i.count()),a=$(ge(t.get("barMaxWidth"),n),n),o=$(ge(t.get("barMinWidth"),1),n),l=t.get("barWidth");return l!=null?$(l,n):Math.max(Math.min(n/2,a),o)}function bp(t){t.registerChartView(sp),t.registerSeriesModel(Ns),t.registerPreprocessor(hp),t.registerVisual(Sp),t.registerLayout(xp)}function Qa(t,i){var e=i.rippleEffectColor||i.color;t.eachChild(function(r){r.attr({z:i.z,zlevel:i.zlevel,style:{stroke:i.brushType==="stroke"?e:null,fill:i.brushType==="fill"?e:null}})})}var wp=function(t){N(i,t);function i(e,r){var n=t.call(this)||this,a=new Pl(e,r),o=new ne;return n.add(a),n.add(o),n.updateData(e,r),n}return i.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},i.prototype.startEffectAnimation=function(e){for(var r=e.symbolType,n=e.color,a=e.rippleNumber,o=this.childAt(1),l=0;l<a;l++){var s=St(r,-1,-1,2,2,n);s.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-l/a*e.period+e.effectOffset;s.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(u).start(),s.animateStyle(!0).when(e.period,{opacity:0}).delay(u).start(),o.add(s)}Qa(o,e)},i.prototype.updateEffectAnimation=function(e){for(var r=this._effectCfg,n=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var l=a[o];if(r[l]!==e[l]){this.stopEffectAnimation(),this.startEffectAnimation(e);return}}Qa(n,e)},i.prototype.highlight=function(){Ul(this)},i.prototype.downplay=function(){Yl(this)},i.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},i.prototype.updateData=function(e,r){var n=this,a=e.hostModel;this.childAt(0).updateData(e,r);var o=this.childAt(1),l=e.getItemModel(r),s=e.getItemVisual(r,"symbol"),u=Kl(e.getItemVisual(r,"symbolSize")),f=e.getItemVisual(r,"style"),c=f&&f.fill,v=l.getModel("emphasis");o.setScale(u),o.traverse(function(y){y.setStyle("fill",c)});var h=Nn(e.getItemVisual(r,"symbolOffset"),u);h&&(o.x=h[0],o.y=h[1]);var d=e.getItemVisual(r,"symbolRotate");o.rotation=(d||0)*Math.PI/180||0;var p={};p.showEffectOn=a.get("showEffectOn"),p.rippleScale=l.get(["rippleEffect","scale"]),p.brushType=l.get(["rippleEffect","brushType"]),p.period=l.get(["rippleEffect","period"])*1e3,p.effectOffset=r/e.count(),p.z=a.getShallow("z")||0,p.zlevel=a.getShallow("zlevel")||0,p.symbolType=s,p.color=c,p.rippleEffectColor=l.get(["rippleEffect","color"]),p.rippleNumber=l.get(["rippleEffect","number"]),p.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(y){y==="emphasis"?p.showEffectOn!=="render"&&n.startEffectAnimation(p):y==="normal"&&p.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=p,Te(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))},i.prototype.fadeOut=function(e){e&&e()},i}(ne),Dp=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.init=function(){this._symbolDraw=new wn(wp)},i.prototype.render=function(e,r,n){var a=e.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(e)}),this.group.add(o.group)},i.prototype._getClipShape=function(e){var r=e.coordinateSystem,n=r&&r.getArea&&r.getArea();return e.get("clip",!0)?n:null},i.prototype.updateTransform=function(e,r,n){var a=e.getData();this.group.dirty();var o=ql("").reset(e,r,n);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},i.prototype._updateGroupTransform=function(e){var r=e.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=nf(r.getRoamTransform()),this.group.decomposeTransform())},i.prototype.remove=function(e,r){this._symbolDraw&&this._symbolDraw.remove(!0)},i.type="effectScatter",i}(me),Tp=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.hasSymbolVisual=!0,e}return i.prototype.getInitialData=function(e,r){return si(null,this,{useEncodeDefaulter:!0})},i.prototype.brushSelector=function(e,r,n){return n.point(r.getItemLayout(e))},i.type="series.effectScatter",i.dependencies=["grid","polar"],i.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},i}(we);function Cp(t){t.registerChartView(Dp),t.registerSeriesModel(Tp),t.registerLayout(ql("effectScatter"))}var Ap=256,Ip=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var i=va.createCanvas();this.canvas=i}return t.prototype.update=function(i,e,r,n,a,o){var l=this._getBrush(),s=this._getGradient(a,"inRange"),u=this._getGradient(a,"outOfRange"),f=this.pointSize+this.blurSize,c=this.canvas,v=c.getContext("2d"),h=i.length;c.width=e,c.height=r;for(var d=0;d<h;++d){var p=i[d],y=p[0],S=p[1],x=p[2],m=n(x);v.globalAlpha=m,v.drawImage(l,y-f,S-f)}if(!c.width||!c.height)return c;for(var _=v.getImageData(0,0,c.width,c.height),b=_.data,w=0,D=b.length,T=this.minOpacity,A=this.maxOpacity,I=A-T;w<D;){var m=b[w+3]/256,L=Math.floor(m*(Ap-1))*4;if(m>0){var M=o(m)?s:u;m>0&&(m=m*I+T),b[w++]=M[L],b[w++]=M[L+1],b[w++]=M[L+2],b[w++]=M[L+3]*m*256}else w+=4}return v.putImageData(_,0,0),c},t.prototype._getBrush=function(){var i=this._brushCanvas||(this._brushCanvas=va.createCanvas()),e=this.pointSize+this.blurSize,r=e*2;i.width=r,i.height=r;var n=i.getContext("2d");return n.clearRect(0,0,r,r),n.shadowOffsetX=r,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-e,e,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),i},t.prototype._getGradient=function(i,e){for(var r=this._gradientPixels,n=r[e]||(r[e]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,l=0;l<256;l++)i[e](l/255,!0,a),n[o++]=a[0],n[o++]=a[1],n[o++]=a[2],n[o++]=a[3];return n},t}();function Lp(t,i,e){var r=t[1]-t[0];i=H(i,function(o){return{interval:[(o.interval[0]-t[0])/r,(o.interval[1]-t[0])/r]}});var n=i.length,a=0;return function(o){var l;for(l=a;l<n;l++){var s=i[l].interval;if(s[0]<=o&&o<=s[1]){a=l;break}}if(l===n)for(l=a-1;l>=0;l--){var s=i[l].interval;if(s[0]<=o&&o<=s[1]){a=l;break}}return l>=0&&l<n&&e[l]}}function Pp(t,i){var e=t[1]-t[0];return i=[(i[0]-t[0])/e,(i[1]-t[0])/e],function(r){return r>=i[0]&&r<=i[1]}}function Ja(t){var i=t.dimensions;return i[0]==="lng"&&i[1]==="lat"}var Mp=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.render=function(e,r,n){var a;r.eachComponent("visualMap",function(l){l.eachTargetSeries(function(s){s===e&&(a=l)})}),this._progressiveEls=null,this.group.removeAll();var o=e.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):Ja(o)&&this._renderOnGeo(o,e,a,n)},i.prototype.incrementalPrepareRender=function(e,r,n){this.group.removeAll()},i.prototype.incrementalRender=function(e,r,n,a){var o=r.coordinateSystem;o&&(Ja(o)?this.render(r,n,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,a,e.start,e.end,!0)))},i.prototype.eachRendered=function(e){Vn(this._progressiveEls||this.group,e)},i.prototype._renderOnCartesianAndCalendar=function(e,r,n,a,o){var l=e.coordinateSystem,s=Fi(l,"cartesian2d"),u,f,c,v;if(s){var h=l.getAxis("x"),d=l.getAxis("y");u=h.getBandWidth()+.5,f=d.getBandWidth()+.5,c=h.scale.getExtent(),v=d.scale.getExtent()}for(var p=this.group,y=e.getData(),S=e.getModel(["emphasis","itemStyle"]).getItemStyle(),x=e.getModel(["blur","itemStyle"]).getItemStyle(),m=e.getModel(["select","itemStyle"]).getItemStyle(),_=e.get(["itemStyle","borderRadius"]),b=He(e),w=e.getModel("emphasis"),D=w.get("focus"),T=w.get("blurScope"),A=w.get("disabled"),I=s?[y.mapDimension("x"),y.mapDimension("y"),y.mapDimension("value")]:[y.mapDimension("time"),y.mapDimension("value")],L=n;L<a;L++){var M=void 0,V=y.getItemVisual(L,"style");if(s){var P=y.get(I[0],L),j=y.get(I[1],L);if(isNaN(y.get(I[2],L))||isNaN(P)||isNaN(j)||P<c[0]||P>c[1]||j<v[0]||j>v[1])continue;var R=l.dataToPoint([P,j]);M=new Pe({shape:{x:R[0]-u/2,y:R[1]-f/2,width:u,height:f},style:V})}else{if(isNaN(y.get(I[1],L)))continue;M=new Pe({z2:1,shape:l.dataToRect([y.get(I[0],L)]).contentShape,style:V})}if(y.hasItemOption){var k=y.getItemModel(L),z=k.getModel("emphasis");S=z.getModel("itemStyle").getItemStyle(),x=k.getModel(["blur","itemStyle"]).getItemStyle(),m=k.getModel(["select","itemStyle"]).getItemStyle(),_=k.get(["itemStyle","borderRadius"]),D=z.get("focus"),T=z.get("blurScope"),A=z.get("disabled"),b=He(k)}M.shape.r=_;var W=e.getRawValue(L),Z="-";W&&W[2]!=null&&(Z=W[2]+""),Xe(M,b,{labelFetcher:e,labelDataIndex:L,defaultOpacity:V.opacity,defaultText:Z}),M.ensureState("emphasis").style=S,M.ensureState("blur").style=x,M.ensureState("select").style=m,Te(M,D,T,A),M.incremental=o,o&&(M.states.emphasis.hoverLayer=!0),p.add(M),y.setItemGraphicEl(L,M),this._progressiveEls&&this._progressiveEls.push(M)}},i.prototype._renderOnGeo=function(e,r,n,a){var o=n.targetVisuals.inRange,l=n.targetVisuals.outOfRange,s=r.getData(),u=this._hmLayer||this._hmLayer||new Ip;u.blurSize=r.get("blurSize"),u.pointSize=r.get("pointSize"),u.minOpacity=r.get("minOpacity"),u.maxOpacity=r.get("maxOpacity");var f=e.getViewRect().clone(),c=e.getRoamTransform();f.applyTransform(c);var v=Math.max(f.x,0),h=Math.max(f.y,0),d=Math.min(f.width+f.x,a.getWidth()),p=Math.min(f.height+f.y,a.getHeight()),y=d-v,S=p-h,x=[s.mapDimension("lng"),s.mapDimension("lat"),s.mapDimension("value")],m=s.mapArray(x,function(D,T,A){var I=e.dataToPoint([D,T]);return I[0]-=v,I[1]-=h,I.push(A),I}),_=n.getExtent(),b=n.type==="visualMap.continuous"?Pp(_,n.option.range):Lp(_,n.getPieceList(),n.option.selected);u.update(m,y,S,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:l.color.getColorMapper()},b);var w=new bt({style:{width:y,height:S,x:v,y:h,image:u.canvas},silent:!0});this.group.add(w)},i.type="heatmap",i}(me),Vp=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.getInitialData=function(e,r){return si(null,this,{generateCoord:"value"})},i.prototype.preventIncremental=function(){var e=El.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},i.type="series.heatmap",i.dependencies=["grid","geo","calendar"],i.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},i}(we);function jp(t){t.registerChartView(Mp),t.registerSeriesModel(Vp)}var Np=["itemStyle","borderWidth"],eo=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],Tr=new bl,Ep=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.render=function(e,r,n){var a=this.group,o=e.getData(),l=this._data,s=e.coordinateSystem,u=s.getBaseAxis(),f=u.isHorizontal(),c=s.master.getRect(),v={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:s,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:f,valueDim:eo[+f],categoryDim:eo[1-+f]};o.diff(l).add(function(d){if(o.hasValue(d)){var p=io(o,d),y=to(o,d,p,v),S=ro(o,v,y);o.setItemGraphicEl(d,S),a.add(S),ao(S,v,y)}}).update(function(d,p){var y=l.getItemGraphicEl(p);if(!o.hasValue(d)){a.remove(y);return}var S=io(o,d),x=to(o,d,S,v),m=Os(o,x);y&&m!==y.__pictorialShapeStr&&(a.remove(y),o.setItemGraphicEl(d,null),y=null),y?Hp(y,v,x):y=ro(o,v,x,!0),o.setItemGraphicEl(d,y),y.__pictorialSymbolMeta=x,a.add(y),ao(y,v,x)}).remove(function(d){var p=l.getItemGraphicEl(d);p&&no(l,d,p.__pictorialSymbolMeta.animationModel,p)}).execute();var h=e.get("clip",!0)?jn(e.coordinateSystem,!1,e):null;return h?a.setClipPath(h):a.removeClipPath(),this._data=o,this.group},i.prototype.remove=function(e,r){var n=this.group,a=this._data;e.get("animation")?a&&a.eachItemGraphicEl(function(o){no(a,ce(o).dataIndex,e,o)}):n.removeAll()},i.type="pictorialBar",i}(me);function to(t,i,e,r){var n=t.getItemLayout(i),a=e.get("symbolRepeat"),o=e.get("symbolClip"),l=e.get("symbolPosition")||"start",s=e.get("symbolRotate"),u=(s||0)*Math.PI/180||0,f=e.get("symbolPatternSize")||2,c=e.isAnimationEnabled(),v={dataIndex:i,layout:n,itemModel:e,symbolType:t.getItemVisual(i,"symbol")||"circle",style:t.getItemVisual(i,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:f,rotation:u,animationModel:c?e:null,hoverScale:c&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};Rp(e,a,n,r,v),kp(t,i,n,a,o,v.boundingLength,v.pxSign,f,r,v),zp(e,v.symbolScale,u,r,v);var h=v.symbolSize,d=Nn(e.get("symbolOffset"),h);return Bp(e,h,n,a,o,d,l,v.valueLineWidth,v.boundingLength,v.repeatCutLength,r,v),v}function Rp(t,i,e,r,n){var a=r.valueDim,o=t.get("symbolBoundingData"),l=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),s=l.toGlobalCoord(l.dataToCoord(0)),u=1-+(e[a.wh]<=0),f;if(B(o)){var c=[Cr(l,o[0])-s,Cr(l,o[1])-s];c[1]<c[0]&&c.reverse(),f=c[u]}else o!=null?f=Cr(l,o)-s:i?f=r.coordSysExtent[a.index][u]-s:f=e[a.wh];n.boundingLength=f,i&&(n.repeatCutLength=e[a.wh]),n.pxSign=f>0?1:-1}function Cr(t,i){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(i)))}function kp(t,i,e,r,n,a,o,l,s,u){var f=s.valueDim,c=s.categoryDim,v=Math.abs(e[c.wh]),h=t.getItemVisual(i,"symbolSize"),d;B(h)?d=h.slice():h==null?d=["100%","100%"]:d=[h,h],d[c.index]=$(d[c.index],v),d[f.index]=$(d[f.index],r?v:Math.abs(a)),u.symbolSize=d;var p=u.symbolScale=[d[0]/l,d[1]/l];p[f.index]*=(s.isHorizontal?-1:1)*o}function zp(t,i,e,r,n){var a=t.get(Np)||0;a&&(Tr.attr({scaleX:i[0],scaleY:i[1],rotation:e}),Tr.updateTransform(),a/=Tr.getLineScale(),a*=i[r.valueDim.index]),n.valueLineWidth=a||0}function Bp(t,i,e,r,n,a,o,l,s,u,f,c){var v=f.categoryDim,h=f.valueDim,d=c.pxSign,p=Math.max(i[h.index]+l,0),y=p;if(r){var S=Math.abs(s),x=je(t.get("symbolMargin"),"15%")+"",m=!1;x.lastIndexOf("!")===x.length-1&&(m=!0,x=x.slice(0,x.length-1));var _=$(x,i[h.index]),b=Math.max(p+_*2,0),w=m?0:_*2,D=af(r),T=D?r:oo((S+w)/b),A=S-T*p;_=A/2/(m?T:Math.max(T-1,1)),b=p+_*2,w=m?0:_*2,!D&&r!=="fixed"&&(T=u?oo((Math.abs(u)+w)/b):0),y=T*b-w,c.repeatTimes=T,c.symbolMargin=_}var I=d*(y/2),L=c.pathPosition=[];L[v.index]=e[v.wh]/2,L[h.index]=o==="start"?I:o==="end"?s-I:s/2,a&&(L[0]+=a[0],L[1]+=a[1]);var M=c.bundlePosition=[];M[v.index]=e[v.xy],M[h.index]=e[h.xy];var V=c.barRectShape=O({},e);V[h.wh]=d*Math.max(Math.abs(e[h.wh]),Math.abs(L[h.index]+I)),V[v.wh]=e[v.wh];var P=c.clipShape={};P[v.xy]=-e[v.xy],P[v.wh]=f.ecSize[v.wh],P[h.xy]=0,P[h.wh]=e[h.wh]}function Es(t){var i=t.symbolPatternSize,e=St(t.symbolType,-i/2,-i/2,i,i);return e.attr({culling:!0}),e.type!=="image"&&e.setStyle({strokeNoScale:!0}),e}function Rs(t,i,e,r){var n=t.__pictorialBundle,a=e.symbolSize,o=e.valueLineWidth,l=e.pathPosition,s=i.valueDim,u=e.repeatTimes||0,f=0,c=a[i.valueDim.index]+o+e.symbolMargin*2;for(Wn(t,function(p){p.__pictorialAnimationIndex=f,p.__pictorialRepeatTimes=u,f<u?At(p,null,d(f),e,r):At(p,null,{scaleX:0,scaleY:0},e,r,function(){n.remove(p)}),f++});f<u;f++){var v=Es(e);v.__pictorialAnimationIndex=f,v.__pictorialRepeatTimes=u,n.add(v);var h=d(f);At(v,{x:h.x,y:h.y,scaleX:0,scaleY:0},{scaleX:h.scaleX,scaleY:h.scaleY,rotation:h.rotation},e,r)}function d(p){var y=l.slice(),S=e.pxSign,x=p;return(e.symbolRepeatDirection==="start"?S>0:S<0)&&(x=u-1-p),y[s.index]=c*(x-u/2+.5)+l[s.index],{x:y[0],y:y[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function ks(t,i,e,r){var n=t.__pictorialBundle,a=t.__pictorialMainPath;a?At(a,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,r):(a=t.__pictorialMainPath=Es(e),n.add(a),At(a,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,r))}function zs(t,i,e){var r=O({},i.barRectShape),n=t.__pictorialBarRect;n?At(n,null,{shape:r},i,e):(n=t.__pictorialBarRect=new Pe({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,t.add(n))}function Bs(t,i,e,r){if(e.symbolClip){var n=t.__pictorialClipPath,a=O({},e.clipShape),o=i.valueDim,l=e.animationModel,s=e.dataIndex;if(n)be(n,{shape:a},l,s);else{a[o.wh]=0,n=new Pe({shape:a}),t.__pictorialBundle.setClipPath(n),t.__pictorialClipPath=n;var u={};u[o.wh]=e.clipShape[o.wh],Mn[r?"updateProps":"initProps"](n,{shape:u},l,s)}}}function io(t,i){var e=t.getItemModel(i);return e.getAnimationDelayParams=Op,e.isAnimationEnabled=Gp,e}function Op(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function Gp(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function ro(t,i,e,r){var n=new ne,a=new ne;return n.add(a),n.__pictorialBundle=a,a.x=e.bundlePosition[0],a.y=e.bundlePosition[1],e.symbolRepeat?Rs(n,i,e):ks(n,i,e),zs(n,e,r),Bs(n,i,e,r),n.__pictorialShapeStr=Os(t,e),n.__pictorialSymbolMeta=e,n}function Hp(t,i,e){var r=e.animationModel,n=e.dataIndex,a=t.__pictorialBundle;be(a,{x:e.bundlePosition[0],y:e.bundlePosition[1]},r,n),e.symbolRepeat?Rs(t,i,e,!0):ks(t,i,e,!0),zs(t,e,!0),Bs(t,i,e,!0)}function no(t,i,e,r){var n=r.__pictorialBarRect;n&&n.removeTextContent();var a=[];Wn(r,function(o){a.push(o)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(e=null),C(a,function(o){Ai(o,{scaleX:0,scaleY:0},e,i,function(){r.parent&&r.parent.remove(r)})}),t.setItemGraphicEl(i,null)}function Os(t,i){return[t.getItemVisual(i.dataIndex,"symbol")||"none",!!i.symbolRepeat,!!i.symbolClip].join(":")}function Wn(t,i,e){C(t.__pictorialBundle.children(),function(r){r!==t.__pictorialBarRect&&i.call(e,r)})}function At(t,i,e,r,n,a){i&&t.attr(i),r.symbolClip&&!n?e&&t.attr(e):e&&Mn[n?"updateProps":"initProps"](t,e,r.animationModel,r.dataIndex,a)}function ao(t,i,e){var r=e.dataIndex,n=e.itemModel,a=n.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),l=n.getModel(["blur","itemStyle"]).getItemStyle(),s=n.getModel(["select","itemStyle"]).getItemStyle(),u=n.getShallow("cursor"),f=a.get("focus"),c=a.get("blurScope"),v=a.get("scale");Wn(t,function(p){if(p instanceof bt){var y=p.style;p.useStyle(O({image:y.image,x:y.x,y:y.y,width:y.width,height:y.height},e.style))}else p.useStyle(e.style);var S=p.ensureState("emphasis");S.style=o,v&&(S.scaleX=p.scaleX*1.1,S.scaleY=p.scaleY*1.1),p.ensureState("blur").style=l,p.ensureState("select").style=s,u&&(p.cursor=u),p.z2=e.z2});var h=i.valueDim.posDesc[+(e.boundingLength>0)],d=t.__pictorialBarRect;d.ignoreClip=!0,Xe(d,He(n),{labelFetcher:i.seriesModel,labelDataIndex:r,defaultText:Yr(i.seriesModel.getData(),r),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:h}),Te(t,f,c,a.get("disabled"))}function oo(t){var i=Math.round(t);return Math.abs(t-i)<1e-4?i:Math.ceil(t)}var Wp=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return i.prototype.getInitialData=function(e){return e.stack=null,t.prototype.getInitialData.apply(this,arguments)},i.type="series.pictorialBar",i.dependencies=["grid"],i.defaultOption=$i(ha.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),i}(ha);function Fp(t){t.registerChartView(Ep),t.registerSeriesModel(Wp),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,se(of,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,lf("pictorialBar"))}var $p=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e._layers=[],e}return i.prototype.render=function(e,r,n){var a=e.getData(),o=this,l=this.group,s=e.getLayerSeries(),u=a.getLayout("layoutInfo"),f=u.rect,c=u.boundaryGap;l.x=0,l.y=f.y+c[0];function v(y){return y.name}var h=new Hi(this._layersSeries||[],s,v,v),d=[];h.add(F(p,this,"add")).update(F(p,this,"update")).remove(F(p,this,"remove")).execute();function p(y,S,x){var m=o._layers;if(y==="remove"){l.remove(m[S]);return}for(var _=[],b=[],w,D=s[S].indices,T=0;T<D.length;T++){var A=a.getItemLayout(D[T]),I=A.x,L=A.y0,M=A.y;_.push(I,L),b.push(I,L+M),w=a.getItemVisual(D[T],"style")}var V,P=a.getItemLayout(D[0]),j=e.getModel("label"),R=j.get("margin"),k=e.getModel("emphasis");if(y==="add"){var z=d[S]=new ne;V=new sf({shape:{points:_,stackedOnPoints:b,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),z.add(V),l.add(z),e.isAnimationEnabled()&&V.setClipPath(Up(V.getBoundingRect(),e,function(){V.removeClipPath()}))}else{var z=m[x];V=z.childAt(0),l.add(z),d[S]=z,be(V,{shape:{points:_,stackedOnPoints:b}},e),Lt(V)}Xe(V,He(e),{labelDataIndex:D[T-1],defaultText:a.getName(D[T-1]),inheritColor:w.fill},{normal:{verticalAlign:"middle"}}),V.setTextConfig({position:null,local:!0});var W=V.getTextContent();W&&(W.x=P.x-R,W.y=P.y0+P.y/2),V.useStyle(w),a.setItemGraphicEl(S,V),Ze(V,e),Te(V,k.get("focus"),k.get("blurScope"),k.get("disabled"))}this._layersSeries=s,this._layers=d},i.type="themeRiver",i}(me);function Up(t,i,e){var r=new Pe({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Pt(r,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},i,e),r}var Ar=2,Yp=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Dn(F(this.getData,this),F(this.getRawData,this))},i.prototype.fixData=function(e){var r=e.length,n={},a=$r(e,function(v){return n.hasOwnProperty(v[0]+"")||(n[v[0]+""]=-1),v[2]}),o=[];a.buckets.each(function(v,h){o.push({name:h,dataList:v})});for(var l=o.length,s=0;s<l;++s){for(var u=o[s].name,f=0;f<o[s].dataList.length;++f){var c=o[s].dataList[f][0]+"";n[c]=s}for(var c in n)n.hasOwnProperty(c)&&n[c]!==s&&(n[c]=s,e[r]=[c,0,u],r++)}return e},i.prototype.getInitialData=function(e,r){for(var n=this.getReferringComponents("singleAxis",Ln).models[0],a=n.get("type"),o=Fe(e.data,function(d){return d[2]!==void 0}),l=this.fixData(o||[]),s=[],u=this.nameMap=nt(),f=0,c=0;c<l.length;++c)s.push(l[c][Ar]),u.get(l[c][Ar])||(u.set(l[c][Ar],f),f++);var v=Sn(l,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Ur(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,h=new Le(v,this);return h.initData(l),h},i.prototype.getLayerSeries=function(){for(var e=this.getData(),r=e.count(),n=[],a=0;a<r;++a)n[a]=a;var o=e.mapDimension("single"),l=$r(n,function(u){return e.get("name",u)}),s=[];return l.buckets.each(function(u,f){u.sort(function(c,v){return e.get(o,c)-e.get(o,v)}),s.push({name:f,indices:u})}),s},i.prototype.getAxisTooltipData=function(e,r,n){B(e)||(e=e?[e]:[]);for(var a=this.getData(),o=this.getLayerSeries(),l=[],s=o.length,u,f=0;f<s;++f){for(var c=Number.MAX_VALUE,v=-1,h=o[f].indices.length,d=0;d<h;++d){var p=a.get(e[0],o[f].indices[d]),y=Math.abs(p-r);y<=c&&(u=p,c=y,v=o[f].indices[d])}l.push(v)}return{dataIndices:l,nestestValue:u}},i.prototype.formatTooltip=function(e,r,n){var a=this.getData(),o=a.getName(e),l=a.get(a.mapDimension("value"),e);return Ne("nameValue",{name:o,value:l})},i.type="series.themeRiver",i.dependencies=["singleAxis"],i.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},i}(we);function Xp(t,i){t.eachSeriesByType("themeRiver",function(e){var r=e.getData(),n=e.coordinateSystem,a={},o=n.getRect();a.rect=o;var l=e.get("boundaryGap"),s=n.getAxis();if(a.boundaryGap=l,s.orient==="horizontal"){l[0]=$(l[0],o.height),l[1]=$(l[1],o.height);var u=o.height-l[0]-l[1];lo(r,e,u)}else{l[0]=$(l[0],o.width),l[1]=$(l[1],o.width);var f=o.width-l[0]-l[1];lo(r,e,f)}r.setLayout("layoutInfo",a)})}function lo(t,i,e){if(t.count())for(var r=i.coordinateSystem,n=i.getLayerSeries(),a=t.mapDimension("single"),o=t.mapDimension("value"),l=H(n,function(y){return H(y.indices,function(S){var x=r.dataToPoint(t.get(a,S));return x[1]=t.get(o,S),x})}),s=Zp(l),u=s.y0,f=e/s.max,c=n.length,v=n[0].indices.length,h,d=0;d<v;++d){h=u[d]*f,t.setItemLayout(n[0].indices[d],{layerIndex:0,x:l[0][d][0],y0:h,y:l[0][d][1]*f});for(var p=1;p<c;++p)h+=l[p-1][d][1]*f,t.setItemLayout(n[p].indices[d],{layerIndex:p,x:l[p][d][0],y0:h,y:l[p][d][1]*f})}}function Zp(t){for(var i=t.length,e=t[0].length,r=[],n=[],a=0,o=0;o<e;++o){for(var l=0,s=0;s<i;++s)l+=t[s][o][1];l>a&&(a=l),r.push(l)}for(var u=0;u<e;++u)n[u]=(a-r[u])/2;a=0;for(var f=0;f<e;++f){var c=r[f]+n[f];c>a&&(a=c)}return{y0:n,max:a}}function Kp(t){t.registerChartView($p),t.registerSeriesModel(Yp),t.registerLayout(Xp),t.registerProcessor(An("themeRiver"))}var qp=2,Qp=4,so=function(t){N(i,t);function i(e,r,n,a){var o=t.call(this)||this;o.z2=qp,o.textConfig={inside:!0},ce(o).seriesIndex=r.seriesIndex;var l=new de({z2:Qp,silent:e.getModel().get(["label","silent"])});return o.setTextContent(l),o.updateData(!0,e,r,n,a),o}return i.prototype.updateData=function(e,r,n,a,o){this.node=r,r.piece=this,n=n||this._seriesModel,a=a||this._ecModel;var l=this;ce(l).dataIndex=r.dataIndex;var s=r.getModel(),u=s.getModel("emphasis"),f=r.getLayout(),c=O({},f);c.label=null;var v=r.getVisual("style");v.lineJoin="bevel";var h=r.getVisual("decal");h&&(v.decal=Ql(h,o));var d=da(s.getModel("itemStyle"),c,!0);O(c,d),C(uf,function(x){var m=l.ensureState(x),_=s.getModel([x,"itemStyle"]);m.style=_.getItemStyle();var b=da(_,c);b&&(m.shape=b)}),e?(l.setShape(c),l.shape.r=f.r0,Pt(l,{shape:{r:f.r}},n,r.dataIndex)):(be(l,{shape:c},n),Lt(l)),l.useStyle(v),this._updateLabel(n);var p=s.getShallow("cursor");p&&l.attr("cursor",p),this._seriesModel=n||this._seriesModel,this._ecModel=a||this._ecModel;var y=u.get("focus"),S=y==="ancestor"?r.getAncestorsIndices():y==="descendant"?r.getDescendantIndices():y;Te(this,S,u.get("blurScope"),u.get("disabled"))},i.prototype._updateLabel=function(e){var r=this,n=this.node.getModel(),a=n.getModel("label"),o=this.node.getLayout(),l=o.endAngle-o.startAngle,s=(o.startAngle+o.endAngle)/2,u=Math.cos(s),f=Math.sin(s),c=this,v=c.getTextContent(),h=this.node.dataIndex,d=a.get("minAngle")/180*Math.PI,p=a.get("show")&&!(d!=null&&Math.abs(l)<d);v.ignore=!p,C(ff,function(S){var x=S==="normal"?n.getModel("label"):n.getModel([S,"label"]),m=S==="normal",_=m?v:v.ensureState(S),b=e.getFormattedLabel(h,S);m&&(b=b||r.node.name),_.style=ye(x,{},null,S!=="normal",!0),b&&(_.style.text=b);var w=x.get("show");w!=null&&!m&&(_.ignore=!w);var D=y(x,"position"),T=m?c:c.states[S],A=T.style.fill;T.textConfig={outsideFill:x.get("color")==="inherit"?A:null,inside:D!=="outside"};var I,L=y(x,"distance")||0,M=y(x,"align"),V=y(x,"rotate"),P=Math.PI*.5,j=Math.PI*1.5,R=ui(V==="tangential"?Math.PI/2-s:s),k=R>P&&!vf(R-P)&&R<j;D==="outside"?(I=o.r+L,M=k?"right":"left"):!M||M==="center"?(l===2*Math.PI&&o.r0===0?I=0:I=(o.r+o.r0)/2,M="center"):M==="left"?(I=o.r0+L,M=k?"right":"left"):M==="right"&&(I=o.r-L,M=k?"left":"right"),_.style.align=M,_.style.verticalAlign=y(x,"verticalAlign")||"middle",_.x=I*u+o.cx,_.y=I*f+o.cy;var z=0;V==="radial"?z=ui(-s)+(k?Math.PI:0):V==="tangential"?z=ui(Math.PI/2-s)+(k?Math.PI:0):oi(V)&&(z=V*Math.PI/180),_.rotation=ui(z)});function y(S,x){var m=S.get(x);return m??a.get(x)}v.dirtyStyle()},i}(cf),an="sunburstRootToNode",uo="sunburstHighlight",Jp="sunburstUnhighlight";function eg(t){t.registerAction({type:an,update:"updateView"},function(i,e){e.eachComponent({mainType:"series",subType:"sunburst",query:i},r);function r(n,a){var o=qt(i,[an],n);if(o){var l=n.getViewRoot();l&&(i.direction=zn(l,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}}}),t.registerAction({type:uo,update:"none"},function(i,e,r){i=O({},i),e.eachComponent({mainType:"series",subType:"sunburst",query:i},n);function n(a){var o=qt(i,[uo],a);o&&(i.dataIndex=o.node.dataIndex)}r.dispatchAction(O(i,{type:"highlight"}))}),t.registerAction({type:Jp,update:"updateView"},function(i,e,r){i=O({},i),r.dispatchAction(O(i,{type:"downplay"}))})}var tg=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.render=function(e,r,n,a){var o=this;this.seriesModel=e,this.api=n,this.ecModel=r;var l=e.getData(),s=l.tree.root,u=e.getViewRoot(),f=this.group,c=e.get("renderLabelForZeroData"),v=[];u.eachNode(function(x){v.push(x)});var h=this._oldChildren||[];d(v,h),S(s,u),this._initEvents(),this._oldChildren=v;function d(x,m){if(x.length===0&&m.length===0)return;new Hi(m,x,_,_).add(b).update(b).remove(se(b,null)).execute();function _(w){return w.getId()}function b(w,D){var T=w==null?null:x[w],A=D==null?null:m[D];p(T,A)}}function p(x,m){if(!c&&x&&!x.getValue()&&(x=null),x!==s&&m!==s){if(m&&m.piece)x?(m.piece.updateData(!1,x,e,r,n),l.setItemGraphicEl(x.dataIndex,m.piece)):y(m);else if(x){var _=new so(x,e,r,n);f.add(_),l.setItemGraphicEl(x.dataIndex,_)}}}function y(x){x&&x.piece&&(f.remove(x.piece),x.piece=null)}function S(x,m){m.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,x,e,r,n):(o.virtualPiece=new so(x,e,r,n),f.add(o.virtualPiece)),m.piece.off("click"),o.virtualPiece.on("click",function(_){o._rootToNode(m.parentNode)})):o.virtualPiece&&(f.remove(o.virtualPiece),o.virtualPiece=null)}},i.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(r){var n=!1,a=e.seriesModel.getViewRoot();a.eachNode(function(o){if(!n&&o.piece&&o.piece===r.target){var l=o.getModel().get("nodeClick");if(l==="rootToNode")e._rootToNode(o);else if(l==="link"){var s=o.getModel(),u=s.get("link");if(u){var f=s.get("target",!0)||"_blank";jl(u,f)}}n=!0}})})},i.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:an,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},i.prototype.containPoint=function(e,r){var n=r.getData(),a=n.getItemLayout(0);if(a){var o=e[0]-a.cx,l=e[1]-a.cy,s=Math.sqrt(o*o+l*l);return s<=a.r&&s>=a.r0}},i.type="sunburst",i}(me),ig=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.ignoreStyleOnData=!0,e}return i.prototype.getInitialData=function(e,r){var n={name:e.name,children:e.data};Gs(n);var a=this._levelModels=H(e.levels||[],function(s){return new at(s,this,r)},this),o=kn.createTree(n,this,l);function l(s){s.wrapMethod("getItemModel",function(u,f){var c=o.getNodeByDataIndex(f),v=a[c.depth];return v&&(u.parentModel=v),u})}return o.data},i.prototype.optionUpdated=function(){this.resetViewRoot()},i.prototype.getDataParams=function(e){var r=t.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return r.treePathInfo=Xi(n,this),r},i.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},i.prototype.getViewRoot=function(){return this._viewRoot},i.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var r=this.getRawData().tree.root;(!e||e!==r&&!r.contains(e))&&(this._viewRoot=r)},i.prototype.enableAriaDecal=function(){vs(this)},i.type="series.sunburst",i.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},i}(we);function Gs(t){var i=0;C(t.children,function(r){Gs(r);var n=r.value;B(n)&&(n=n[0]),i+=n});var e=t.value;B(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=i),e<0&&(e=0),B(t.value)?t.value[0]=e:t.value=e}var fo=Math.PI/180;function rg(t,i,e){i.eachSeriesByType(t,function(r){var n=r.get("center"),a=r.get("radius");B(a)||(a=[0,a]),B(n)||(n=[n,n]);var o=e.getWidth(),l=e.getHeight(),s=Math.min(o,l),u=$(n[0],o),f=$(n[1],l),c=$(a[0],s/2),v=$(a[1],s/2),h=-r.get("startAngle")*fo,d=r.get("minAngle")*fo,p=r.getData().tree.root,y=r.getViewRoot(),S=y.depth,x=r.get("sort");x!=null&&Hs(y,x);var m=0;C(y.children,function(R){!isNaN(R.getValue())&&m++});var _=y.getValue(),b=Math.PI/(_||m)*2,w=y.depth>0,D=y.height-(w?-1:1),T=(v-c)/(D||1),A=r.get("clockwise"),I=r.get("stillShowZeroSum"),L=A?1:-1,M=function(R,k){if(R){var z=k;if(R!==p){var W=R.getValue(),Z=_===0&&I?b:W*b;Z<d&&(Z=d),z=k+L*Z;var Y=R.depth-S-(w?-1:1),J=c+T*Y,te=c+T*(Y+1),Q=r.getLevelModel(R);if(Q){var ae=Q.get("r0",!0),Ce=Q.get("r",!0),X=Q.get("radius",!0);X!=null&&(ae=X[0],Ce=X[1]),ae!=null&&(J=$(ae,s/2)),Ce!=null&&(te=$(Ce,s/2))}R.setLayout({angle:Z,startAngle:k,endAngle:z,clockwise:A,cx:u,cy:f,r0:J,r:te})}if(R.children&&R.children.length){var G=0;C(R.children,function(q){G+=M(q,k+G)})}return z-k}};if(w){var V=c,P=c+T,j=Math.PI*2;p.setLayout({angle:j,startAngle:h,endAngle:h+j,clockwise:A,cx:u,cy:f,r0:V,r:P})}M(y,h)})}function Hs(t,i){var e=t.children||[];t.children=ng(e,i),e.length&&C(t.children,function(r){Hs(r,i)})}function ng(t,i){if(le(i)){var e=H(t,function(n,a){var o=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return o}},index:a}});return e.sort(function(n,a){return i(n.params,a.params)}),H(e,function(n){return t[n.index]})}else{var r=i==="asc";return t.sort(function(n,a){var o=(n.getValue()-a.getValue())*(r?1:-1);return o===0?(n.dataIndex-a.dataIndex)*(r?-1:1):o})}}function ag(t){var i={};function e(r,n,a){for(var o=r;o&&o.depth>1;)o=o.parentNode;var l=n.getColorFromPalette(o.name||o.dataIndex+"",i);return r.depth>1&&ie(l)&&(l=hf(l,(r.depth-1)/(a-1)*.5)),l}t.eachSeriesByType("sunburst",function(r){var n=r.getData(),a=n.tree;a.eachNode(function(o){var l=o.getModel(),s=l.getModel("itemStyle").getItemStyle();s.fill||(s.fill=e(o,r,a.root.height));var u=n.ensureUniqueItemVisual(o.dataIndex,"style");O(u,s)})})}function og(t){t.registerChartView(tg),t.registerSeriesModel(ig),t.registerLayout(se(rg,"sunburst")),t.registerProcessor(se(An,"sunburst")),t.registerVisual(ag),eg(t)}var co={color:"fill",borderColor:"stroke"},lg={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Ue=Ve(),sg=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},i.prototype.getInitialData=function(e,r){return si(null,this)},i.prototype.getDataParams=function(e,r,n){var a=t.prototype.getDataParams.call(this,e,r);return n&&(a.info=Ue(n).info),a},i.type="series.custom",i.dependencies=["grid","polar","geo","singleAxis","calendar"],i.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},i}(we);function ug(t,i){return i=i||[0,0],H(["x","y"],function(e,r){var n=this.getAxis(e),a=i[r],o=t[r]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(a-o)-n.dataToCoord(a+o))},this)}function fg(t){var i=t.master.getRect();return{coordSys:{type:"cartesian2d",x:i.x,y:i.y,width:i.width,height:i.height},api:{coord:function(e){return t.dataToPoint(e)},size:F(ug,t)}}}function cg(t,i){return i=i||[0,0],H([0,1],function(e){var r=i[e],n=t[e]/2,a=[],o=[];return a[e]=r-n,o[e]=r+n,a[1-e]=o[1-e]=i[1-e],Math.abs(this.dataToPoint(a)[e]-this.dataToPoint(o)[e])},this)}function vg(t){var i=t.getBoundingRect();return{coordSys:{type:"geo",x:i.x,y:i.y,width:i.width,height:i.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:F(cg,t)}}}function hg(t,i){var e=this.getAxis(),r=i instanceof Array?i[0]:i,n=(t instanceof Array?t[0]:t)/2;return e.type==="category"?e.getBandWidth():Math.abs(e.dataToCoord(r-n)-e.dataToCoord(r+n))}function dg(t){var i=t.getRect();return{coordSys:{type:"singleAxis",x:i.x,y:i.y,width:i.width,height:i.height},api:{coord:function(e){return t.dataToPoint(e)},size:F(hg,t)}}}function pg(t,i){return i=i||[0,0],H(["Radius","Angle"],function(e,r){var n="get"+e+"Axis",a=this[n](),o=i[r],l=t[r]/2,s=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(o-l)-a.dataToCoord(o+l));return e==="Angle"&&(s=s*Math.PI/180),s},this)}function gg(t){var i=t.getRadiusAxis(),e=t.getAngleAxis(),r=i.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:r[1],r0:r[0]},api:{coord:function(n){var a=i.dataToRadius(n[0]),o=e.dataToAngle(n[1]),l=t.coordToPoint([a,o]);return l.push(a,o*Math.PI/180),l},size:F(pg,t)}}}function yg(t){var i=t.getRect(),e=t.getRangeInfo();return{coordSys:{type:"calendar",x:i.x,y:i.y,width:i.width,height:i.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(r,n){return t.dataToPoint(r,n)}}}}function Ws(t,i,e,r){return t&&(t.legacy||t.legacy!==!1&&!e&&!r&&i!=="tspan"&&(i==="text"||E(t,"text")))}function Fs(t,i,e){var r=t,n,a,o;if(i==="text")o=r;else{o={},E(r,"text")&&(o.text=r.text),E(r,"rich")&&(o.rich=r.rich),E(r,"textFill")&&(o.fill=r.textFill),E(r,"textStroke")&&(o.stroke=r.textStroke),E(r,"fontFamily")&&(o.fontFamily=r.fontFamily),E(r,"fontSize")&&(o.fontSize=r.fontSize),E(r,"fontStyle")&&(o.fontStyle=r.fontStyle),E(r,"fontWeight")&&(o.fontWeight=r.fontWeight),a={type:"text",style:o,silent:!0},n={};var l=E(r,"textPosition");e?n.position=l?r.textPosition:"inside":l&&(n.position=r.textPosition),E(r,"textPosition")&&(n.position=r.textPosition),E(r,"textOffset")&&(n.offset=r.textOffset),E(r,"textRotation")&&(n.rotation=r.textRotation),E(r,"textDistance")&&(n.distance=r.textDistance)}return vo(o,t),C(o.rich,function(s){vo(s,s)}),{textConfig:n,textContent:a}}function vo(t,i){i&&(i.font=i.textFont||i.font,E(i,"textStrokeWidth")&&(t.lineWidth=i.textStrokeWidth),E(i,"textAlign")&&(t.align=i.textAlign),E(i,"textVerticalAlign")&&(t.verticalAlign=i.textVerticalAlign),E(i,"textLineHeight")&&(t.lineHeight=i.textLineHeight),E(i,"textWidth")&&(t.width=i.textWidth),E(i,"textHeight")&&(t.height=i.textHeight),E(i,"textBackgroundColor")&&(t.backgroundColor=i.textBackgroundColor),E(i,"textPadding")&&(t.padding=i.textPadding),E(i,"textBorderColor")&&(t.borderColor=i.textBorderColor),E(i,"textBorderWidth")&&(t.borderWidth=i.textBorderWidth),E(i,"textBorderRadius")&&(t.borderRadius=i.textBorderRadius),E(i,"textBoxShadowColor")&&(t.shadowColor=i.textBoxShadowColor),E(i,"textBoxShadowBlur")&&(t.shadowBlur=i.textBoxShadowBlur),E(i,"textBoxShadowOffsetX")&&(t.shadowOffsetX=i.textBoxShadowOffsetX),E(i,"textBoxShadowOffsetY")&&(t.shadowOffsetY=i.textBoxShadowOffsetY))}function ho(t,i,e){var r=t;r.textPosition=r.textPosition||e.position||"inside",e.offset!=null&&(r.textOffset=e.offset),e.rotation!=null&&(r.textRotation=e.rotation),e.distance!=null&&(r.textDistance=e.distance);var n=r.textPosition.indexOf("inside")>=0,a=t.fill||"#000";po(r,i);var o=r.textFill==null;return n?o&&(r.textFill=e.insideFill||"#fff",!r.textStroke&&e.insideStroke&&(r.textStroke=e.insideStroke),!r.textStroke&&(r.textStroke=a),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(o&&(r.textFill=t.fill||e.outsideFill||"#000"),!r.textStroke&&e.outsideStroke&&(r.textStroke=e.outsideStroke)),r.text=i.text,r.rich=i.rich,C(i.rich,function(l){po(l,l)}),r}function po(t,i){i&&(E(i,"fill")&&(t.textFill=i.fill),E(i,"stroke")&&(t.textStroke=i.fill),E(i,"lineWidth")&&(t.textStrokeWidth=i.lineWidth),E(i,"font")&&(t.font=i.font),E(i,"fontStyle")&&(t.fontStyle=i.fontStyle),E(i,"fontWeight")&&(t.fontWeight=i.fontWeight),E(i,"fontSize")&&(t.fontSize=i.fontSize),E(i,"fontFamily")&&(t.fontFamily=i.fontFamily),E(i,"align")&&(t.textAlign=i.align),E(i,"verticalAlign")&&(t.textVerticalAlign=i.verticalAlign),E(i,"lineHeight")&&(t.textLineHeight=i.lineHeight),E(i,"width")&&(t.textWidth=i.width),E(i,"height")&&(t.textHeight=i.height),E(i,"backgroundColor")&&(t.textBackgroundColor=i.backgroundColor),E(i,"padding")&&(t.textPadding=i.padding),E(i,"borderColor")&&(t.textBorderColor=i.borderColor),E(i,"borderWidth")&&(t.textBorderWidth=i.borderWidth),E(i,"borderRadius")&&(t.textBorderRadius=i.borderRadius),E(i,"shadowColor")&&(t.textBoxShadowColor=i.shadowColor),E(i,"shadowBlur")&&(t.textBoxShadowBlur=i.shadowBlur),E(i,"shadowOffsetX")&&(t.textBoxShadowOffsetX=i.shadowOffsetX),E(i,"shadowOffsetY")&&(t.textBoxShadowOffsetY=i.shadowOffsetY),E(i,"textShadowColor")&&(t.textShadowColor=i.textShadowColor),E(i,"textShadowBlur")&&(t.textShadowBlur=i.textShadowBlur),E(i,"textShadowOffsetX")&&(t.textShadowOffsetX=i.textShadowOffsetX),E(i,"textShadowOffsetY")&&(t.textShadowOffsetY=i.textShadowOffsetY))}var $s={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},go=he($s);df(Zt,function(t,i){return t[i]=1,t},{});Zt.join(", ");var Ni=["","style","shape","extra"],It=Ve();function Fn(t,i,e,r,n){var a=t+"Animation",o=Jl(t,r,n)||{},l=It(i).userDuring;return o.duration>0&&(o.during=l?F(bg,{el:i,userDuring:l}):null,o.setToFinal=!0,o.scope=t),O(o,e[a]),o}function bi(t,i,e,r){r=r||{};var n=r.dataIndex,a=r.isInit,o=r.clearStyle,l=e.isAnimationEnabled(),s=It(t),u=i.style;s.userDuring=i.during;var f={},c={};if(Dg(t,i,c),mo("shape",i,c),mo("extra",i,c),!a&&l&&(wg(t,i,f),yo("shape",t,i,f),yo("extra",t,i,f),Tg(t,i,u,f)),c.style=u,mg(t,c,o),xg(t,i),l)if(a){var v={};C(Ni,function(d){var p=d?i[d]:i;p&&p.enterFrom&&(d&&(v[d]=v[d]||{}),O(d?v[d]:v,p.enterFrom))});var h=Fn("enter",t,i,e,n);h.duration>0&&t.animateFrom(v,h)}else Sg(t,i,n||0,e,f);Us(t,i),u?t.dirty():t.markRedraw()}function Us(t,i){for(var e=It(t).leaveToProps,r=0;r<Ni.length;r++){var n=Ni[r],a=n?i[n]:i;a&&a.leaveTo&&(e||(e=It(t).leaveToProps={}),n&&(e[n]=e[n]||{}),O(n?e[n]:e,a.leaveTo))}}function Ki(t,i,e,r){if(t){var n=t.parent,a=It(t).leaveToProps;if(a){var o=Fn("update",t,i,e,0);o.done=function(){n.remove(t)},t.animateTo(a,o)}else n.remove(t)}}function mt(t){return t==="all"}function mg(t,i,e){var r=i.style;if(!t.isGroup&&r){if(e){t.useStyle({});for(var n=t.animators,a=0;a<n.length;a++){var o=n[a];o.targetName==="style"&&o.changeTarget(t.style)}}t.setStyle(r)}i&&(i.style=null,i&&t.attr(i),i.style=r)}function Sg(t,i,e,r,n){if(n){var a=Fn("update",t,i,r,e);a.duration>0&&t.animateFrom(n,a)}}function xg(t,i){E(i,"silent")&&(t.silent=i.silent),E(i,"ignore")&&(t.ignore=i.ignore),t instanceof Wi&&E(i,"invisible")&&(t.invisible=i.invisible),t instanceof ut&&E(i,"autoBatch")&&(t.autoBatch=i.autoBatch)}var ze={},_g={setTransform:function(t,i){return ze.el[t]=i,this},getTransform:function(t){return ze.el[t]},setShape:function(t,i){var e=ze.el,r=e.shape||(e.shape={});return r[t]=i,e.dirtyShape&&e.dirtyShape(),this},getShape:function(t){var i=ze.el.shape;if(i)return i[t]},setStyle:function(t,i){var e=ze.el,r=e.style;return r&&(r[t]=i,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(t){var i=ze.el.style;if(i)return i[t]},setExtra:function(t,i){var e=ze.el.extra||(ze.el.extra={});return e[t]=i,this},getExtra:function(t){var i=ze.el.extra;if(i)return i[t]}};function bg(){var t=this,i=t.el;if(i){var e=It(i).userDuring,r=t.userDuring;if(e!==r){t.el=t.userDuring=null;return}ze.el=i,r(_g)}}function yo(t,i,e,r){var n=e[t];if(n){var a=i[t],o;if(a){var l=e.transition,s=n.transition;if(s)if(!o&&(o=r[t]={}),mt(s))O(o,a);else for(var u=Ke(s),f=0;f<u.length;f++){var c=u[f],v=a[c];o[c]=v}else if(mt(l)||De(l,t)>=0){!o&&(o=r[t]={});for(var h=he(a),f=0;f<h.length;f++){var c=h[f],v=a[c];Cg(n[c],v)&&(o[c]=v)}}}}}function mo(t,i,e){var r=i[t];if(r)for(var n=e[t]={},a=he(r),o=0;o<a.length;o++){var l=a[o];n[l]=pf(r[l])}}function wg(t,i,e){for(var r=i.transition,n=mt(r)?Zt:Ke(r||[]),a=0;a<n.length;a++){var o=n[a];if(!(o==="style"||o==="shape"||o==="extra")){var l=t[o];e[o]=l}}}function Dg(t,i,e){for(var r=0;r<go.length;r++){var n=go[r],a=$s[n],o=i[n];o&&(e[a[0]]=o[0],e[a[1]]=o[1])}for(var r=0;r<Zt.length;r++){var l=Zt[r];i[l]!=null&&(e[l]=i[l])}}function Tg(t,i,e,r){if(e){var n=t.style,a;if(n){var o=e.transition,l=i.transition;if(o&&!mt(o)){var s=Ke(o);!a&&(a=r.style={});for(var u=0;u<s.length;u++){var f=s[u],c=n[f];a[f]=c}}else if(t.getAnimationStyleProps&&(mt(l)||mt(o)||De(l,"style")>=0)){var v=t.getAnimationStyleProps(),h=v?v.style:null;if(h){!a&&(a=r.style={});for(var d=he(e),u=0;u<d.length;u++){var f=d[u];if(h[f]){var c=n[f];a[f]=c}}}}}}}function Cg(t,i){return gf(t)?t!==i:t!=null&&isFinite(t)}var Ys=Ve(),Ag=["percent","easing","shape","style","extra"];function Xs(t){t.stopAnimation("keyframe"),t.attr(Ys(t))}function Ei(t,i,e){if(!(!e.isAnimationEnabled()||!i)){if(B(i)){C(i,function(l){Ei(t,l,e)});return}var r=i.keyframes,n=i.duration;if(e&&n==null){var a=Jl("enter",e,0);n=a&&a.duration}if(!(!r||!n)){var o=Ys(t);C(Ni,function(l){if(!(l&&!t[l])){var s;r.sort(function(u,f){return u.percent-f.percent}),C(r,function(u){var f=t.animators,c=l?u[l]:u;if(c){var v=he(c);if(l||(v=Fe(v,function(p){return De(Ag,p)<0})),!!v.length){s||(s=t.animate(l,i.loop,!0),s.scope="keyframe");for(var h=0;h<f.length;h++)f[h]!==s&&f[h].targetName===s.targetName&&f[h].stopTracks(v);l&&(o[l]=o[l]||{});var d=l?o[l]:o;C(v,function(p){d[p]=((l?t[l]:t)||{})[p]}),s.whenWithKeys(n*u.percent,c,v,u.easing)}}}),s&&s.delay(i.delay||0).duration(n).start(i.easing)}})}}}var Ye="emphasis",tt="normal",$n="blur",Un="select",st=[tt,Ye,$n,Un],Ir={normal:["itemStyle"],emphasis:[Ye,"itemStyle"],blur:[$n,"itemStyle"],select:[Un,"itemStyle"]},Lr={normal:["label"],emphasis:[Ye,"label"],blur:[$n,"label"],select:[Un,"label"]},Ig=["x","y"],Lg="e\0\0",Ae={normal:{},emphasis:{},blur:{},select:{}},Pg={cartesian2d:fg,geo:vg,single:dg,polar:gg,calendar:yg};function on(t){return t instanceof ut}function ln(t){return t instanceof Wi}function Mg(t,i){i.copyTransform(t),ln(i)&&ln(t)&&(i.setStyle(t.style),i.z=t.z,i.z2=t.z2,i.zlevel=t.zlevel,i.invisible=t.invisible,i.ignore=t.ignore,on(i)&&on(t)&&i.setShape(t.shape))}var Vg=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.render=function(e,r,n,a){this._progressiveEls=null;var o=this._data,l=e.getData(),s=this.group,u=So(e,l,r,n);o||s.removeAll(),l.diff(o).add(function(c){Pr(n,null,c,u(c,a),e,s,l)}).remove(function(c){var v=o.getItemGraphicEl(c);v&&Ki(v,Ue(v).option,e)}).update(function(c,v){var h=o.getItemGraphicEl(v);Pr(n,h,c,u(c,a),e,s,l)}).execute();var f=e.get("clip",!0)?jn(e.coordinateSystem,!1,e):null;f?s.setClipPath(f):s.removeClipPath(),this._data=l},i.prototype.incrementalPrepareRender=function(e,r,n){this.group.removeAll(),this._data=null},i.prototype.incrementalRender=function(e,r,n,a,o){var l=r.getData(),s=So(r,l,n,a),u=this._progressiveEls=[];function f(h){h.isGroup||(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var c=e.start;c<e.end;c++){var v=Pr(null,null,c,s(c,o),r,this.group,l);v&&(v.traverse(f),u.push(v))}},i.prototype.eachRendered=function(e){Vn(this._progressiveEls||this.group,e)},i.prototype.filterForExposedEvent=function(e,r,n,a){var o=r.element;if(o==null||n.name===o)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1},i.type="custom",i}(me);function Yn(t){var i=t.type,e;if(i==="path"){var r=t.shape,n=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,a=qs(r);e=Sf(a,null,n,r.layout||"center"),Ue(e).customPathData=a}else if(i==="image")e=new bt({}),Ue(e).customImagePath=t.style.image;else if(i==="text")e=new de({});else if(i==="group")e=new ne;else{if(i==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=es(i);if(!o){var l="";Xl(l)}e=new o}return Ue(e).customGraphicType=i,e.name=t.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function Xn(t,i,e,r,n,a,o){Xs(i);var l=n&&n.normal.cfg;l&&i.setTextConfig(l),r&&r.transition==null&&(r.transition=Ig);var s=r&&r.style;if(s){if(i.type==="text"){var u=s;E(u,"textFill")&&(u.fill=u.textFill),E(u,"textStroke")&&(u.stroke=u.textStroke)}var f=void 0,c=on(i)?s.decal:null;t&&c&&(c.dirty=!0,f=Ql(c,t)),s.__decalPattern=f}if(ln(i)&&s){var f=s.__decalPattern;f&&(s.decal=f)}bi(i,r,a,{dataIndex:e,isInit:o,clearStyle:!0}),Ei(i,r.keyframeAnimation,a)}function Zs(t,i,e,r,n){var a=i.isGroup?null:i,o=n&&n[t].cfg;if(a){var l=a.ensureState(t);if(r===!1){var s=a.getState(t);s&&(s.style=null)}else l.style=r||null;o&&(l.textConfig=o),Ci(a)}}function jg(t,i,e){if(!t.isGroup){var r=t,n=e.currentZ,a=e.currentZLevel;r.z=n,r.zlevel=a;var o=i.z2;o!=null&&(r.z2=o||0);for(var l=0;l<st.length;l++)Ng(r,i,st[l])}}function Ng(t,i,e){var r=e===tt,n=r?i:Ri(i,e),a=n?n.z2:null,o;a!=null&&(o=r?t:t.ensureState(e),o.z2=a||0)}function So(t,i,e,r){var n=t.get("renderItem"),a=t.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):Pg[a.type](a));for(var l=Ge({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:_,style:w,ordinalRawValue:b,styleEmphasis:D,visual:I,barLayout:L,currentSeriesIndices:M,font:V},o.api||{}),s={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:o.coordSys,dataInsideLength:i.count(),encode:Eg(t.getData())},u,f,c={},v={},h={},d={},p=0;p<st.length;p++){var y=st[p];h[y]=t.getModel(Ir[y]),d[y]=t.getModel(Lr[y])}function S(P){return P===u?f||(f=i.getItemModel(P)):i.getItemModel(P)}function x(P,j){return i.hasItemOption?P===u?c[j]||(c[j]=S(P).getModel(Ir[j])):S(P).getModel(Ir[j]):h[j]}function m(P,j){return i.hasItemOption?P===u?v[j]||(v[j]=S(P).getModel(Lr[j])):S(P).getModel(Lr[j]):d[j]}return function(P,j){return u=P,f=null,c={},v={},n&&n(Ge({dataIndexInside:P,dataIndex:i.getRawIndex(P),actionType:j?j.type:null},s),l)};function _(P,j){return j==null&&(j=u),i.getStore().get(i.getDimensionIndex(P||0),j)}function b(P,j){j==null&&(j=u),P=P||0;var R=i.getDimensionInfo(P);if(!R){var k=i.getDimensionIndex(P);return k>=0?i.getStore().get(k,j):void 0}var z=i.get(R.name,j),W=R&&R.ordinalMeta;return W?W.categories[z]:z}function w(P,j){j==null&&(j=u);var R=i.getItemVisual(j,"style"),k=R&&R.fill,z=R&&R.opacity,W=x(j,tt).getItemStyle();k!=null&&(W.fill=k),z!=null&&(W.opacity=z);var Z={inheritColor:ie(k)?k:"#000"},Y=m(j,tt),J=ye(Y,null,Z,!1,!0);J.text=Y.getShallow("show")?ge(t.getFormattedLabel(j,tt),Yr(i,j)):null;var te=pa(Y,Z,!1);return A(P,W),W=ho(W,J,te),P&&T(W,P),W.legacy=!0,W}function D(P,j){j==null&&(j=u);var R=x(j,Ye).getItemStyle(),k=m(j,Ye),z=ye(k,null,null,!0,!0);z.text=k.getShallow("show")?li(t.getFormattedLabel(j,Ye),t.getFormattedLabel(j,tt),Yr(i,j)):null;var W=pa(k,null,!0);return A(P,R),R=ho(R,z,W),P&&T(R,P),R.legacy=!0,R}function T(P,j){for(var R in j)E(j,R)&&(P[R]=j[R])}function A(P,j){P&&(P.textFill&&(j.textFill=P.textFill),P.textPosition&&(j.textPosition=P.textPosition))}function I(P,j){if(j==null&&(j=u),E(co,P)){var R=i.getItemVisual(j,"style");return R?R[co[P]]:null}if(E(lg,P))return i.getItemVisual(j,P)}function L(P){if(a.type==="cartesian2d"){var j=a.getBaseAxis();return yf(Ge({axis:j},P))}}function M(){return e.getCurrentSeriesIndices()}function V(P){return mf(P,e)}}function Eg(t){var i={};return C(t.dimensions,function(e){var r=t.getDimensionInfo(e);if(!r.isExtraCoord){var n=r.coordDim,a=i[n]=i[n]||[];a[r.coordDimIndex]=t.getDimensionIndex(e)}}),i}function Pr(t,i,e,r,n,a,o){if(!r){a.remove(i);return}var l=Zn(t,i,e,r,n,a);return l&&o.setItemGraphicEl(e,l),l&&Te(l,r.focus,r.blurScope,r.emphasisDisabled),l}function Zn(t,i,e,r,n,a){var o=-1,l=i;i&&Ks(i,r,n)&&(o=De(a.childrenRef(),i),i=null);var s=!i,u=i;u?u.clearStates():(u=Yn(r),l&&Mg(l,u)),r.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Ae.normal.cfg=Ae.normal.conOpt=Ae.emphasis.cfg=Ae.emphasis.conOpt=Ae.blur.cfg=Ae.blur.conOpt=Ae.select.cfg=Ae.select.conOpt=null,Ae.isLegacy=!1,kg(u,e,r,n,s,Ae),Rg(u,e,r,n,s),Xn(t,u,e,r,Ae,n,s),E(r,"info")&&(Ue(u).info=r.info);for(var f=0;f<st.length;f++){var c=st[f];if(c!==tt){var v=Ri(r,c),h=Kn(r,v,c);Zs(c,u,v,h,Ae)}}return jg(u,r,n),r.type==="group"&&zg(t,u,e,r,n),o>=0?a.replaceAt(u,o):a.add(u),u}function Ks(t,i,e){var r=Ue(t),n=i.type,a=i.shape,o=i.style;return e.isUniversalTransitionEnabled()||n!=null&&n!==r.customGraphicType||n==="path"&&Hg(a)&&qs(a)!==r.customPathData||n==="image"&&E(o,"image")&&o.image!==r.customImagePath}function Rg(t,i,e,r,n){var a=e.clipPath;if(a===!1)t&&t.getClipPath()&&t.removeClipPath();else if(a){var o=t.getClipPath();o&&Ks(o,a,r)&&(o=null),o||(o=Yn(a),t.setClipPath(o)),Xn(null,o,i,a,null,r,n)}}function kg(t,i,e,r,n,a){if(!t.isGroup){xo(e,null,a),xo(e,Ye,a);var o=a.normal.conOpt,l=a.emphasis.conOpt,s=a.blur.conOpt,u=a.select.conOpt;if(o!=null||l!=null||u!=null||s!=null){var f=t.getTextContent();if(o===!1)f&&t.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},f?f.clearStates():(f=Yn(o),t.setTextContent(f)),Xn(null,f,i,o,null,r,n);for(var c=o&&o.style,v=0;v<st.length;v++){var h=st[v];if(h!==tt){var d=a[h].conOpt;Zs(h,f,d,Kn(o,d,h),null)}}c?f.dirty():f.markRedraw()}}}}function xo(t,i,e){var r=i?Ri(t,i):t,n=i?Kn(t,r,Ye):t.style,a=t.type,o=r?r.textConfig:null,l=t.textContent,s=l?i?Ri(l,i):l:null;if(n&&(e.isLegacy||Ws(n,a,!!o,!!s))){e.isLegacy=!0;var u=Fs(n,a,!i);!o&&u.textConfig&&(o=u.textConfig),!s&&u.textContent&&(s=u.textContent)}if(!i&&s){var f=s;!f.type&&(f.type="text")}var c=i?e[i]:e.normal;c.cfg=o,c.conOpt=s}function Ri(t,i){return i?t?t[i]:null:t}function Kn(t,i,e){var r=i&&i.style;return r==null&&e===Ye&&t&&(r=t.styleEmphasis),r}function zg(t,i,e,r,n){var a=r.children,o=a?a.length:0,l=r.$mergeChildren,s=l==="byName"||r.diffChildrenByName,u=l===!1;if(!(!o&&!s&&!u)){if(s){Og({api:t,oldChildren:i.children()||[],newChildren:a||[],dataIndex:e,seriesModel:n,group:i});return}u&&i.removeAll();for(var f=0;f<o;f++){var c=a[f],v=i.childAt(f);c?(c.ignore==null&&(c.ignore=!1),Zn(t,v,e,c,n,i)):v.ignore=!0}for(var h=i.childCount()-1;h>=f;h--){var d=i.childAt(h);Bg(i,d,n)}}}function Bg(t,i,e){i&&Ki(i,Ue(t).option,e)}function Og(t){new Hi(t.oldChildren,t.newChildren,_o,_o,t).add(bo).update(bo).remove(Gg).execute()}function _o(t,i){var e=t&&t.name;return e??Lg+i}function bo(t,i){var e=this.context,r=t!=null?e.newChildren[t]:null,n=i!=null?e.oldChildren[i]:null;Zn(e.api,n,e.dataIndex,r,e.seriesModel,e.group)}function Gg(t){var i=this.context,e=i.oldChildren[t];e&&Ki(e,Ue(e).option,i.seriesModel)}function qs(t){return t&&(t.pathData||t.d)}function Hg(t){return t&&(E(t,"pathData")||E(t,"d"))}function Wg(t){t.registerChartView(Vg),t.registerSeriesModel(sg)}function sn(t,i){i=i||{};var e=t.coordinateSystem,r=t.axis,n={},a=r.position,o=r.orient,l=e.getRect(),s=[l.x,l.x+l.width,l.y,l.y+l.height],u={horizontal:{top:s[2],bottom:s[3]},vertical:{left:s[0],right:s[1]}};n.position=[o==="vertical"?u.vertical[a]:s[0],o==="horizontal"?u.horizontal[a]:s[3]];var f={horizontal:0,vertical:1};n.rotation=Math.PI/2*f[o];var c={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=c[a],t.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),je(i.labelInside,t.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var v=i.rotate;return v==null&&(v=t.get(["axisLabel","rotate"])),n.labelRotation=a==="top"?-v:v,n.z2=1,n}var Fg=["axisLine","axisTickLabel","axisName"],$g=["splitArea","splitLine"],Ug=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.axisPointerClass="SingleAxisPointer",e}return i.prototype.render=function(e,r,n,a){var o=this.group;o.removeAll();var l=this._axisGroup;this._axisGroup=new ne;var s=sn(e),u=new Wl(e,s);C(Fg,u.add,u),o.add(this._axisGroup),o.add(u.getGroup()),C($g,function(f){e.get([f,"show"])&&Yg[f](this,this.group,this._axisGroup,e)},this),Fl(l,this._axisGroup,e),t.prototype.render.call(this,e,r,n,a)},i.prototype.remove=function(){xf(this)},i.type="singleAxis",i}(ts),Yg={splitLine:function(t,i,e,r){var n=r.axis;if(!n.scale.isBlank()){var a=r.getModel("splitLine"),o=a.getModel("lineStyle"),l=o.get("color");l=l instanceof Array?l:[l];for(var s=o.get("width"),u=r.coordinateSystem.getRect(),f=n.isHorizontal(),c=[],v=0,h=n.getTicksCoords({tickModel:a}),d=[],p=[],y=0;y<h.length;++y){var S=n.toGlobalCoord(h[y].coord);f?(d[0]=S,d[1]=u.y,p[0]=S,p[1]=u.y+u.height):(d[0]=u.x,d[1]=S,p[0]=u.x+u.width,p[1]=S);var x=new Xr({shape:{x1:d[0],y1:d[1],x2:p[0],y2:p[1]},silent:!0});_f(x.shape,s);var m=v++%l.length;c[m]=c[m]||[],c[m].push(x)}for(var _=o.getLineStyle(["color"]),y=0;y<c.length;++y)i.add(bf(c[y],{style:Ge({stroke:l[y%l.length]},_),silent:!0}))}},splitArea:function(t,i,e,r){wf(t,e,r,r)}},wi=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.getCoordSysModel=function(){return this},i.type="singleAxis",i.layoutMode="box",i.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},i}(Je);Mt(wi,Gl.prototype);var Xg=function(t){N(i,t);function i(e,r,n,a,o){var l=t.call(this,e,r,n)||this;return l.type=a||"value",l.position=o||"bottom",l}return i.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},i.prototype.pointToData=function(e,r){return this.coordinateSystem.pointToData(e)[0]},i}(In),Qs=["single"],Zg=function(){function t(i,e,r){this.type="single",this.dimension="single",this.dimensions=Qs,this.axisPointerEnabled=!0,this.model=i,this._init(i,e,r)}return t.prototype._init=function(i,e,r){var n=this.dimension,a=new Xg(n,kl(i),[0,0],i.get("type"),i.get("position")),o=a.type==="category";a.onBand=o&&i.get("boundaryGap"),a.inverse=i.get("inverse"),a.orient=i.get("orient"),i.axis=a,a.model=i,a.coordinateSystem=this,this._axis=a},t.prototype.update=function(i,e){i.eachSeries(function(r){if(r.coordinateSystem===this){var n=r.getData();C(n.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(n,a)},this),zl(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(i,e){this._rect=We({left:i.get("left"),top:i.get("top"),right:i.get("right"),bottom:i.get("bottom"),width:i.get("width"),height:i.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var i=this._rect,e=this._axis,r=e.isHorizontal(),n=r?[0,i.width]:[0,i.height],a=e.inverse?1:0;e.setExtent(n[a],n[1-a]),this._updateAxisTransform(e,r?i.x:i.y)},t.prototype._updateAxisTransform=function(i,e){var r=i.getExtent(),n=r[0]+r[1],a=i.isHorizontal();i.toGlobalCoord=a?function(o){return o+e}:function(o){return n-o+e},i.toLocalCoord=a?function(o){return o-e}:function(o){return n-o+e}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(i){var e=this.getRect(),r=this.getAxis(),n=r.orient;return n==="horizontal"?r.contain(r.toLocalCoord(i[0]))&&i[1]>=e.y&&i[1]<=e.y+e.height:r.contain(r.toLocalCoord(i[1]))&&i[0]>=e.y&&i[0]<=e.y+e.height},t.prototype.pointToData=function(i){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(i[e.orient==="horizontal"?0:1]))]},t.prototype.dataToPoint=function(i){var e=this.getAxis(),r=this.getRect(),n=[],a=e.orient==="horizontal"?0:1;return i instanceof Array&&(i=i[0]),n[a]=e.toGlobalCoord(e.dataToCoord(+i)),n[1-a]=a===0?r.y+r.height/2:r.x+r.width/2,n},t.prototype.convertToPixel=function(i,e,r){var n=wo(e);return n===this?this.dataToPoint(r):null},t.prototype.convertFromPixel=function(i,e,r){var n=wo(e);return n===this?this.pointToData(r):null},t}();function wo(t){var i=t.seriesModel,e=t.singleAxisModel;return e&&e.coordinateSystem||i&&i.coordinateSystem}function Kg(t,i){var e=[];return t.eachComponent("singleAxis",function(r,n){var a=new Zg(r,t,i);a.name="single_"+n,a.resize(r,i),r.coordinateSystem=a,e.push(a)}),t.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var n=r.getReferringComponents("singleAxis",Ln).models[0];r.coordinateSystem=n&&n.coordinateSystem}}),e}var qg={create:Kg,dimensions:Qs},Do=["x","y"],Qg=["width","height"],Jg=function(t){N(i,t);function i(){return t!==null&&t.apply(this,arguments)||this}return i.prototype.makeElOption=function(e,r,n,a,o){var l=n.axis,s=l.coordinateSystem,u=Mr(s,1-ki(l)),f=s.dataToPoint(r)[0],c=a.get("type");if(c&&c!=="none"){var v=Df(a),h=e0[c](l,f,u);h.style=v,e.graphicKey=h.type,e.pointer=h}var d=sn(n);Tf(r,e,d,n,a,o)},i.prototype.getHandleTransform=function(e,r,n){var a=sn(r,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var o=Cf(r.axis,e,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},i.prototype.updateHandleTransform=function(e,r,n,a){var o=n.axis,l=o.coordinateSystem,s=ki(o),u=Mr(l,s),f=[e.x,e.y];f[s]+=r[s],f[s]=Math.min(u[1],f[s]),f[s]=Math.max(u[0],f[s]);var c=Mr(l,1-s),v=(c[1]+c[0])/2,h=[v,v];return h[s]=f[s],{x:f[0],y:f[1],rotation:e.rotation,cursorPoint:h,tooltipOption:{verticalAlign:"middle"}}},i}(Af),e0={line:function(t,i,e){var r=If([i,e[0]],[i,e[1]],ki(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,i,e){var r=t.getBandWidth(),n=e[1]-e[0];return{type:"Rect",shape:Lf([i-r/2,e[0]],[r,n],ki(t))}}};function ki(t){return t.isHorizontal()?0:1}function Mr(t,i){var e=t.getRect();return[e[Do[i]],e[Do[i]]+e[Qg[i]]]}var t0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.type="single",i}(Qe);function i0(t){U(is),ts.registerAxisPointerClass("SingleAxisPointer",Jg),t.registerComponentView(t0),t.registerComponentView(Ug),t.registerComponentModel(wi),$l(t,"single",wi,wi.defaultOption),t.registerCoordinateSystem("single",qg)}var r0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.init=function(e,r,n){var a=Pf(e);t.prototype.init.apply(this,arguments),To(e,a)},i.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),To(this.option,e)},i.prototype.getCellSize=function(){return this.option.cellSize},i.type="calendar",i.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},i}(Je);function To(t,i){var e=t.cellSize,r;B(e)?r=e:r=t.cellSize=[e,e],r.length===1&&(r[1]=r[0]);var n=H([0,1],function(a){return Mf(i,a)&&(r[a]="auto"),r[a]!=null&&r[a]!=="auto"});rs(t,i,{type:"box",ignoreSize:n})}var n0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.render=function(e,r,n){var a=this.group;a.removeAll();var o=e.coordinateSystem,l=o.getRangeInfo(),s=o.getOrient(),u=r.getLocaleModel();this._renderDayRect(e,l,a),this._renderLines(e,l,s,a),this._renderYearText(e,l,s,a),this._renderMonthText(e,u,s,a),this._renderWeekText(e,u,l,s,a)},i.prototype._renderDayRect=function(e,r,n){for(var a=e.coordinateSystem,o=e.getModel("itemStyle").getItemStyle(),l=a.getCellWidth(),s=a.getCellHeight(),u=r.start.time;u<=r.end.time;u=a.getNextNDay(u,1).time){var f=a.dataToRect([u],!1).tl,c=new Pe({shape:{x:f[0],y:f[1],width:l,height:s},cursor:"default",style:o});n.add(c)}},i.prototype._renderLines=function(e,r,n,a){var o=this,l=e.coordinateSystem,s=e.getModel(["splitLine","lineStyle"]).getLineStyle(),u=e.get(["splitLine","show"]),f=s.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=r.start,v=0;c.time<=r.end.time;v++){d(c.formatedDate),v===0&&(c=l.getDateInfo(r.start.y+"-"+r.start.m));var h=c.date;h.setMonth(h.getMonth()+1),c=l.getDateInfo(h)}d(l.getNextNDay(r.end.time,1).formatedDate);function d(p){o._firstDayOfMonth.push(l.getDateInfo(p)),o._firstDayPoints.push(l.dataToRect([p],!1).tl);var y=o._getLinePointsOfOneWeek(e,p,n);o._tlpoints.push(y[0]),o._blpoints.push(y[y.length-1]),u&&o._drawSplitline(y,s,a)}u&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,f,n),s,a),u&&this._drawSplitline(o._getEdgesPoints(o._blpoints,f,n),s,a)},i.prototype._getEdgesPoints=function(e,r,n){var a=[e[0].slice(),e[e.length-1].slice()],o=n==="horizontal"?0:1;return a[0][o]=a[0][o]-r/2,a[1][o]=a[1][o]+r/2,a},i.prototype._drawSplitline=function(e,r,n){var a=new Cn({z2:20,shape:{points:e},style:r});n.add(a)},i.prototype._getLinePointsOfOneWeek=function(e,r,n){for(var a=e.coordinateSystem,o=a.getDateInfo(r),l=[],s=0;s<7;s++){var u=a.getNextNDay(o.time,s),f=a.dataToRect([u.time],!1);l[2*u.day]=f.tl,l[2*u.day+1]=f[n==="horizontal"?"bl":"tr"]}return l},i.prototype._formatterLabel=function(e,r){return ie(e)&&e?Vf(e,r):le(e)?e(r):r.nameMap},i.prototype._yearTextPositionControl=function(e,r,n,a,o){var l=r[0],s=r[1],u=["center","bottom"];a==="bottom"?(s+=o,u=["center","top"]):a==="left"?l-=o:a==="right"?(l+=o,u=["center","top"]):s-=o;var f=0;return(a==="left"||a==="right")&&(f=Math.PI/2),{rotation:f,x:l,y:s,style:{align:u[0],verticalAlign:u[1]}}},i.prototype._renderYearText=function(e,r,n,a){var o=e.getModel("yearLabel");if(o.get("show")){var l=o.get("margin"),s=o.get("position");s||(s=n!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],f=(u[0][0]+u[1][0])/2,c=(u[0][1]+u[1][1])/2,v=n==="horizontal"?0:1,h={top:[f,u[v][1]],bottom:[f,u[1-v][1]],left:[u[1-v][0],c],right:[u[v][0],c]},d=r.start.y;+r.end.y>+r.start.y&&(d=d+"-"+r.end.y);var p=o.get("formatter"),y={start:r.start.y,end:r.end.y,nameMap:d},S=this._formatterLabel(p,y),x=new de({z2:30,style:ye(o,{text:S})});x.attr(this._yearTextPositionControl(x,h[s],n,s,l)),a.add(x)}},i.prototype._monthTextPositionControl=function(e,r,n,a,o){var l="left",s="top",u=e[0],f=e[1];return n==="horizontal"?(f=f+o,r&&(l="center"),a==="start"&&(s="bottom")):(u=u+o,r&&(s="middle"),a==="start"&&(l="right")),{x:u,y:f,align:l,verticalAlign:s}},i.prototype._renderMonthText=function(e,r,n,a){var o=e.getModel("monthLabel");if(o.get("show")){var l=o.get("nameMap"),s=o.get("margin"),u=o.get("position"),f=o.get("align"),c=[this._tlpoints,this._blpoints];(!l||ie(l))&&(l&&(r=ga(l)||r),l=r.get(["time","monthAbbr"])||[]);var v=u==="start"?0:1,h=n==="horizontal"?0:1;s=u==="start"?-s:s;for(var d=f==="center",p=0;p<c[v].length-1;p++){var y=c[v][p].slice(),S=this._firstDayOfMonth[p];if(d){var x=this._firstDayPoints[p];y[h]=(x[h]+c[0][p+1][h])/2}var m=o.get("formatter"),_=l[+S.m-1],b={yyyy:S.y,yy:(S.y+"").slice(2),MM:S.m,M:+S.m,nameMap:_},w=this._formatterLabel(m,b),D=new de({z2:30,style:O(ye(o,{text:w}),this._monthTextPositionControl(y,d,n,u,s))});a.add(D)}}},i.prototype._weekTextPositionControl=function(e,r,n,a,o){var l="center",s="middle",u=e[0],f=e[1],c=n==="start";return r==="horizontal"?(u=u+a+(c?1:-1)*o[0]/2,l=c?"right":"left"):(f=f+a+(c?1:-1)*o[1]/2,s=c?"bottom":"top"),{x:u,y:f,align:l,verticalAlign:s}},i.prototype._renderWeekText=function(e,r,n,a,o){var l=e.getModel("dayLabel");if(l.get("show")){var s=e.coordinateSystem,u=l.get("position"),f=l.get("nameMap"),c=l.get("margin"),v=s.getFirstDayOfWeek();if(!f||ie(f)){f&&(r=ga(f)||r);var h=r.get(["time","dayOfWeekShort"]);f=h||H(r.get(["time","dayOfWeekAbbr"]),function(b){return b[0]})}var d=s.getNextNDay(n.end.time,7-n.lweek).time,p=[s.getCellWidth(),s.getCellHeight()];c=$(c,Math.min(p[1],p[0])),u==="start"&&(d=s.getNextNDay(n.start.time,-(7+n.fweek)).time,c=-c);for(var y=0;y<7;y++){var S=s.getNextNDay(d,y),x=s.dataToRect([S.time],!1).center,m=y;m=Math.abs((y+v)%7);var _=new de({z2:30,style:O(ye(l,{text:f[m]}),this._weekTextPositionControl(x,a,u,c,p))});o.add(_)}}},i.type="calendar",i}(Qe),Vr=864e5,a0=function(){function t(i,e,r){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=i}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(i){i=jf(i);var e=i.getFullYear(),r=i.getMonth()+1,n=r<10?"0"+r:""+r,a=i.getDate(),o=a<10?"0"+a:""+a,l=i.getDay();return l=Math.abs((l+7-this.getFirstDayOfWeek())%7),{y:e+"",m:n,d:o,day:l,time:i.getTime(),formatedDate:e+"-"+n+"-"+o,date:i}},t.prototype.getNextNDay=function(i,e){return e=e||0,e===0?this.getDateInfo(i):(i=new Date(this.getDateInfo(i).time),i.setDate(i.getDate()+e),this.getDateInfo(i))},t.prototype.update=function(i,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,n=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),l=this._orient==="horizontal"?[r,7]:[7,r];C([0,1],function(c){f(a,c)&&(o[n[c]]=a[c]*l[c])});var s={width:e.getWidth(),height:e.getHeight()},u=this._rect=We(o,s);C([0,1],function(c){f(a,c)||(a[c]=u[n[c]]/l[c])});function f(c,v){return c[v]!=null&&c[v]!=="auto"}this._sw=a[0],this._sh=a[1]},t.prototype.dataToPoint=function(i,e){B(i)&&(i=i[0]),e==null&&(e=!0);var r=this.getDateInfo(i),n=this._rangeInfo,a=r.formatedDate;if(e&&!(r.time>=n.start.time&&r.time<n.end.time+Vr))return[NaN,NaN];var o=r.day,l=this._getRangeInfo([n.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+l*this._sh+this._sh/2]:[this._rect.x+l*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},t.prototype.pointToData=function(i){var e=this.pointToDate(i);return e&&e.time},t.prototype.dataToRect=function(i,e){var r=this.dataToPoint(i,e);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},t.prototype.pointToDate=function(i){var e=Math.floor((i[0]-this._rect.x)/this._sw)+1,r=Math.floor((i[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,e-1,n):this._getDateByWeeksAndDay(e,r-1,n)},t.prototype.convertToPixel=function(i,e,r){var n=Co(e);return n===this?n.dataToPoint(r):null},t.prototype.convertFromPixel=function(i,e,r){var n=Co(e);return n===this?n.pointToData(r):null},t.prototype.containPoint=function(i){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var i=this._model.get("range"),e;if(B(i)&&i.length===1&&(i=i[0]),B(i))e=i;else{var r=i.toString();if(/^\d{4}$/.test(r)&&(e=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var n=this.getDateInfo(r),a=n.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);e=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(e=[r,r])}if(!e)return i;var l=this._getRangeInfo(e);return l.start.time>l.end.time&&e.reverse(),e},t.prototype._getRangeInfo=function(i){var e=[this.getDateInfo(i[0]),this.getDateInfo(i[1])],r;e[0].time>e[1].time&&(r=!0,e.reverse());var n=Math.floor(e[1].time/Vr)-Math.floor(e[0].time/Vr)+1,a=new Date(e[0].time),o=a.getDate(),l=e[1].date.getDate();a.setDate(o+n-1);var s=a.getDate();if(s!==l)for(var u=a.getTime()-e[1].time>0?1:-1;(s=a.getDate())!==l&&(a.getTime()-e[1].time)*u>0;)n-=u,a.setDate(s-u);var f=Math.floor((n+e[0].day+6)/7),c=r?-f+1:f-1;return r&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:n,weeks:f,nthWeek:c,fweek:e[0].day,lweek:e[1].day}},t.prototype._getDateByWeeksAndDay=function(i,e,r){var n=this._getRangeInfo(r);if(i>n.weeks||i===0&&e<n.fweek||i===n.weeks&&e>n.lweek)return null;var a=(i-1)*7-n.fweek+e,o=new Date(n.start.time);return o.setDate(+n.start.d+a),this.getDateInfo(o)},t.create=function(i,e){var r=[];return i.eachComponent("calendar",function(n){var a=new t(n);r.push(a),n.coordinateSystem=a}),i.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=r[n.get("calendarIndex")||0])}),r},t.dimensions=["time","value"],t}();function Co(t){var i=t.calendarModel,e=t.seriesModel,r=i?i.coordinateSystem:e?e.coordinateSystem:null;return r}function o0(t){t.registerComponentModel(r0),t.registerComponentView(n0),t.registerCoordinateSystem("calendar",a0)}function l0(t,i){var e=t.existing;if(i.id=t.keyInfo.id,!i.type&&e&&(i.type=e.type),i.parentId==null){var r=i.parentOption;r?i.parentId=r.id:e&&(i.parentId=e.parentId)}i.parentOption=null}function Ao(t,i){var e;return C(i,function(r){t[r]!=null&&t[r]!=="auto"&&(e=!0)}),e}function s0(t,i,e){var r=O({},e),n=t[i],a=e.$action||"merge";a==="merge"?n?(Re(n,r,!0),rs(n,r,{ignoreSize:!0}),Ef(e,n),gi(e,n),gi(e,n,"shape"),gi(e,n,"style"),gi(e,n,"extra"),e.clipPath=n.clipPath):t[i]=r:a==="replace"?t[i]=r:a==="remove"&&n&&(t[i]=null)}var Js=["transition","enterFrom","leaveTo"],u0=Js.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function gi(t,i,e){if(e&&(!t[e]&&i[e]&&(t[e]={}),t=t[e],i=i[e]),!(!t||!i))for(var r=e?Js:u0,n=0;n<r.length;n++){var a=r[n];t[a]==null&&i[a]!=null&&(t[a]=i[a])}}function f0(t,i){if(t&&(t.hv=i.hv=[Ao(i,["left","right"]),Ao(i,["top","bottom"])],t.type==="group")){var e=t,r=i;e.width==null&&(e.width=r.width=0),e.height==null&&(e.height=r.height=0)}}var c0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.preventAutoZ=!0,e}return i.prototype.mergeOption=function(e,r){var n=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,e,r),this.option.elements=n},i.prototype.optionUpdated=function(e,r){var n=this.option,a=(r?n:e).elements,o=n.elements=r?[]:n.elements,l=[];this._flatten(a,l,null);var s=Nf(o,l,"normalMerge"),u=this._elOptionsToUpdate=[];C(s,function(f,c){var v=f.newOption;v&&(u.push(v),l0(f,v),s0(o,c,v),f0(o[c],v))},this),n.elements=Fe(o,function(f){return f&&delete f.$action,f!=null})},i.prototype._flatten=function(e,r,n){C(e,function(a){if(a){n&&(a.parentOption=n),r.push(a);var o=a.children;o&&o.length&&this._flatten(o,r,a),delete a.children}},this)},i.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},i.type="graphic",i.defaultOption={elements:[]},i}(Je),Io={path:null,compoundPath:null,group:ne,image:bt,text:de},Ie=Ve(),v0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.init=function(){this._elMap=nt()},i.prototype.render=function(e,r,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},i.prototype._updateElements=function(e){var r=e.useElOptionsToUpdate();if(r){var n=this._elMap,a=this.group,o=e.get("z"),l=e.get("zlevel");C(r,function(s){var u=$e(s.id,null),f=u!=null?n.get(u):null,c=$e(s.parentId,null),v=c!=null?n.get(c):a,h=s.type,d=s.style;h==="text"&&d&&s.hv&&s.hv[1]&&(d.textVerticalAlign=d.textBaseline=d.verticalAlign=d.align=null);var p=s.textContent,y=s.textConfig;if(d&&Ws(d,h,!!y,!!p)){var S=Fs(d,h,!0);!y&&S.textConfig&&(y=s.textConfig=S.textConfig),!p&&S.textContent&&(p=S.textContent)}var x=h0(s),m=s.$action||"merge",_=m==="merge",b=m==="replace";if(_){var w=!f,D=f;w?D=Lo(u,v,s.type,n):(D&&(Ie(D).isNew=!1),Xs(D)),D&&(bi(D,x,e,{isInit:w}),Po(D,s,o,l))}else if(b){Di(f,s,n,e);var T=Lo(u,v,s.type,n);T&&(bi(T,x,e,{isInit:!0}),Po(T,s,o,l))}else m==="remove"&&(Us(f,s),Di(f,s,n,e));var A=n.get(u);if(A&&p)if(_){var I=A.getTextContent();I?I.attr(p):A.setTextContent(new de(p))}else b&&A.setTextContent(new de(p));if(A){var L=s.clipPath;if(L){var M=L.type,V=void 0,w=!1;if(_){var P=A.getClipPath();w=!P||Ie(P).type!==M,V=w?un(M):P}else b&&(w=!0,V=un(M));A.setClipPath(V),bi(V,L,e,{isInit:w}),Ei(V,L.keyframeAnimation,e)}var j=Ie(A);A.setTextConfig(y),j.option=s,d0(A,e,s),Rf({el:A,componentModel:e,itemName:A.name,itemTooltipOption:s.tooltip}),Ei(A,s.keyframeAnimation,e)}})}},i.prototype._relocate=function(e,r){for(var n=e.option.elements,a=this.group,o=this._elMap,l=r.getWidth(),s=r.getHeight(),u=["x","y"],f=0;f<n.length;f++){var c=n[f],v=$e(c.id,null),h=v!=null?o.get(v):null;if(!(!h||!h.isGroup)){var d=h.parent,p=d===a,y=Ie(h),S=Ie(d);y.width=$(y.option.width,p?l:S.width)||0,y.height=$(y.option.height,p?s:S.height)||0}}for(var f=n.length-1;f>=0;f--){var c=n[f],v=$e(c.id,null),h=v!=null?o.get(v):null;if(h){var d=h.parent,S=Ie(d),x=d===a?{width:l,height:s}:{width:S.width,height:S.height},m={},_=xn(h,c,x,null,{hv:c.hv,boundingMode:c.bounding},m);if(!Ie(h).isNew&&_){for(var b=c.transition,w={},D=0;D<u.length;D++){var T=u[D],A=m[T];b&&(mt(b)||De(b,T)>=0)?w[T]=A:h[T]=A}be(h,w,e,0)}else h.attr(m)}}},i.prototype._clear=function(){var e=this,r=this._elMap;r.each(function(n){Di(n,Ie(n).option,r,e._lastGraphicModel)}),this._elMap=nt()},i.prototype.dispose=function(){this._clear()},i.type="graphic",i}(Qe);function un(t){var i=E(Io,t)?Io[t]:es(t),e=new i({});return Ie(e).type=t,e}function Lo(t,i,e,r){var n=un(e);return i.add(n),r.set(t,n),Ie(n).id=t,Ie(n).isNew=!0,n}function Di(t,i,e,r){var n=t&&t.parent;n&&(t.type==="group"&&t.traverse(function(a){Di(a,i,e,r)}),Ki(t,i,r),e.removeKey(Ie(t).id))}function Po(t,i,e,r){t.isGroup||C([["cursor",Wi.prototype.cursor],["zlevel",r||0],["z",e||0],["z2",0]],function(n){var a=n[0];E(i,a)?t[a]=ge(i[a],n[1]):t[a]==null&&(t[a]=n[1])}),C(he(i),function(n){if(n.indexOf("on")===0){var a=i[n];t[n]=le(a)?a:null}}),E(i,"draggable")&&(t.draggable=i.draggable),i.name!=null&&(t.name=i.name),i.id!=null&&(t.id=i.id)}function h0(t){return t=O({},t),C(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(kf),function(i){delete t[i]}),t}function d0(t,i,e){var r=ce(t).eventData;!t.silent&&!t.ignore&&!r&&(r=ce(t).eventData={componentType:"graphic",componentIndex:i.componentIndex,name:t.name}),r&&(r.info=e.info)}function p0(t){t.registerComponentModel(c0),t.registerComponentView(v0),t.registerPreprocessor(function(i){var e=i.graphic;B(e)?!e[0]||!e[0].elements?i.graphic=[{elements:e}]:i.graphic=[i.graphic[0]]:e&&!e.elements&&(i.graphic=[{elements:[e]}])})}var g0=["rect","polygon","keep","clear"];function y0(t,i){var e=Ke(t?t.brush:[]);if(e.length){var r=[];C(e,function(s){var u=s.hasOwnProperty("toolbox")?s.toolbox:[];u instanceof Array&&(r=r.concat(u))});var n=t&&t.toolbox;B(n)&&(n=n[0]),n||(n={feature:{}},t.toolbox=[n]);var a=n.feature||(n.feature={}),o=a.brush||(a.brush={}),l=o.type||(o.type=[]);l.push.apply(l,r),m0(l),i&&!l.length&&l.push.apply(l,g0)}}function m0(t){var i={};C(t,function(e){i[e]=1}),t.length=0,C(i,function(e,r){t.push(r)})}var Mo=C;function Vo(t){if(t){for(var i in t)if(t.hasOwnProperty(i))return!0}}function fn(t,i,e){var r={};return Mo(i,function(a){var o=r[a]=n();Mo(t[a],function(l,s){if(fe.isValidType(s)){var u={type:s,visual:l};e&&e(u,a),o[s]=new fe(u),s==="opacity"&&(u=oe(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new fe(u))}})}),r;function n(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function eu(t,i,e){var r;C(e,function(n){i.hasOwnProperty(n)&&Vo(i[n])&&(r=!0)}),r&&C(e,function(n){i.hasOwnProperty(n)&&Vo(i[n])?t[n]=oe(i[n]):delete t[n]})}function S0(t,i,e,r,n,a){var o={};C(t,function(c){var v=fe.prepareVisualTypes(i[c]);o[c]=v});var l;function s(c){return ns(e,l,c)}function u(c,v){as(e,l,c,v)}e.each(f);function f(c,v){l=c;var h=e.getRawDataItem(l);if(!(h&&h.visualMap===!1))for(var d=r.call(n,c),p=i[d],y=o[d],S=0,x=y.length;S<x;S++){var m=y[S];p[m]&&p[m].applyVisual(c,s,u)}}}function x0(t,i,e,r){var n={};return C(t,function(a){var o=fe.prepareVisualTypes(i[a]);n[a]=o}),{progress:function(o,l){var s;r!=null&&(s=l.getDimensionIndex(r));function u(b){return ns(l,c,b)}function f(b,w){as(l,c,b,w)}for(var c,v=l.getStore();(c=o.next())!=null;){var h=l.getRawDataItem(c);if(!(h&&h.visualMap===!1))for(var d=r!=null?v.get(s,c):c,p=e(d),y=i[p],S=n[p],x=0,m=S.length;x<m;x++){var _=S[x];y[_]&&y[_].applyVisual(d,u,f)}}}}}function _0(t){var i=t.brushType,e={point:function(r){return jo[i].point(r,e,t)},rect:function(r){return jo[i].rect(r,e,t)}};return e}var jo={lineX:No(0),lineY:No(1),rect:{point:function(t,i,e){return t&&e.boundingRect.contain(t[0],t[1])},rect:function(t,i,e){return t&&e.boundingRect.intersect(t)}},polygon:{point:function(t,i,e){return t&&e.boundingRect.contain(t[0],t[1])&&Vt(e.range,t[0],t[1])},rect:function(t,i,e){var r=e.range;if(!t||r.length<=1)return!1;var n=t.x,a=t.y,o=t.width,l=t.height,s=r[0];if(Vt(r,n,a)||Vt(r,n+o,a)||Vt(r,n,a+l)||Vt(r,n+o,a+l)||ot.create(t).contain(s[0],s[1])||fi(n,a,n+o,a,r)||fi(n,a,n,a+l,r)||fi(n+o,a,n+o,a+l,r)||fi(n,a+l,n+o,a+l,r))return!0}}};function No(t){var i=["x","y"],e=["width","height"];return{point:function(r,n,a){if(r){var o=a.range,l=r[t];return Rt(l,o)}},rect:function(r,n,a){if(r){var o=a.range,l=[r[i[t]],r[i[t]]+r[e[t]]];return l[1]<l[0]&&l.reverse(),Rt(l[0],o)||Rt(l[1],o)||Rt(o[0],l)||Rt(o[1],l)}}}}function Rt(t,i){return i[0]<=t&&t<=i[1]}var Eo=["inBrush","outOfBrush"],jr="__ecBrushSelect",cn="__ecInBrushSelectEvent";function tu(t){t.eachComponent({mainType:"brush"},function(i){var e=i.brushTargetManager=new zf(i.option,t);e.setInputRanges(i.areas,t)})}function b0(t,i,e){var r=[],n,a;t.eachComponent({mainType:"brush"},function(o){e&&e.type==="takeGlobalCursor"&&o.setBrushOption(e.key==="brush"?e.brushOption:{brushType:!1})}),tu(t),t.eachComponent({mainType:"brush"},function(o,l){var s={brushId:o.id,brushIndex:l,brushName:o.name,areas:oe(o.areas),selected:[]};r.push(s);var u=o.option,f=u.brushLink,c=[],v=[],h=[],d=!1;l||(n=u.throttleType,a=u.throttleDelay);var p=H(o.areas,function(b){var w=C0[b.brushType],D=Ge({boundingRect:w?w(b):void 0},b);return D.selectors=_0(D),D}),y=fn(o.option,Eo,function(b){b.mappingMethod="fixed"});B(f)&&C(f,function(b){c[b]=1});function S(b){return f==="all"||!!c[b]}function x(b){return!!b.length}t.eachSeries(function(b,w){var D=h[w]=[];b.subType==="parallel"?m(b,w):_(b,w,D)});function m(b,w){var D=b.coordinateSystem;d=d||D.hasAxisBrushed(),S(w)&&D.eachActiveState(b.getData(),function(T,A){T==="active"&&(v[A]=1)})}function _(b,w,D){if(!(!b.brushSelector||T0(o,w))&&(C(p,function(A){o.brushTargetManager.controlSeries(A,b,t)&&D.push(A),d=d||x(D)}),S(w)&&x(D))){var T=b.getData();T.each(function(A){Ro(b,D,T,A)&&(v[A]=1)})}}t.eachSeries(function(b,w){var D={seriesId:b.id,seriesIndex:w,seriesName:b.name,dataIndex:[]};s.selected.push(D);var T=h[w],A=b.getData(),I=S(w)?function(L){return v[L]?(D.dataIndex.push(A.getRawIndex(L)),"inBrush"):"outOfBrush"}:function(L){return Ro(b,T,A,L)?(D.dataIndex.push(A.getRawIndex(L)),"inBrush"):"outOfBrush"};(S(w)?d:x(T))&&S0(Eo,y,A,I)})}),w0(i,n,a,r,e)}function w0(t,i,e,r,n){if(n){var a=t.getZr();if(!a[cn]){a[jr]||(a[jr]=D0);var o=Rl(a,jr,e,i);o(t,r)}}}function D0(t,i){if(!t.isDisposed()){var e=t.getZr();e[cn]=!0,t.dispatchAction({type:"brushSelect",batch:i}),e[cn]=!1}}function Ro(t,i,e,r){for(var n=0,a=i.length;n<a;n++){var o=i[n];if(t.brushSelector(r,e,o.selectors,o))return!0}}function T0(t,i){var e=t.option.seriesIndex;return e!=null&&e!=="all"&&(B(e)?De(e,i)<0:i!==e)}var C0={rect:function(t){return ko(t.range)},polygon:function(t){for(var i,e=t.range,r=0,n=e.length;r<n;r++){i=i||[[1/0,-1/0],[1/0,-1/0]];var a=e[r];a[0]<i[0][0]&&(i[0][0]=a[0]),a[0]>i[0][1]&&(i[0][1]=a[0]),a[1]<i[1][0]&&(i[1][0]=a[1]),a[1]>i[1][1]&&(i[1][1]=a[1])}return i&&ko(i)}};function ko(t){return new ot(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var A0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.init=function(e,r){this.ecModel=e,this.api=r,this.model,(this._brushController=new Hl(r.getZr())).on("brush",F(this._onBrush,this)).mount()},i.prototype.render=function(e,r,n,a){this.model=e,this._updateController(e,r,n,a)},i.prototype.updateTransform=function(e,r,n,a){tu(r),this._updateController(e,r,n,a)},i.prototype.updateVisual=function(e,r,n,a){this.updateTransform(e,r,n,a)},i.prototype.updateView=function(e,r,n,a){this._updateController(e,r,n,a)},i.prototype._updateController=function(e,r,n,a){(!a||a.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},i.prototype.dispose=function(){this._brushController.dispose()},i.prototype._onBrush=function(e){var r=this.model.id,n=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:oe(n),$from:r}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:oe(n),$from:r})},i.type="brush",i}(Qe),I0="#ddd",L0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.areas=[],e.brushOption={},e}return i.prototype.optionUpdated=function(e,r){var n=this.option;!r&&eu(n,e,["inBrush","outOfBrush"]);var a=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:I0},a.hasOwnProperty("liftZ")||(a.liftZ=5)},i.prototype.setAreas=function(e){e&&(this.areas=H(e,function(r){return zo(this.option,r)},this))},i.prototype.setBrushOption=function(e){this.brushOption=zo(this.option,e),this.brushType=this.brushOption.brushType},i.type="brush",i.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],i.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},i}(Je);function zo(t,i){return Re({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new at(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},i,!0)}var P0=["rect","polygon","lineX","lineY","keep","clear"],M0=function(t){N(i,t);function i(){return t!==null&&t.apply(this,arguments)||this}return i.prototype.render=function(e,r,n){var a,o,l;r.eachComponent({mainType:"brush"},function(s){a=s.brushType,o=s.brushOption.brushMode||"single",l=l||!!s.areas.length}),this._brushType=a,this._brushMode=o,C(e.get("type",!0),function(s){e.setIconStatus(s,(s==="keep"?o==="multiple":s==="clear"?l:s===a)?"emphasis":"normal")})},i.prototype.updateView=function(e,r,n){this.render(e,r,n)},i.prototype.getIcons=function(){var e=this.model,r=e.get("icon",!0),n={};return C(e.get("type",!0),function(a){r[a]&&(n[a]=r[a])}),n},i.prototype.onclick=function(e,r,n){var a=this._brushType,o=this._brushMode;n==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?a:a===n?!1:n,brushMode:n==="keep"?o==="multiple"?"single":"multiple":o}})},i.getDefaultOption=function(e){var r={show:!0,type:P0.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])};return r},i}(Bf);function V0(t){t.registerComponentView(A0),t.registerComponentModel(L0),t.registerPreprocessor(y0),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,b0),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(i,e){e.eachComponent({mainType:"brush",query:i},function(r){r.setAreas(i.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},xt),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},xt),Of("brush",M0)}var Bo=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.layoutMode="box",e}return i.prototype.init=function(e,r,n){this.mergeDefaultAndTheme(e,n),this._initData()},i.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this._initData()},i.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var r=this._data.count();this.option.loop?e=(e%r+r)%r:(e>=r&&(e=r-1),e<0&&(e=0)),this.option.currentIndex=e},i.prototype.getCurrentIndex=function(){return this.option.currentIndex},i.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},i.prototype.setPlayState=function(e){this.option.autoPlay=!!e},i.prototype.getPlayState=function(){return!!this.option.autoPlay},i.prototype._initData=function(){var e=this.option,r=e.data||[],n=e.axisType,a=this._names=[],o;n==="category"?(o=[],C(r,function(u,f){var c=$e(Gf(u),""),v;Me(u)?(v=oe(u),v.value=f):v=f,o.push(v),a.push(c)})):o=r;var l={category:"ordinal",time:"time",value:"number"}[n]||"number",s=this._data=new Le([{name:"value",type:l}],this);s.initData(o,a)},i.prototype.getData=function(){return this._data},i.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},i.type="timeline",i.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},i}(Je),iu=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.type="timeline.slider",i.defaultOption=$i(Bo.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),i}(Bo);Mt(iu,En.prototype);var j0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.type="timeline",i}(Qe),N0=function(t){N(i,t);function i(e,r,n,a){var o=t.call(this,e,r,n)||this;return o.type=a||"value",o}return i.prototype.getLabelModel=function(){return this.model.getModel("label")},i.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},i}(In),Nr=Math.PI,Oo=Ve(),E0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.init=function(e,r){this.api=r},i.prototype.render=function(e,r,n){if(this.model=e,this.api=n,this.ecModel=r,this.group.removeAll(),e.get("show",!0)){var a=this._layout(e,n),o=this._createGroup("_mainGroup"),l=this._createGroup("_labelGroup"),s=this._axis=this._createAxis(a,e);e.formatTooltip=function(u){var f=s.scale.getLabel({value:u});return Ne("nameValue",{noName:!0,value:f})},C(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](a,o,s,e)},this),this._renderAxisLabel(a,l,s,e),this._position(a,e)}this._doPlayStop(),this._updateTicksStatus()},i.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},i.prototype.dispose=function(){this._clearTimer()},i.prototype._layout=function(e,r){var n=e.get(["label","position"]),a=e.get("orient"),o=k0(e,r),l;n==null||n==="auto"?l=a==="horizontal"?o.y+o.height/2<r.getHeight()/2?"-":"+":o.x+o.width/2<r.getWidth()/2?"+":"-":ie(n)?l={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][n]:l=n;var s={horizontal:"center",vertical:l>=0||l==="+"?"left":"right"},u={horizontal:l>=0||l==="+"?"top":"bottom",vertical:"middle"},f={horizontal:0,vertical:Nr/2},c=a==="vertical"?o.height:o.width,v=e.getModel("controlStyle"),h=v.get("show",!0),d=h?v.get("itemSize"):0,p=h?v.get("itemGap"):0,y=d+p,S=e.get(["label","rotate"])||0;S=S*Nr/180;var x,m,_,b=v.get("position",!0),w=h&&v.get("showPlayBtn",!0),D=h&&v.get("showPrevBtn",!0),T=h&&v.get("showNextBtn",!0),A=0,I=c;b==="left"||b==="bottom"?(w&&(x=[0,0],A+=y),D&&(m=[A,0],A+=y),T&&(_=[I-d,0],I-=y)):(w&&(x=[I-d,0],I-=y),D&&(m=[0,0],A+=y),T&&(_=[I-d,0],I-=y));var L=[A,I];return e.get("inverse")&&L.reverse(),{viewRect:o,mainLength:c,orient:a,rotation:f[a],labelRotation:S,labelPosOpt:l,labelAlign:e.get(["label","align"])||s[a],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||u[a],playPosition:x,prevBtnPosition:m,nextBtnPosition:_,axisExtent:L,controlSize:d,controlGap:p}},i.prototype._position=function(e,r){var n=this._mainGroup,a=this._labelGroup,o=e.viewRect;if(e.orient==="vertical"){var l=_n(),s=o.x,u=o.y+o.height;Xt(l,l,[-s,-u]),Bl(l,l,-Nr/2),Xt(l,l,[s,u]),o=o.clone(),o.applyTransform(l)}var f=x(o),c=x(n.getBoundingRect()),v=x(a.getBoundingRect()),h=[n.x,n.y],d=[a.x,a.y];d[0]=h[0]=f[0][0];var p=e.labelPosOpt;if(p==null||ie(p)){var y=p==="+"?0:1;m(h,c,f,1,y),m(d,v,f,1,1-y)}else{var y=p>=0?0:1;m(h,c,f,1,y),d[1]=h[1]+p}n.setPosition(h),a.setPosition(d),n.rotation=a.rotation=e.rotation,S(n),S(a);function S(_){_.originX=f[0][0]-_.x,_.originY=f[1][0]-_.y}function x(_){return[[_.x,_.x+_.width],[_.y,_.y+_.height]]}function m(_,b,w,D,T){_[D]+=w[D][T]-b[D][T]}},i.prototype._createAxis=function(e,r){var n=r.getData(),a=r.get("axisType"),o=R0(r,a);o.getTicks=function(){return n.mapArray(["value"],function(u){return{value:u}})};var l=n.getDataExtent("value");o.setExtent(l[0],l[1]),o.calcNiceTicks();var s=new N0("value",o,e.axisExtent,a);return s.model=r,s},i.prototype._createGroup=function(e){var r=this[e]=new ne;return this.group.add(r),r},i.prototype._renderAxisLine=function(e,r,n,a){var o=n.getExtent();if(a.get(["lineStyle","show"])){var l=new Xr({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:O({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(l);var s=this._progressLine=new Xr({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:Ge({lineCap:"round",lineWidth:l.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(s)}},i.prototype._renderAxisTick=function(e,r,n,a){var o=this,l=a.getData(),s=n.scale.getTicks();this._tickSymbols=[],C(s,function(u){var f=n.dataToCoord(u.value),c=l.getItemModel(u.value),v=c.getModel("itemStyle"),h=c.getModel(["emphasis","itemStyle"]),d=c.getModel(["progress","itemStyle"]),p={x:f,y:0,onclick:F(o._changeTimeline,o,u.value)},y=Go(c,v,r,p);y.ensureState("emphasis").style=h.getItemStyle(),y.ensureState("progress").style=d.getItemStyle(),ir(y);var S=ce(y);c.get("tooltip")?(S.dataIndex=u.value,S.dataModel=a):S.dataIndex=S.dataModel=null,o._tickSymbols.push(y)})},i.prototype._renderAxisLabel=function(e,r,n,a){var o=this,l=n.getLabelModel();if(l.get("show")){var s=a.getData(),u=n.getViewLabels();this._tickLabels=[],C(u,function(f){var c=f.tickValue,v=s.getItemModel(c),h=v.getModel("label"),d=v.getModel(["emphasis","label"]),p=v.getModel(["progress","label"]),y=n.dataToCoord(f.tickValue),S=new de({x:y,y:0,rotation:e.labelRotation-e.rotation,onclick:F(o._changeTimeline,o,c),silent:!1,style:ye(h,{text:f.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});S.ensureState("emphasis").style=ye(d),S.ensureState("progress").style=ye(p),r.add(S),ir(S),Oo(S).dataIndex=c,o._tickLabels.push(S)})}},i.prototype._renderControl=function(e,r,n,a){var o=e.controlSize,l=e.rotation,s=a.getModel("controlStyle").getItemStyle(),u=a.getModel(["emphasis","controlStyle"]).getItemStyle(),f=a.getPlayState(),c=a.get("inverse",!0);v(e.nextBtnPosition,"next",F(this._changeTimeline,this,c?"-":"+")),v(e.prevBtnPosition,"prev",F(this._changeTimeline,this,c?"+":"-")),v(e.playPosition,f?"stop":"play",F(this._handlePlayClick,this,!f),!0);function v(h,d,p,y){if(h){var S=Zr(ge(a.get(["controlStyle",d+"BtnSize"]),o),o),x=[0,-S/2,S,S],m=z0(a,d+"Icon",x,{x:h[0],y:h[1],originX:o/2,originY:0,rotation:y?-l:0,rectHover:!0,style:s,onclick:p});m.ensureState("emphasis").style=u,r.add(m),ir(m)}}},i.prototype._renderCurrentPointer=function(e,r,n,a){var o=a.getData(),l=a.getCurrentIndex(),s=o.getItemModel(l).getModel("checkpointStyle"),u=this,f={onCreate:function(c){c.draggable=!0,c.drift=F(u._handlePointerDrag,u),c.ondragend=F(u._handlePointerDragend,u),Ho(c,u._progressLine,l,n,a,!0)},onUpdate:function(c){Ho(c,u._progressLine,l,n,a)}};this._currentPointer=Go(s,s,this._mainGroup,{},this._currentPointer,f)},i.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},i.prototype._handlePointerDrag=function(e,r,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},i.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},i.prototype._pointerChangeTimeline=function(e,r){var n=this._toAxisCoord(e)[0],a=this._axis,o=_t(a.getExtent().slice());n>o[1]&&(n=o[1]),n<o[0]&&(n=o[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var l=this._progressLine;l&&(l.shape.x2=n,l.dirty());var s=this._findNearestTick(n),u=this.model;(r||s!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(s)},i.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=e.model;e._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},i.prototype._toAxisCoord=function(e){var r=this._mainGroup.getLocalTransform();return $t(e,r,!0)},i.prototype._findNearestTick=function(e){var r=this.model.getData(),n=1/0,a,o=this._axis;return r.each(["value"],function(l,s){var u=o.dataToCoord(l),f=Math.abs(u-e);f<n&&(n=f,a=s)}),a},i.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},i.prototype._changeTimeline=function(e){var r=this.model.getCurrentIndex();e==="+"?e=r+1:e==="-"&&(e=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},i.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),r=this._tickSymbols,n=this._tickLabels;if(r)for(var a=0;a<r.length;a++)r&&r[a]&&r[a].toggleState("progress",a<e);if(n)for(var a=0;a<n.length;a++)n&&n[a]&&n[a].toggleState("progress",Oo(n[a]).dataIndex<=e)},i.type="timeline.slider",i}(j0);function R0(t,i){if(i=i||t.get("type"),i)switch(i){case"category":return new Ff({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new Wf({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new Hf}}function k0(t,i){return We(t.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()},t.get("padding"))}function z0(t,i,e,r){var n=r.style,a=$f(t.get(["controlStyle",i]),r||{},new ot(e[0],e[1],e[2],e[3]));return n&&a.setStyle(n),a}function Go(t,i,e,r,n,a){var o=i.get("color");if(n)n.setColor(o),e.add(n),a&&a.onUpdate(n);else{var l=t.get("symbol");n=St(l,-1,-1,2,2,o),n.setStyle("strokeNoScale",!0),e.add(n),a&&a.onCreate(n)}var s=i.getItemStyle(["color"]);n.setStyle(s),r=Re({rectHover:!0,z2:100},r,!0);var u=Kl(t.get("symbolSize"));r.scaleX=u[0]/2,r.scaleY=u[1]/2;var f=Nn(t.get("symbolOffset"),u);f&&(r.x=(r.x||0)+f[0],r.y=(r.y||0)+f[1]);var c=t.get("symbolRotate");return r.rotation=(c||0)*Math.PI/180||0,n.attr(r),n.updateTransform(),n}function Ho(t,i,e,r,n,a){if(!t.dragging){var o=n.getModel("checkpointStyle"),l=r.dataToCoord(n.getData().get("value",e));if(a||!o.get("animation",!0))t.attr({x:l,y:0}),i&&i.attr({shape:{x2:l}});else{var s={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:l,y:0},s),i&&i.animateTo({shape:{x2:l}},s)}}}function B0(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(i,e,r){var n=e.getComponent("timeline");return n&&i.currentIndex!=null&&(n.setCurrentIndex(i.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:i.from}))),e.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Ge({currentIndex:n.option.currentIndex},i)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(i,e){var r=e.getComponent("timeline");r&&i.playState!=null&&r.setPlayState(i.playState)})}function O0(t){var i=t&&t.timeline;B(i)||(i=i?[i]:[]),C(i,function(e){e&&G0(e)})}function G0(t){var i=t.type,e={number:"value",time:"time"};if(e[i]&&(t.axisType=e[i],delete t.type),Wo(t),gt(t,"controlPosition")){var r=t.controlStyle||(t.controlStyle={});gt(r,"position")||(r.position=t.controlPosition),r.position==="none"&&!gt(r,"show")&&(r.show=!1,delete r.position),delete t.controlPosition}C(t.data||[],function(n){Me(n)&&!B(n)&&(!gt(n,"value")&&gt(n,"name")&&(n.value=n.name),Wo(n))})}function Wo(t){var i=t.itemStyle||(t.itemStyle={}),e=i.emphasis||(i.emphasis={}),r=t.label||t.label||{},n=r.normal||(r.normal={}),a={normal:1,emphasis:1};C(r,function(o,l){!a[l]&&!gt(n,l)&&(n[l]=o)}),e.label&&!gt(r,"emphasis")&&(r.emphasis=e.label,delete e.label)}function gt(t,i){return t.hasOwnProperty(i)}function H0(t){t.registerComponentModel(iu),t.registerComponentView(E0),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),B0(t),t.registerPreprocessor(O0)}function qn(t,i){if(!t)return!1;for(var e=B(t)?t:[t],r=0;r<e.length;r++)if(e[r]&&e[r][i])return!0;return!1}function yi(t){Tn(t,"label",["show"])}var mi=Ve(),qe=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.createdBySelf=!1,e}return i.prototype.init=function(e,r,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},i.prototype.isAnimationEnabled=function(){if(Uf.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},i.prototype.mergeOption=function(e,r){this._mergeOption(e,r,!1,!1)},i.prototype._mergeOption=function(e,r,n,a){var o=this.mainType;n||r.eachSeries(function(l){var s=l.get(this.mainType,!0),u=mi(l)[o];if(!s||!s.data){mi(l)[o]=null;return}u?u._mergeOption(s,r,!0):(a&&yi(s),C(s.data,function(f){f instanceof Array?(yi(f[0]),yi(f[1])):yi(f)}),u=this.createMarkerModelFromSeries(s,this,r),O(u,{mainType:this.mainType,seriesIndex:l.seriesIndex,name:l.name,createdBySelf:!0}),u.__hostSeries=l),mi(l)[o]=u},this)},i.prototype.formatTooltip=function(e,r,n){var a=this.getData(),o=this.getRawValue(e),l=a.getName(e);return Ne("section",{header:this.name,blocks:[Ne("nameValue",{name:l,value:o,noName:!l,noValue:o==null})]})},i.prototype.getData=function(){return this._data},i.prototype.setData=function(e){this._data=e},i.prototype.getDataParams=function(e,r){var n=En.prototype.getDataParams.call(this,e,r),a=this.__hostSeries;return a&&(n.seriesId=a.id,n.seriesName=a.name,n.seriesType=a.subType),n},i.getMarkerModelFromSeries=function(e,r){return mi(e)[r]},i.type="marker",i.dependencies=["series","grid","polar","geo"],i}(Je);Mt(qe,En.prototype);var W0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.createMarkerModelFromSeries=function(e,r,n){return new i(e,r,n)},i.type="markPoint",i.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},i}(qe);function vn(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function F0(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function Si(t,i,e,r,n,a){var o=[],l=Yf(i,r),s=l?i.getCalculationInfo("stackResultDimension"):r,u=Qn(i,s,t),f=i.indicesOfNearest(s,u)[0];o[n]=i.get(e,f),o[a]=i.get(s,f);var c=i.get(r,f),v=Xf(i.get(r,f));return v=Math.min(v,20),v>=0&&(o[a]=+o[a].toFixed(v)),[o,c]}var Er={min:se(Si,"min"),max:se(Si,"max"),average:se(Si,"average"),median:se(Si,"median")};function ti(t,i){if(i){var e=t.getData(),r=t.coordinateSystem,n=r&&r.dimensions;if(!F0(i)&&!B(i.coord)&&B(n)){var a=ru(i,e,r,t);if(i=oe(i),i.type&&Er[i.type]&&a.baseAxis&&a.valueAxis){var o=De(n,a.baseAxis.dim),l=De(n,a.valueAxis.dim),s=Er[i.type](e,a.baseDataDim,a.valueDataDim,o,l);i.coord=s[0],i.value=s[1]}else i.coord=[i.xAxis!=null?i.xAxis:i.radiusAxis,i.yAxis!=null?i.yAxis:i.angleAxis]}if(i.coord==null||!B(n))i.coord=[];else for(var u=i.coord,f=0;f<2;f++)Er[u[f]]&&(u[f]=Qn(e,e.mapDimension(n[f]),u[f]));return i}}function ru(t,i,e,r){var n={};return t.valueIndex!=null||t.valueDim!=null?(n.valueDataDim=t.valueIndex!=null?i.getDimension(t.valueIndex):t.valueDim,n.valueAxis=e.getAxis($0(r,n.valueDataDim)),n.baseAxis=e.getOtherAxis(n.valueAxis),n.baseDataDim=i.mapDimension(n.baseAxis.dim)):(n.baseAxis=r.getBaseAxis(),n.valueAxis=e.getOtherAxis(n.baseAxis),n.baseDataDim=i.mapDimension(n.baseAxis.dim),n.valueDataDim=i.mapDimension(n.valueAxis.dim)),n}function $0(t,i){var e=t.getData().getDimensionInfo(i);return e&&e.coordDim}function ii(t,i){return t&&t.containData&&i.coord&&!vn(i)?t.containData(i.coord):!0}function U0(t,i,e){return t&&t.containZone&&i.coord&&e.coord&&!vn(i)&&!vn(e)?t.containZone(i.coord,e.coord):!0}function nu(t,i){return t?function(e,r,n,a){var o=a<2?e.coord&&e.coord[a]:e.value;return Li(o,i[a])}:function(e,r,n,a){return Li(e.value,i[a])}}function Qn(t,i,e){if(e==="average"){var r=0,n=0;return t.each(i,function(a,o){isNaN(a)||(r+=a,n++)}),r/n}else return e==="median"?t.getMedian(i):t.getDataExtent(i)[e==="max"?1:0]}var Rr=Ve(),Jn=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.init=function(){this.markerGroupMap=nt()},i.prototype.render=function(e,r,n){var a=this,o=this.markerGroupMap;o.each(function(l){Rr(l).keep=!1}),r.eachSeries(function(l){var s=qe.getMarkerModelFromSeries(l,a.type);s&&a.renderSeries(l,s,r,n)}),o.each(function(l){!Rr(l).keep&&a.group.remove(l.group)})},i.prototype.markKeep=function(e){Rr(e).keep=!0},i.prototype.toggleBlurSeries=function(e,r){var n=this;C(e,function(a){var o=qe.getMarkerModelFromSeries(a,n.type);if(o){var l=o.getData();l.eachItemGraphicEl(function(s){s&&(r?Zf(s):Kf(s))})}})},i.type="marker",i}(Qe);function Fo(t,i,e){var r=i.coordinateSystem;t.each(function(n){var a=t.getItemModel(n),o,l=$(a.get("x"),e.getWidth()),s=$(a.get("y"),e.getHeight());if(!isNaN(l)&&!isNaN(s))o=[l,s];else if(i.getMarkerPosition)o=i.getMarkerPosition(t.getValues(t.dimensions,n));else if(r){var u=t.get(r.dimensions[0],n),f=t.get(r.dimensions[1],n);o=r.dataToPoint([u,f])}isNaN(l)||(o[0]=l),isNaN(s)||(o[1]=s),t.setItemLayout(n,o)})}var Y0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.updateTransform=function(e,r,n){r.eachSeries(function(a){var o=qe.getMarkerModelFromSeries(a,"markPoint");o&&(Fo(o.getData(),a,n),this.markerGroupMap.get(a.id).updateLayout())},this)},i.prototype.renderSeries=function(e,r,n,a){var o=e.coordinateSystem,l=e.id,s=e.getData(),u=this.markerGroupMap,f=u.get(l)||u.set(l,new wn),c=X0(o,e,r);r.setData(c),Fo(r.getData(),e,a),c.each(function(v){var h=c.getItemModel(v),d=h.getShallow("symbol"),p=h.getShallow("symbolSize"),y=h.getShallow("symbolRotate"),S=h.getShallow("symbolOffset"),x=h.getShallow("symbolKeepAspect");if(le(d)||le(p)||le(y)||le(S)){var m=r.getRawValue(v),_=r.getDataParams(v);le(d)&&(d=d(m,_)),le(p)&&(p=p(m,_)),le(y)&&(y=y(m,_)),le(S)&&(S=S(m,_))}var b=h.getModel("itemStyle").getItemStyle(),w=Ui(s,"color");b.fill||(b.fill=w),c.setItemVisual(v,{symbol:d,symbolSize:p,symbolRotate:y,symbolOffset:S,symbolKeepAspect:x,style:b})}),f.updateData(c),this.group.add(f.group),c.eachItemGraphicEl(function(v){v.traverse(function(h){ce(h).dataModel=r})}),this.markKeep(f),f.group.silent=r.get("silent")||e.get("silent")},i.type="markPoint",i}(Jn);function X0(t,i,e){var r;t?r=H(t&&t.dimensions,function(l){var s=i.getData().getDimensionInfo(i.getData().mapDimension(l))||{};return O(O({},s),{name:l,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new Le(r,e),a=H(e.get("data"),se(ti,i));t&&(a=Fe(a,se(ii,t)));var o=nu(!!t,r);return n.initData(a,null,o),n}function Z0(t){t.registerComponentModel(W0),t.registerComponentView(Y0),t.registerPreprocessor(function(i){qn(i.series,"markPoint")&&(i.markPoint=i.markPoint||{})})}var K0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.createMarkerModelFromSeries=function(e,r,n){return new i(e,r,n)},i.type="markLine",i.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},i}(qe),xi=Ve(),q0=function(t,i,e,r){var n=t.getData(),a;if(B(r))a=r;else{var o=r.type;if(o==="min"||o==="max"||o==="average"||o==="median"||r.xAxis!=null||r.yAxis!=null){var l=void 0,s=void 0;if(r.yAxis!=null||r.xAxis!=null)l=i.getAxis(r.yAxis!=null?"y":"x"),s=je(r.yAxis,r.xAxis);else{var u=ru(r,n,i,t);l=u.valueAxis;var f=qf(n,u.valueDataDim);s=Qn(n,f,o)}var c=l.dim==="x"?0:1,v=1-c,h=oe(r),d={coord:[]};h.type=null,h.coord=[],h.coord[v]=-1/0,d.coord[v]=1/0;var p=e.get("precision");p>=0&&oi(s)&&(s=+s.toFixed(Math.min(p,20))),h.coord[c]=d.coord[c]=s,a=[h,d,{type:o,valueIndex:r.valueIndex,value:s}]}else a=[]}var y=[ti(t,a[0]),ti(t,a[1]),O({},a[2])];return y[2].type=y[2].type||null,Re(y[2],y[0]),Re(y[2],y[1]),y};function zi(t){return!isNaN(t)&&!isFinite(t)}function $o(t,i,e,r){var n=1-t,a=r.dimensions[t];return zi(i[n])&&zi(e[n])&&i[t]===e[t]&&r.getAxis(a).containData(i[t])}function Q0(t,i){if(t.type==="cartesian2d"){var e=i[0].coord,r=i[1].coord;if(e&&r&&($o(1,e,r,t)||$o(0,e,r,t)))return!0}return ii(t,i[0])&&ii(t,i[1])}function kr(t,i,e,r,n){var a=r.coordinateSystem,o=t.getItemModel(i),l,s=$(o.get("x"),n.getWidth()),u=$(o.get("y"),n.getHeight());if(!isNaN(s)&&!isNaN(u))l=[s,u];else{if(r.getMarkerPosition)l=r.getMarkerPosition(t.getValues(t.dimensions,i));else{var f=a.dimensions,c=t.get(f[0],i),v=t.get(f[1],i);l=a.dataToPoint([c,v])}if(Fi(a,"cartesian2d")){var h=a.getAxis("x"),d=a.getAxis("y"),f=a.dimensions;zi(t.get(f[0],i))?l[0]=h.toGlobalCoord(h.getExtent()[e?0:1]):zi(t.get(f[1],i))&&(l[1]=d.toGlobalCoord(d.getExtent()[e?0:1]))}isNaN(s)||(l[0]=s),isNaN(u)||(l[1]=u)}t.setItemLayout(i,l)}var J0=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.updateTransform=function(e,r,n){r.eachSeries(function(a){var o=qe.getMarkerModelFromSeries(a,"markLine");if(o){var l=o.getData(),s=xi(o).from,u=xi(o).to;s.each(function(f){kr(s,f,!0,a,n),kr(u,f,!1,a,n)}),l.each(function(f){l.setItemLayout(f,[s.getItemLayout(f),u.getItemLayout(f)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},i.prototype.renderSeries=function(e,r,n,a){var o=e.coordinateSystem,l=e.id,s=e.getData(),u=this.markerGroupMap,f=u.get(l)||u.set(l,new Nl);this.group.add(f.group);var c=ey(o,e,r),v=c.from,h=c.to,d=c.line;xi(r).from=v,xi(r).to=h,r.setData(d);var p=r.get("symbol"),y=r.get("symbolSize"),S=r.get("symbolRotate"),x=r.get("symbolOffset");B(p)||(p=[p,p]),B(y)||(y=[y,y]),B(S)||(S=[S,S]),B(x)||(x=[x,x]),c.from.each(function(_){m(v,_,!0),m(h,_,!1)}),d.each(function(_){var b=d.getItemModel(_).getModel("lineStyle").getLineStyle();d.setItemLayout(_,[v.getItemLayout(_),h.getItemLayout(_)]),b.stroke==null&&(b.stroke=v.getItemVisual(_,"style").fill),d.setItemVisual(_,{fromSymbolKeepAspect:v.getItemVisual(_,"symbolKeepAspect"),fromSymbolOffset:v.getItemVisual(_,"symbolOffset"),fromSymbolRotate:v.getItemVisual(_,"symbolRotate"),fromSymbolSize:v.getItemVisual(_,"symbolSize"),fromSymbol:v.getItemVisual(_,"symbol"),toSymbolKeepAspect:h.getItemVisual(_,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(_,"symbolOffset"),toSymbolRotate:h.getItemVisual(_,"symbolRotate"),toSymbolSize:h.getItemVisual(_,"symbolSize"),toSymbol:h.getItemVisual(_,"symbol"),style:b})}),f.updateData(d),c.line.eachItemGraphicEl(function(_){ce(_).dataModel=r,_.traverse(function(b){ce(b).dataModel=r})});function m(_,b,w){var D=_.getItemModel(b);kr(_,b,w,e,a);var T=D.getModel("itemStyle").getItemStyle();T.fill==null&&(T.fill=Ui(s,"color")),_.setItemVisual(b,{symbolKeepAspect:D.get("symbolKeepAspect"),symbolOffset:ge(D.get("symbolOffset",!0),x[w?0:1]),symbolRotate:ge(D.get("symbolRotate",!0),S[w?0:1]),symbolSize:ge(D.get("symbolSize"),y[w?0:1]),symbol:ge(D.get("symbol",!0),p[w?0:1]),style:T})}this.markKeep(f),f.group.silent=r.get("silent")||e.get("silent")},i.type="markLine",i}(Jn);function ey(t,i,e){var r;t?r=H(t&&t.dimensions,function(u){var f=i.getData().getDimensionInfo(i.getData().mapDimension(u))||{};return O(O({},f),{name:u,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new Le(r,e),a=new Le(r,e),o=new Le([],e),l=H(e.get("data"),se(q0,i,t,e));t&&(l=Fe(l,se(Q0,t)));var s=nu(!!t,r);return n.initData(H(l,function(u){return u[0]}),null,s),a.initData(H(l,function(u){return u[1]}),null,s),o.initData(H(l,function(u){return u[2]})),o.hasItemOption=!0,{from:n,to:a,line:o}}function ty(t){t.registerComponentModel(K0),t.registerComponentView(J0),t.registerPreprocessor(function(i){qn(i.series,"markLine")&&(i.markLine=i.markLine||{})})}var iy=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.createMarkerModelFromSeries=function(e,r,n){return new i(e,r,n)},i.type="markArea",i.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},i}(qe),_i=Ve(),ry=function(t,i,e,r){var n=r[0],a=r[1];if(!(!n||!a)){var o=ti(t,n),l=ti(t,a),s=o.coord,u=l.coord;s[0]=je(s[0],-1/0),s[1]=je(s[1],-1/0),u[0]=je(u[0],1/0),u[1]=je(u[1],1/0);var f=Qf([{},o,l]);return f.coord=[o.coord,l.coord],f.x0=o.x,f.y0=o.y,f.x1=l.x,f.y1=l.y,f}};function Bi(t){return!isNaN(t)&&!isFinite(t)}function Uo(t,i,e,r){var n=1-t;return Bi(i[n])&&Bi(e[n])}function ny(t,i){var e=i.coord[0],r=i.coord[1],n={coord:e,x:i.x0,y:i.y0},a={coord:r,x:i.x1,y:i.y1};return Fi(t,"cartesian2d")?e&&r&&(Uo(1,e,r)||Uo(0,e,r))?!0:U0(t,n,a):ii(t,n)||ii(t,a)}function Yo(t,i,e,r,n){var a=r.coordinateSystem,o=t.getItemModel(i),l,s=$(o.get(e[0]),n.getWidth()),u=$(o.get(e[1]),n.getHeight());if(!isNaN(s)&&!isNaN(u))l=[s,u];else{if(r.getMarkerPosition){var f=t.getValues(["x0","y0"],i),c=t.getValues(["x1","y1"],i),v=a.clampData(f),h=a.clampData(c),d=[];e[0]==="x0"?d[0]=v[0]>h[0]?c[0]:f[0]:d[0]=v[0]>h[0]?f[0]:c[0],e[1]==="y0"?d[1]=v[1]>h[1]?c[1]:f[1]:d[1]=v[1]>h[1]?f[1]:c[1],l=r.getMarkerPosition(d,e,!0)}else{var p=t.get(e[0],i),y=t.get(e[1],i),S=[p,y];a.clampData&&a.clampData(S,S),l=a.dataToPoint(S,!0)}if(Fi(a,"cartesian2d")){var x=a.getAxis("x"),m=a.getAxis("y"),p=t.get(e[0],i),y=t.get(e[1],i);Bi(p)?l[0]=x.toGlobalCoord(x.getExtent()[e[0]==="x0"?0:1]):Bi(y)&&(l[1]=m.toGlobalCoord(m.getExtent()[e[1]==="y0"?0:1]))}isNaN(s)||(l[0]=s),isNaN(u)||(l[1]=u)}return l}var Xo=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],ay=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.updateTransform=function(e,r,n){r.eachSeries(function(a){var o=qe.getMarkerModelFromSeries(a,"markArea");if(o){var l=o.getData();l.each(function(s){var u=H(Xo,function(c){return Yo(l,s,c,a,n)});l.setItemLayout(s,u);var f=l.getItemGraphicEl(s);f.setShape("points",u)})}},this)},i.prototype.renderSeries=function(e,r,n,a){var o=e.coordinateSystem,l=e.id,s=e.getData(),u=this.markerGroupMap,f=u.get(l)||u.set(l,{group:new ne});this.group.add(f.group),this.markKeep(f);var c=oy(o,e,r);r.setData(c),c.each(function(v){var h=H(Xo,function(T){return Yo(c,v,T,e,a)}),d=o.getAxis("x").scale,p=o.getAxis("y").scale,y=d.getExtent(),S=p.getExtent(),x=[d.parse(c.get("x0",v)),d.parse(c.get("x1",v))],m=[p.parse(c.get("y0",v)),p.parse(c.get("y1",v))];_t(x),_t(m);var _=!(y[0]>x[1]||y[1]<x[0]||S[0]>m[1]||S[1]<m[0]),b=!_;c.setItemLayout(v,{points:h,allClipped:b});var w=c.getItemModel(v).getModel("itemStyle").getItemStyle(),D=Ui(s,"color");w.fill||(w.fill=D,ie(w.fill)&&(w.fill=Ii(w.fill,.4))),w.stroke||(w.stroke=D),c.setItemVisual(v,"style",w)}),c.diff(_i(f).data).add(function(v){var h=c.getItemLayout(v);if(!h.allClipped){var d=new Yt({shape:{points:h.points}});c.setItemGraphicEl(v,d),f.group.add(d)}}).update(function(v,h){var d=_i(f).data.getItemGraphicEl(h),p=c.getItemLayout(v);p.allClipped?d&&f.group.remove(d):(d?be(d,{shape:{points:p.points}},r,v):d=new Yt({shape:{points:p.points}}),c.setItemGraphicEl(v,d),f.group.add(d))}).remove(function(v){var h=_i(f).data.getItemGraphicEl(v);f.group.remove(h)}).execute(),c.eachItemGraphicEl(function(v,h){var d=c.getItemModel(h),p=c.getItemVisual(h,"style");v.useStyle(c.getItemVisual(h,"style")),Xe(v,He(d),{labelFetcher:r,labelDataIndex:h,defaultText:c.getName(h)||"",inheritColor:ie(p.fill)?Ii(p.fill,1):"#000"}),Ze(v,d),Te(v,null,null,d.get(["emphasis","disabled"])),ce(v).dataModel=r}),_i(f).data=c,f.group.silent=r.get("silent")||e.get("silent")},i.type="markArea",i}(Jn);function oy(t,i,e){var r,n,a=["x0","y0","x1","y1"];if(t){var o=H(t&&t.dimensions,function(u){var f=i.getData(),c=f.getDimensionInfo(f.mapDimension(u))||{};return O(O({},c),{name:u,ordinalMeta:null})});n=H(a,function(u,f){return{name:u,type:o[f%2].type}}),r=new Le(n,e)}else n=[{name:"value",type:"float"}],r=new Le(n,e);var l=H(e.get("data"),se(ry,i,t,e));t&&(l=Fe(l,se(ny,t)));var s=t?function(u,f,c,v){var h=u.coord[Math.floor(v/2)][v%2];return Li(h,n[v])}:function(u,f,c,v){return Li(u.value,n[v])};return r.initData(l,null,s),r.hasItemOption=!0,r}function ly(t){t.registerComponentModel(iy),t.registerComponentView(ay),t.registerPreprocessor(function(i){qn(i.series,"markArea")&&(i.markArea=i.markArea||{})})}var au={get:function(t,i,e){var r=oe((sy[t]||{})[i]);return e&&B(r)?r[r.length-1]:r}},sy={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Zo=fe.mapVisual,uy=fe.eachVisual,fy=B,Ko=C,cy=_t,vy=Ee,Oi=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return i.prototype.init=function(e,r,n){this.mergeDefaultAndTheme(e,n)},i.prototype.optionUpdated=function(e,r){var n=this.option;!r&&eu(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},i.prototype.resetVisual=function(e){var r=this.stateList;e=F(e,this),this.controllerVisuals=fn(this.option.controller,r,e),this.targetVisuals=fn(this.option.target,r,e)},i.prototype.getItemSymbol=function(){return null},i.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,r=[];return e==null||e==="all"?this.ecModel.eachSeries(function(n,a){r.push(a)}):r=Ke(e),r},i.prototype.eachTargetSeries=function(e,r){C(this.getTargetSeriesIndices(),function(n){var a=this.ecModel.getSeriesByIndex(n);a&&e.call(r,a)},this)},i.prototype.isTargetSeries=function(e){var r=!1;return this.eachTargetSeries(function(n){n===e&&(r=!0)}),r},i.prototype.formatValueText=function(e,r,n){var a=this.option,o=a.precision,l=this.dataBound,s=a.formatter,u;n=n||["<",">"],B(e)&&(e=e.slice(),u=!0);var f=r?e:u?[c(e[0]),c(e[1])]:c(e);if(ie(s))return s.replace("{value}",u?f[0]:f).replace("{value2}",u?f[1]:f);if(le(s))return u?s(e[0],e[1]):s(e);if(u)return e[0]===l[0]?n[0]+" "+f[1]:e[1]===l[1]?n[1]+" "+f[0]:f[0]+" - "+f[1];return f;function c(v){return v===l[0]?"min":v===l[1]?"max":(+v).toFixed(Math.min(o,20))}},i.prototype.resetExtent=function(){var e=this.option,r=cy([e.min,e.max]);this._dataExtent=r},i.prototype.getDataDimensionIndex=function(e){var r=this.option.dimension;if(r!=null)return e.getDimensionIndex(r);for(var n=e.dimensions,a=n.length-1;a>=0;a--){var o=n[a],l=e.getDimensionInfo(o);if(!l.isCalculationCoord)return l.storeDimIndex}},i.prototype.getExtent=function(){return this._dataExtent.slice()},i.prototype.completeVisualOption=function(){var e=this.ecModel,r=this.option,n={inRange:r.inRange,outOfRange:r.outOfRange},a=r.target||(r.target={}),o=r.controller||(r.controller={});Re(a,n),Re(o,n);var l=this.isCategory();s.call(this,a),s.call(this,o),u.call(this,a,"inRange","outOfRange"),f.call(this,o);function s(c){fy(r.color)&&!c.inRange&&(c.inRange={color:r.color.slice().reverse()}),c.inRange=c.inRange||{color:e.get("gradientColor")}}function u(c,v,h){var d=c[v],p=c[h];d&&!p&&(p=c[h]={},Ko(d,function(y,S){if(fe.isValidType(S)){var x=au.get(S,"inactive",l);x!=null&&(p[S]=x,S==="color"&&!p.hasOwnProperty("opacity")&&!p.hasOwnProperty("colorAlpha")&&(p.opacity=[0,0]))}}))}function f(c){var v=(c.inRange||{}).symbol||(c.outOfRange||{}).symbol,h=(c.inRange||{}).symbolSize||(c.outOfRange||{}).symbolSize,d=this.get("inactiveColor"),p=this.getItemSymbol(),y=p||"roundRect";Ko(this.stateList,function(S){var x=this.itemSize,m=c[S];m||(m=c[S]={color:l?d:[d]}),m.symbol==null&&(m.symbol=v&&oe(v)||(l?y:[y])),m.symbolSize==null&&(m.symbolSize=h&&oe(h)||(l?x[0]:[x[0],x[0]])),m.symbol=Zo(m.symbol,function(w){return w==="none"?y:w});var _=m.symbolSize;if(_!=null){var b=-1/0;uy(_,function(w){w>b&&(b=w)}),m.symbolSize=Zo(_,function(w){return vy(w,[0,b],[0,x[0]],!0)})}},this)}},i.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},i.prototype.isCategory=function(){return!!this.option.categories},i.prototype.setSelected=function(e){},i.prototype.getSelected=function(){return null},i.prototype.getValueState=function(e){return null},i.prototype.getVisualMeta=function(e){return null},i.type="visualMap",i.dependencies=["series"],i.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},i}(Je),qo=[20,140],hy=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.optionUpdated=function(e,r){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},i.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=qo[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=qo[1])},i.prototype._resetRange=function(){var e=this.getExtent(),r=this.option.range;!r||r.auto?(e.auto=1,this.option.range=e):B(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],e[0]),r[1]=Math.min(r[1],e[1]))},i.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),C(this.stateList,function(e){var r=this.option.controller[e].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},i.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},i.prototype.getSelected=function(){var e=this.getExtent(),r=_t((this.get("range")||[]).slice());return r[0]>e[1]&&(r[0]=e[1]),r[1]>e[1]&&(r[1]=e[1]),r[0]<e[0]&&(r[0]=e[0]),r[1]<e[0]&&(r[1]=e[0]),r},i.prototype.getValueState=function(e){var r=this.option.range,n=this.getExtent();return(r[0]<=n[0]||r[0]<=e)&&(r[1]>=n[1]||e<=r[1])?"inRange":"outOfRange"},i.prototype.findTargetDataIndices=function(e){var r=[];return this.eachTargetSeries(function(n){var a=[],o=n.getData();o.each(this.getDataDimensionIndex(o),function(l,s){e[0]<=l&&l<=e[1]&&a.push(s)},this),r.push({seriesId:n.id,dataIndex:a})},this),r},i.prototype.getVisualMeta=function(e){var r=Qo(this,"outOfRange",this.getExtent()),n=Qo(this,"inRange",this.option.range.slice()),a=[];function o(h,d){a.push({value:h,color:e(h,d)})}for(var l=0,s=0,u=n.length,f=r.length;s<f&&(!n.length||r[s]<=n[0]);s++)r[s]<n[l]&&o(r[s],"outOfRange");for(var c=1;l<u;l++,c=0)c&&a.length&&o(n[l],"outOfRange"),o(n[l],"inRange");for(var c=1;s<f;s++)(!n.length||n[n.length-1]<r[s])&&(c&&(a.length&&o(a[a.length-1].value,"outOfRange"),c=0),o(r[s],"outOfRange"));var v=a.length;return{stops:a,outerColors:[v?a[0].color:"transparent",v?a[v-1].color:"transparent"]}},i.type="visualMap.continuous",i.defaultOption=$i(Oi.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),i}(Oi);function Qo(t,i,e){if(e[0]===e[1])return e.slice();for(var r=200,n=(e[1]-e[0])/r,a=e[0],o=[],l=0;l<=r&&a<e[1];l++)o.push(a),a+=n;return o.push(e[1]),o}var ou=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return i.prototype.init=function(e,r){this.ecModel=e,this.api=r},i.prototype.render=function(e,r,n,a){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,r,n,a)},i.prototype.renderBackground=function(e){var r=this.visualMapModel,n=Jf(r.get("padding")||0),a=e.getBoundingRect();e.add(new Pe({z2:-1,silent:!0,shape:{x:a.x-n[3],y:a.y-n[0],width:a.width+n[3]+n[1],height:a.height+n[0]+n[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},i.prototype.getControllerVisual=function(e,r,n){n=n||{};var a=n.forceState,o=this.visualMapModel,l={};if(r==="color"){var s=o.get("contentColor");l.color=s}function u(h){return l[h]}function f(h,d){l[h]=d}var c=o.controllerVisuals[a||o.getValueState(e)],v=fe.prepareVisualTypes(c);return C(v,function(h){var d=c[h];n.convertOpacityToAlpha&&h==="opacity"&&(h="colorAlpha",d=c.__alphaForOpacity),fe.dependsOn(h,r)&&d&&d.applyVisual(e,u,f)}),l[r]},i.prototype.positionGroup=function(e){var r=this.visualMapModel,n=this.api;xn(e,r.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},i.prototype.doRender=function(e,r,n,a){},i.type="visualMap",i}(Qe),Jo=[["left","right","width"],["top","bottom","height"]];function lu(t,i,e){var r=t.option,n=r.align;if(n!=null&&n!=="auto")return n;for(var a={width:i.getWidth(),height:i.getHeight()},o=r.orient==="horizontal"?1:0,l=Jo[o],s=[0,null,10],u={},f=0;f<3;f++)u[Jo[1-o][f]]=s[f],u[l[f]]=f===2?e[0]:r[l[f]];var c=[["x","width",3],["y","height",0]][o],v=We(u,a,r.padding);return l[(v.margin[c[2]]||0)+v[c[0]]+v[c[1]]*.5<a[c[1]]*.5?0:1]}function Ti(t,i){return C(t||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(i?i.componentIndex:"")}),t}var Be=Ee,dy=C,el=Math.min,zr=Math.max,py=12,gy=6,yy=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return i.prototype.init=function(e,r){t.prototype.init.call(this,e,r),this._hoverLinkFromSeriesMouseOver=F(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=F(this._hideIndicator,this)},i.prototype.doRender=function(e,r,n,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},i.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,r=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(r);var n=e.get("text");this._renderEndsText(r,n,0),this._renderEndsText(r,n,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},i.prototype._renderEndsText=function(e,r,n){if(r){var a=r[1-n];a=a!=null?a+"":"";var o=this.visualMapModel,l=o.get("textGap"),s=o.itemSize,u=this._shapes.mainGroup,f=this._applyTransform([s[0]/2,n===0?-l:s[1]+l],u),c=this._applyTransform(n===0?"bottom":"top",u),v=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new de({style:ye(h,{x:f[0],y:f[1],verticalAlign:v==="horizontal"?"middle":c,align:v==="horizontal"?c:"center",text:a})}))}},i.prototype._renderBar=function(e){var r=this.visualMapModel,n=this._shapes,a=r.itemSize,o=this._orient,l=this._useHandle,s=lu(r,this.api,a),u=n.mainGroup=this._createBarGroup(s),f=new ne;u.add(f),f.add(n.outOfRange=tl()),f.add(n.inRange=tl(null,l?rl(this._orient):null,F(this._dragHandle,this,"all",!1),F(this._dragHandle,this,"all",!0))),f.setClipPath(new Pe({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var c=r.textStyleModel.getTextRect("国"),v=zr(c.width,c.height);l&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(r,u,0,a,v,o),this._createHandle(r,u,1,a,v,o)),this._createIndicator(r,u,a,v,o),e.add(u)},i.prototype._createHandle=function(e,r,n,a,o,l){var s=F(this._dragHandle,this,n,!1),u=F(this._dragHandle,this,n,!0),f=Zr(e.get("handleSize"),a[0]),c=St(e.get("handleIcon"),-f/2,-f/2,f,f,null,!0),v=rl(this._orient);c.attr({cursor:v,draggable:!0,drift:s,ondragend:u,onmousemove:function(S){Kr(S.event)}}),c.x=a[0]/2,c.useStyle(e.getModel("handleStyle").getItemStyle()),c.setStyle({strokeNoScale:!0,strokeFirst:!0}),c.style.lineWidth*=2,c.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),kt(c,!0),r.add(c);var h=this.visualMapModel.textStyleModel,d=new de({cursor:v,draggable:!0,drift:s,onmousemove:function(S){Kr(S.event)},ondragend:u,style:ye(h,{x:0,y:0,text:""})});d.ensureState("blur").style={opacity:.1},d.stateTransition={duration:200},this.group.add(d);var p=[f,0],y=this._shapes;y.handleThumbs[n]=c,y.handleLabelPoints[n]=p,y.handleLabels[n]=d},i.prototype._createIndicator=function(e,r,n,a,o){var l=Zr(e.get("indicatorSize"),n[0]),s=St(e.get("indicatorIcon"),-l/2,-l/2,l,l,null,!0);s.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var u=e.getModel("indicatorStyle").getItemStyle();if(s instanceof bt){var f=s.style;s.useStyle(O({image:f.image,x:f.x,y:f.y,width:f.width,height:f.height},u))}else s.useStyle(u);r.add(s);var c=this.visualMapModel.textStyleModel,v=new de({silent:!0,invisible:!0,style:ye(c,{x:0,y:0,text:""})});this.group.add(v);var h=[(o==="horizontal"?a/2:gy)+n[0]/2,0],d=this._shapes;d.indicator=s,d.indicatorLabel=v,d.indicatorLabelPoint=h,this._firstShowIndicator=!0},i.prototype._dragHandle=function(e,r,n,a){if(this._useHandle){if(this._dragging=!r,!r){var o=this._applyTransform([n,a],this._shapes.mainGroup,!0);this._updateInterval(e,o[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():il(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},i.prototype._resetInterval=function(){var e=this.visualMapModel,r=this._dataInterval=e.getSelected(),n=e.getExtent(),a=[0,e.itemSize[1]];this._handleEnds=[Be(r[0],n,a,!0),Be(r[1],n,a,!0)]},i.prototype._updateInterval=function(e,r){r=r||0;var n=this.visualMapModel,a=this._handleEnds,o=[0,n.itemSize[1]];Ol(r,a,o,e,0);var l=n.getExtent();this._dataInterval=[Be(a[0],o,l,!0),Be(a[1],o,l,!0)]},i.prototype._updateView=function(e){var r=this.visualMapModel,n=r.getExtent(),a=this._shapes,o=[0,r.itemSize[1]],l=e?o:this._handleEnds,s=this._createBarVisual(this._dataInterval,n,l,"inRange"),u=this._createBarVisual(n,n,o,"outOfRange");a.inRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),a.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(l,s)},i.prototype._createBarVisual=function(e,r,n,a){var o={forceState:a,convertOpacityToAlpha:!0},l=this._makeColorGradient(e,o),s=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],u=this._createBarPoints(n,s);return{barColor:new Pn(0,0,0,1,l),barPoints:u,handlesColor:[l[0].color,l[l.length-1].color]}},i.prototype._makeColorGradient=function(e,r){var n=100,a=[],o=(e[1]-e[0])/n;a.push({color:this.getControllerVisual(e[0],"color",r),offset:0});for(var l=1;l<n;l++){var s=e[0]+o*l;if(s>e[1])break;a.push({color:this.getControllerVisual(s,"color",r),offset:l/n})}return a.push({color:this.getControllerVisual(e[1],"color",r),offset:1}),a},i.prototype._createBarPoints=function(e,r){var n=this.visualMapModel.itemSize;return[[n[0]-r[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-r[1],e[1]]]},i.prototype._createBarGroup=function(e){var r=this._orient,n=this.visualMapModel.get("inverse");return new ne(r==="horizontal"&&!n?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&n?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!n?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},i.prototype._updateHandle=function(e,r){if(this._useHandle){var n=this._shapes,a=this.visualMapModel,o=n.handleThumbs,l=n.handleLabels,s=a.itemSize,u=a.getExtent();dy([0,1],function(f){var c=o[f];c.setStyle("fill",r.handlesColor[f]),c.y=e[f];var v=Be(e[f],[0,s[1]],u,!0),h=this.getControllerVisual(v,"symbolSize");c.scaleX=c.scaleY=h/s[0],c.x=s[0]-h/2;var d=$t(n.handleLabelPoints[f],rr(c,this.group));l[f].setStyle({x:d[0],y:d[1],text:a.formatValueText(this._dataInterval[f]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},i.prototype._showIndicator=function(e,r,n,a){var o=this.visualMapModel,l=o.getExtent(),s=o.itemSize,u=[0,s[1]],f=this._shapes,c=f.indicator;if(c){c.attr("invisible",!1);var v={convertOpacityToAlpha:!0},h=this.getControllerVisual(e,"color",v),d=this.getControllerVisual(e,"symbolSize"),p=Be(e,l,u,!0),y=s[0]-d/2,S={x:c.x,y:c.y};c.y=p,c.x=y;var x=$t(f.indicatorLabelPoint,rr(c,this.group)),m=f.indicatorLabel;m.attr("invisible",!1);var _=this._applyTransform("left",f.mainGroup),b=this._orient,w=b==="horizontal";m.setStyle({text:(n||"")+o.formatValueText(r),verticalAlign:w?_:"middle",align:w?"center":_});var D={x:y,y:p,style:{fill:h}},T={style:{x:x[0],y:x[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};c.x=S.x,c.y=S.y,c.animateTo(D,A),m.animateTo(T,A)}else c.attr(D),m.attr(T);this._firstShowIndicator=!1;var I=this._shapes.handleLabels;if(I)for(var L=0;L<I.length;L++)this.api.enterBlur(I[L])}},i.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(r){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,a=e._applyTransform([r.offsetX,r.offsetY],e._shapes.mainGroup,!0,!0);a[1]=el(zr(0,a[1]),n[1]),e._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=n[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},i.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},i.prototype._doHoverLinkToSeries=function(e,r){var n=this.visualMapModel,a=n.itemSize;if(n.option.hoverLink){var o=[0,a[1]],l=n.getExtent();e=el(zr(o[0],e),o[1]);var s=my(n,l,o),u=[e-s,e+s],f=Be(e,o,l,!0),c=[Be(u[0],o,l,!0),Be(u[1],o,l,!0)];u[0]<o[0]&&(c[0]=-1/0),u[1]>o[1]&&(c[1]=1/0),r&&(c[0]===-1/0?this._showIndicator(f,c[1],"< ",s):c[1]===1/0?this._showIndicator(f,c[0],"> ",s):this._showIndicator(f,f,"≈ ",s));var v=this._hoverLinkDataIndices,h=[];(r||il(n))&&(h=this._hoverLinkDataIndices=n.findTargetDataIndices(c));var d=ec(v,h);this._dispatchHighDown("downplay",Ti(d[0],n)),this._dispatchHighDown("highlight",Ti(d[1],n))}},i.prototype._hoverLinkFromSeriesMouseOver=function(e){var r;if(tc(e.target,function(s){var u=ce(s);if(u.dataIndex!=null)return r=u,!0},!0),!!r){var n=this.ecModel.getSeriesByIndex(r.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(n)){var o=n.getData(r.dataType),l=o.getStore().get(a.getDataDimensionIndex(o),r.dataIndex);isNaN(l)||this._showIndicator(l,l)}}},i.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var n=0;n<r.length;n++)this.api.leaveBlur(r[n])},i.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Ti(e,this.visualMapModel)),e.length=0},i.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},i.prototype._applyTransform=function(e,r,n,a){var o=rr(r,a?null:this.group);return B(e)?$t(e,o,n):ic(e,o,n)},i.prototype._dispatchHighDown=function(e,r){r&&r.length&&this.api.dispatchAction({type:e,batch:r})},i.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},i.type="visualMap.continuous",i}(ou);function tl(t,i,e,r){return new Yt({shape:{points:t},draggable:!!e,cursor:i,drift:e,onmousemove:function(n){Kr(n.event)},ondragend:r})}function my(t,i,e){var r=py/2,n=t.get("hoverLinkDataSize");return n&&(r=Be(n,i,e,!0)/2),r}function il(t){var i=t.get("hoverLinkOnHandle");return!!(i??t.get("realtime"))}function rl(t){return t==="vertical"?"ns-resize":"ew-resize"}var Sy={type:"selectDataRange",event:"dataRangeSelected",update:"update"},xy=function(t,i){i.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})},_y=[{createOnAllSeries:!0,reset:function(t,i){var e=[];return i.eachComponent("visualMap",function(r){var n=t.pipelineContext;!r.isTargetSeries(t)||n&&n.large||e.push(x0(r.stateList,r.targetVisuals,F(r.getValueState,r),r.getDataDimensionIndex(t.getData())))}),e}},{createOnAllSeries:!0,reset:function(t,i){var e=t.getData(),r=[];i.eachComponent("visualMap",function(n){if(n.isTargetSeries(t)){var a=n.getVisualMeta(F(by,null,t,n))||{stops:[],outerColors:[]},o=n.getDataDimensionIndex(e);o>=0&&(a.dimension=o,r.push(a))}}),t.getData().setVisual("visualMeta",r)}}];function by(t,i,e,r){for(var n=i.targetVisuals[r],a=fe.prepareVisualTypes(n),o={color:Ui(t.getData(),"color")},l=0,s=a.length;l<s;l++){var u=a[l],f=n[u==="opacity"?"__alphaForOpacity":u];f&&f.applyVisual(e,c,v)}return o.color;function c(h){return o[h]}function v(h,d){o[h]=d}}var nl=C;function wy(t){var i=t&&t.visualMap;B(i)||(i=i?[i]:[]),nl(i,function(e){if(e){Tt(e,"splitList")&&!Tt(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var r=e.pieces;r&&B(r)&&nl(r,function(n){Me(n)&&(Tt(n,"start")&&!Tt(n,"min")&&(n.min=n.start),Tt(n,"end")&&!Tt(n,"max")&&(n.max=n.end))})}})}function Tt(t,i){return t&&t.hasOwnProperty&&t.hasOwnProperty(i)}var al=!1;function su(t){al||(al=!0,t.registerSubTypeDefaulter("visualMap",function(i){return!i.categories&&(!(i.pieces?i.pieces.length>0:i.splitNumber>0)||i.calculable)?"continuous":"piecewise"}),t.registerAction(Sy,xy),C(_y,function(i){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,i)}),t.registerPreprocessor(wy))}function uu(t){t.registerComponentModel(hy),t.registerComponentView(yy),su(t)}var Dy=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e._pieceList=[],e}return i.prototype.optionUpdated=function(e,r){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],Ty[this._mode].call(this,this._pieceList),this._resetSelected(e,r);var a=this.option.categories;this.resetVisual(function(o,l){n==="categories"?(o.mappingMethod="category",o.categories=oe(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=H(this._pieceList,function(s){return s=oe(s),l!=="inRange"&&(s.visual=null),s}))})},i.prototype.completeVisualOption=function(){var e=this.option,r={},n=fe.listVisualTypes(),a=this.isCategory();C(e.pieces,function(l){C(n,function(s){l.hasOwnProperty(s)&&(r[s]=1)})}),C(r,function(l,s){var u=!1;C(this.stateList,function(f){u=u||o(e,f,s)||o(e.target,f,s)},this),!u&&C(this.stateList,function(f){(e[f]||(e[f]={}))[s]=au.get(s,f==="inRange"?"active":"inactive",a)})},this);function o(l,s,u){return l&&l[s]&&l[s].hasOwnProperty(u)}t.prototype.completeVisualOption.apply(this,arguments)},i.prototype._resetSelected=function(e,r){var n=this.option,a=this._pieceList,o=(r?n:e).selected||{};if(n.selected=o,C(a,function(s,u){var f=this.getSelectedMapKey(s);o.hasOwnProperty(f)||(o[f]=!0)},this),n.selectedMode==="single"){var l=!1;C(a,function(s,u){var f=this.getSelectedMapKey(s);o[f]&&(l?o[f]=!1:l=!0)},this)}},i.prototype.getItemSymbol=function(){return this.get("itemSymbol")},i.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},i.prototype.getPieceList=function(){return this._pieceList},i.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},i.prototype.setSelected=function(e){this.option.selected=oe(e)},i.prototype.getValueState=function(e){var r=fe.findPieceIndex(e,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},i.prototype.findTargetDataIndices=function(e){var r=[],n=this._pieceList;return this.eachTargetSeries(function(a){var o=[],l=a.getData();l.each(this.getDataDimensionIndex(l),function(s,u){var f=fe.findPieceIndex(s,n);f===e&&o.push(u)},this),r.push({seriesId:a.id,dataIndex:o})},this),r},i.prototype.getRepresentValue=function(e){var r;if(this.isCategory())r=e.value;else if(e.value!=null)r=e.value;else{var n=e.interval||[];r=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return r},i.prototype.getVisualMeta=function(e){if(this.isCategory())return;var r=[],n=["",""],a=this;function o(f,c){var v=a.getRepresentValue({interval:f});c||(c=a.getValueState(v));var h=e(v,c);f[0]===-1/0?n[0]=h:f[1]===1/0?n[1]=h:r.push({value:f[0],color:h},{value:f[1],color:h})}var l=this._pieceList.slice();if(!l.length)l.push({interval:[-1/0,1/0]});else{var s=l[0].interval[0];s!==-1/0&&l.unshift({interval:[-1/0,s]}),s=l[l.length-1].interval[1],s!==1/0&&l.push({interval:[s,1/0]})}var u=-1/0;return C(l,function(f){var c=f.interval;c&&(c[0]>u&&o([u,c[0]],"outOfRange"),o(c.slice()),u=c[1])},this),{stops:r,outerColors:n}},i.type="visualMap.piecewise",i.defaultOption=$i(Oi.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),i}(Oi),Ty={splitNumber:function(t){var i=this.option,e=Math.min(i.precision,20),r=this.getExtent(),n=i.splitNumber;n=Math.max(parseInt(n,10),1),i.splitNumber=n;for(var a=(r[1]-r[0])/n;+a.toFixed(e)!==a&&e<5;)e++;i.precision=e,a=+a.toFixed(e),i.minOpen&&t.push({interval:[-1/0,r[0]],close:[0,0]});for(var o=0,l=r[0];o<n;l+=a,o++){var s=o===n-1?r[1]:l+a;t.push({interval:[l,s],close:[1,1]})}i.maxOpen&&t.push({interval:[r[1],1/0],close:[0,0]}),ya(t),C(t,function(u,f){u.index=f,u.text=this.formatValueText(u.interval)},this)},categories:function(t){var i=this.option;C(i.categories,function(e){t.push({text:this.formatValueText(e,!0),value:e})},this),ol(i,t)},pieces:function(t){var i=this.option;C(i.pieces,function(e,r){Me(e)||(e={value:e});var n={text:"",index:r};if(e.label!=null&&(n.text=e.label),e.hasOwnProperty("value")){var a=n.value=e.value;n.interval=[a,a],n.close=[1,1]}else{for(var o=n.interval=[],l=n.close=[0,0],s=[1,0,1],u=[-1/0,1/0],f=[],c=0;c<2;c++){for(var v=[["gte","gt","min"],["lte","lt","max"]][c],h=0;h<3&&o[c]==null;h++)o[c]=e[v[h]],l[c]=s[h],f[c]=h===2;o[c]==null&&(o[c]=u[c])}f[0]&&o[1]===1/0&&(l[0]=0),f[1]&&o[0]===-1/0&&(l[1]=0),o[0]===o[1]&&l[0]&&l[1]&&(n.value=o[0])}n.visual=fe.retrieveVisuals(e),t.push(n)},this),ol(i,t),ya(t),C(t,function(e){var r=e.close,n=[["<","≤"][r[1]],[">","≥"][r[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,n)},this)}};function ol(t,i){var e=t.inverse;(t.orient==="vertical"?!e:e)&&i.reverse()}var Cy=function(t){N(i,t);function i(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=i.type,e}return i.prototype.doRender=function(){var e=this.group;e.removeAll();var r=this.visualMapModel,n=r.get("textGap"),a=r.textStyleModel,o=a.getFont(),l=a.getTextColor(),s=this._getItemAlign(),u=r.itemSize,f=this._getViewData(),c=f.endsText,v=je(r.get("showLabel",!0),!c);c&&this._renderEndsText(e,c[0],u,v,s),C(f.viewPieceList,function(h){var d=h.piece,p=new ne;p.onclick=F(this._onItemClick,this,d),this._enableHoverLink(p,h.indexInModelPieceList);var y=r.getRepresentValue(d);if(this._createItemSymbol(p,y,[0,0,u[0],u[1]]),v){var S=this.visualMapModel.getValueState(y);p.add(new de({style:{x:s==="right"?-n:u[0]+n,y:u[1]/2,text:d.text,verticalAlign:"middle",align:s,font:o,fill:l,opacity:S==="outOfRange"?.5:1}}))}e.add(p)},this),c&&this._renderEndsText(e,c[1],u,v,s),rc(r.get("orient"),e,r.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},i.prototype._enableHoverLink=function(e,r){var n=this;e.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var l=n.visualMapModel;l.option.hoverLink&&n.api.dispatchAction({type:o,batch:Ti(l.findTargetDataIndices(r),l)})}},i.prototype._getItemAlign=function(){var e=this.visualMapModel,r=e.option;if(r.orient==="vertical")return lu(e,this.api,e.itemSize);var n=r.align;return(!n||n==="auto")&&(n="left"),n},i.prototype._renderEndsText=function(e,r,n,a,o){if(r){var l=new ne,s=this.visualMapModel.textStyleModel;l.add(new de({style:ye(s,{x:a?o==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:a?o:"center",text:r})})),e.add(l)}},i.prototype._getViewData=function(){var e=this.visualMapModel,r=H(e.getPieceList(),function(l,s){return{piece:l,indexInModelPieceList:s}}),n=e.get("text"),a=e.get("orient"),o=e.get("inverse");return(a==="horizontal"?o:!o)?r.reverse():n&&(n=n.slice().reverse()),{viewPieceList:r,endsText:n}},i.prototype._createItemSymbol=function(e,r,n){e.add(St(this.getControllerVisual(r,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(r,"color")))},i.prototype._onItemClick=function(e){var r=this.visualMapModel,n=r.option,a=n.selectedMode;if(a){var o=oe(n.selected),l=r.getSelectedMapKey(e);a==="single"||a===!0?(o[l]=!0,C(o,function(s,u){o[u]=u===l})):o[l]=!o[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},i.type="visualMap.piecewise",i}(ou);function fu(t){t.registerComponentModel(Dy),t.registerComponentView(Cy),su(t)}function Ay(t){U(uu),U(fu)}var Iy={label:{enabled:!0},decal:{show:!1}},ll=Ve(),Ly={};function Py(t,i){var e=t.getModel("aria");if(!e.get("enabled"))return;var r=oe(Iy);Re(r.label,t.getLocaleModel().get("aria"),!1),Re(e.option,r,!1),n(),a();function n(){var u=e.getModel("decal"),f=u.get("show");if(f){var c=nt();t.eachSeries(function(v){if(!v.isColorBySeries()){var h=c.get(v.type);h||(h={},c.set(v.type,h)),ll(v).scope=h}}),t.eachRawSeries(function(v){if(t.isSeriesFiltered(v))return;if(le(v.enableAriaDecal)){v.enableAriaDecal();return}var h=v.getData();if(v.isColorBySeries()){var x=Hr(v.ecModel,v.name,Ly,t.getSeriesCount()),m=h.getVisual("decal");h.setVisual("decal",_(m,x))}else{var d=v.getRawData(),p={},y=ll(v).scope;h.each(function(b){var w=h.getRawIndex(b);p[w]=b});var S=d.count();d.each(function(b){var w=p[b],D=d.getName(b)||b+"",T=Hr(v.ecModel,D,y,S),A=h.getItemVisual(w,"decal");h.setItemVisual(w,"decal",_(A,T))})}function _(b,w){var D=b?O(O({},w),b):w;return D.dirty=!0,D}})}}function a(){var u=i.getZr().dom;if(u){var f=t.getLocaleModel().get("aria"),c=e.getModel("label");if(c.option=Ge(c.option,f),!!c.get("enabled")){if(c.get("description")){u.setAttribute("aria-label",c.get("description"));return}var v=t.getSeriesCount(),h=c.get(["data","maxCount"])||10,d=c.get(["series","maxCount"])||10,p=Math.min(v,d),y;if(!(v<1)){var S=l();if(S){var x=c.get(["general","withTitle"]);y=o(x,{title:S})}else y=c.get(["general","withoutTitle"]);var m=[],_=v>1?c.get(["series","multiple","prefix"]):c.get(["series","single","prefix"]);y+=o(_,{seriesCount:v}),t.eachSeries(function(T,A){if(A<p){var I=void 0,L=T.get("name"),M=L?"withName":"withoutName";I=v>1?c.get(["series","multiple",M]):c.get(["series","single",M]),I=o(I,{seriesId:T.seriesIndex,seriesName:T.get("name"),seriesType:s(T.subType)});var V=T.getData();if(V.count()>h){var P=c.get(["data","partialData"]);I+=o(P,{displayCnt:h})}else I+=c.get(["data","allData"]);for(var j=c.get(["data","separator","middle"]),R=c.get(["data","separator","end"]),k=[],z=0;z<V.count();z++)if(z<h){var W=V.getName(z),Z=V.getValues(z),Y=c.get(["data",W?"withName":"withoutName"]);k.push(o(Y,{name:W,value:Z.join(j)}))}I+=k.join(j)+R,m.push(I)}});var b=c.getModel(["series","multiple","separator"]),w=b.get("middle"),D=b.get("end");y+=m.join(w)+D,u.setAttribute("aria-label",y)}}}}function o(u,f){if(!ie(u))return u;var c=u;return C(f,function(v,h){c=c.replace(new RegExp("\\{\\s*"+h+"\\s*\\}","g"),v)}),c}function l(){var u=t.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function s(u){var f=t.getLocaleModel().get(["series","typeNames"]);return f[u]||f.chart}}function My(t){if(!(!t||!t.aria)){var i=t.aria;i.show!=null&&(i.enabled=i.show),i.label=i.label||{},C(["description","general","series","data"],function(e){i[e]!=null&&(i.label[e]=i[e])})}}function Vy(t){t.registerPreprocessor(My),t.registerVisual(t.PRIORITY.VISUAL.ARIA,Py)}var Br=Math.sin,Or=Math.cos,cu=Math.PI,vt=Math.PI*2,jy=180/cu,vu=function(){function t(){}return t.prototype.reset=function(i){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,i||4)},t.prototype.moveTo=function(i,e){this._add("M",i,e)},t.prototype.lineTo=function(i,e){this._add("L",i,e)},t.prototype.bezierCurveTo=function(i,e,r,n,a,o){this._add("C",i,e,r,n,a,o)},t.prototype.quadraticCurveTo=function(i,e,r,n){this._add("Q",i,e,r,n)},t.prototype.arc=function(i,e,r,n,a,o){this.ellipse(i,e,r,r,0,n,a,o)},t.prototype.ellipse=function(i,e,r,n,a,o,l,s){var u=l-o,f=!s,c=Math.abs(u),v=et(c-vt)||(f?u>=vt:-u>=vt),h=u>0?u%vt:u%vt+vt,d=!1;v?d=!0:et(c)?d=!1:d=h>=cu==!!f;var p=i+r*Or(o),y=e+n*Br(o);this._start&&this._add("M",p,y);var S=Math.round(a*jy);if(v){var x=1/this._p,m=(f?1:-1)*(vt-x);this._add("A",r,n,S,1,+f,i+r*Or(o+m),e+n*Br(o+m)),x>.01&&this._add("A",r,n,S,0,+f,p,y)}else{var _=i+r*Or(l),b=e+n*Br(l);this._add("A",r,n,S,+d,+f,_,b)}},t.prototype.rect=function(i,e,r,n){this._add("M",i,e),this._add("l",r,0),this._add("l",0,n),this._add("l",-r,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(i,e,r,n,a,o,l,s,u){for(var f=[],c=this._p,v=1;v<arguments.length;v++){var h=arguments[v];if(isNaN(h)){this._invalid=!0;return}f.push(Math.round(h*c)/c)}this._d.push(i+f.join(" ")),this._start=i==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),ea="none",Ny=Math.round;function Ey(t){var i=t.fill;return i!=null&&i!==ea}function Ry(t){var i=t.stroke;return i!=null&&i!==ea}var hn=["lineCap","miterLimit","lineJoin"],ky=H(hn,function(t){return"stroke-"+t.toLowerCase()});function zy(t,i,e,r){var n=i.opacity==null?1:i.opacity;if(e instanceof bt){t("opacity",n);return}if(Ey(i)){var a=Kt(i.fill);t("fill",a.color);var o=i.fillOpacity!=null?i.fillOpacity*a.opacity*n:a.opacity*n;o<1&&t("fill-opacity",o)}else t("fill",ea);if(Ry(i)){var l=Kt(i.stroke);t("stroke",l.color);var s=i.strokeNoScale?e.getLineScale():1,u=s?(i.lineWidth||0)/s:0,f=i.strokeOpacity!=null?i.strokeOpacity*l.opacity*n:l.opacity*n,c=i.strokeFirst;if(u!==1&&t("stroke-width",u),c&&t("paint-order",c?"stroke":"fill"),f<1&&t("stroke-opacity",f),i.lineDash){var v=nc(e),h=v[0],d=v[1];h&&(d=Ny(d||0),t("stroke-dasharray",h.join(",")),(d||r)&&t("stroke-dashoffset",d))}for(var p=0;p<hn.length;p++){var y=hn[p];if(i[y]!==ma[y]){var S=i[y]||ma[y];S&&t(ky[p],S)}}}}var hu="http://www.w3.org/2000/svg",du="http://www.w3.org/1999/xlink",By="http://www.w3.org/2000/xmlns/",Oy="http://www.w3.org/XML/1998/namespace",sl="ecmeta_";function pu(t){return document.createElementNS(hu,t)}function ue(t,i,e,r,n){return{tag:t,attrs:e||{},children:r,text:n,key:i}}function Gy(t,i){var e=[];if(i)for(var r in i){var n=i[r],a=r;n!==!1&&(n!==!0&&n!=null&&(a+='="'+n+'"'),e.push(a))}return"<"+t+" "+e.join(" ")+">"}function Hy(t){return"</"+t+">"}function ta(t,i){i=i||{};var e=i.newline?`
`:"";function r(n){var a=n.children,o=n.tag,l=n.attrs,s=n.text;return Gy(o,l)+(o!=="style"?ac(s):s||"")+(a?""+e+H(a,function(u){return r(u)}).join(e)+e:"")+Hy(o)}return r(t)}function Wy(t,i,e){e=e||{};var r=e.newline?`
`:"",n=" {"+r,a=r+"}",o=H(he(t),function(s){return s+n+H(he(t[s]),function(u){return u+":"+t[s][u]+";"}).join(r)+a}).join(r),l=H(he(i),function(s){return"@keyframes "+s+n+H(he(i[s]),function(u){return u+n+H(he(i[s][u]),function(f){var c=i[s][u][f];return f==="d"&&(c='path("'+c+'")'),f+":"+c+";"}).join(r)+a}).join(r)+a}).join(r);return!o&&!l?"":["<![CDATA[",o,l,"]]>"].join(r)}function dn(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function ul(t,i,e,r){return ue("svg","root",{width:t,height:i,xmlns:hu,"xmlns:xlink":du,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+t+" "+i:!1},e)}var Fy=0;function gu(){return Fy++}var fl={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},pt="transform-origin";function $y(t,i,e){var r=O({},t.shape);O(r,i),t.buildPath(e,r);var n=new vu;return n.reset(ls(t)),e.rebuildPath(n,1),n.generateStr(),n.getStr()}function Uy(t,i){var e=i.originX,r=i.originY;(e||r)&&(t[pt]=e+"px "+r+"px")}var Yy={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function yu(t,i){var e=i.zrId+"-ani-"+i.cssAnimIdx++;return i.cssAnims[e]=t,e}function Xy(t,i,e){var r=t.shape.paths,n={},a,o;if(C(r,function(s){var u=dn(e.zrId);u.animation=!0,qi(s,{},u,!0);var f=u.cssAnims,c=u.cssNodes,v=he(f),h=v.length;if(h){o=v[h-1];var d=f[o];for(var p in d){var y=d[p];n[p]=n[p]||{d:""},n[p].d+=y.d||""}for(var S in c){var x=c[S].animation;x.indexOf(o)>=0&&(a=x)}}}),!!a){i.d=!1;var l=yu(n,e);return a.replace(o,l)}}function cl(t){return ie(t)?fl[t]?"cubic-bezier("+fl[t]+")":lc(t)?t:"":""}function qi(t,i,e,r){var n=t.animators,a=n.length,o=[];if(t instanceof oc){var l=Xy(t,i,e);if(l)o.push(l);else if(!a)return}else if(!a)return;for(var s={},u=0;u<a;u++){var f=n[u],c=[f.getMaxTime()/1e3+"s"],v=cl(f.getClip().easing),h=f.getDelay();v?c.push(v):c.push("linear"),h&&c.push(h/1e3+"s"),f.getLoop()&&c.push("infinite");var d=c.join(" ");s[d]=s[d]||[d,[]],s[d][1].push(f)}function p(x){var m=x[1],_=m.length,b={},w={},D={},T="animation-timing-function";function A(G,q,K){for(var ee=G.getTracks(),ve=G.getMaxTime(),pe=0;pe<ee.length;pe++){var re=ee[pe];if(re.needsAnimate()){var Se=re.keyframes,xe=re.propName;if(K&&(xe=K(xe)),xe)for(var ke=0;ke<Se.length;ke++){var ft=Se[ke],ct=Math.round(ft.time/ve*100)+"%",oa=cl(ft.easing),la=ft.rawValue;(ie(la)||oi(la))&&(q[ct]=q[ct]||{},q[ct][xe]=ft.rawValue,oa&&(q[ct][T]=oa))}}}}for(var I=0;I<_;I++){var L=m[I],M=L.targetName;M?M==="shape"&&A(L,w):!r&&A(L,b)}for(var V in b){var P={};sc(P,t),O(P,b[V]);var j=os(P),R=b[V][T];D[V]=j?{transform:j}:{},Uy(D[V],P),R&&(D[V][T]=R)}var k,z=!0;for(var V in w){D[V]=D[V]||{};var W=!k,R=w[V][T];W&&(k=new uc);var Z=k.len();k.reset(),D[V].d=$y(t,w[V],k);var Y=k.len();if(!W&&Z!==Y){z=!1;break}R&&(D[V][T]=R)}if(!z)for(var V in D)delete D[V].d;if(!r)for(var I=0;I<_;I++){var L=m[I],M=L.targetName;M==="style"&&A(L,D,function(ee){return Yy[ee]})}for(var J=he(D),te=!0,Q,I=1;I<J.length;I++){var ae=J[I-1],Ce=J[I];if(D[ae][pt]!==D[Ce][pt]){te=!1;break}Q=D[ae][pt]}if(te&&Q){for(var V in D)D[V][pt]&&delete D[V][pt];i[pt]=Q}if(Fe(J,function(G){return he(D[G]).length>0}).length){var X=yu(D,e);return X+" "+x[0]+" both"}}for(var y in s){var l=p(s[y]);l&&o.push(l)}if(o.length){var S=e.zrId+"-cls-"+gu();e.cssNodes["."+S]={animation:o.join(",")},i.class=S}}function Zy(t,i,e){if(!t.ignore)if(t.isSilent()){var r={"pointer-events":"none"};vl(r,i,e)}else{var n=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},a=n.fill;if(!a){var o=t.style&&t.style.fill,l=t.states.select&&t.states.select.style&&t.states.select.style.fill,s=t.currentStates.indexOf("select")>=0&&l||o;s&&(a=fc(s))}var u=n.lineWidth;if(u){var f=!n.strokeNoScale&&t.transform?t.transform[0]:1;u=u/f}var r={cursor:"pointer"};a&&(r.fill=a),n.stroke&&(r.stroke=n.stroke),u&&(r["stroke-width"]=u),vl(r,i,e)}}function vl(t,i,e,r){var n=JSON.stringify(t),a=e.cssStyleCache[n];a||(a=e.zrId+"-cls-"+gu(),e.cssStyleCache[n]=a,e.cssNodes["."+a+":hover"]=t),i.class=i.class?i.class+" "+a:a}var ri=Math.round;function mu(t){return t&&ie(t.src)}function Su(t){return t&&le(t.toDataURL)}function ia(t,i,e,r){zy(function(n,a){var o=n==="fill"||n==="stroke";o&&ss(a)?_u(i,t,n,r):o&&Rn(a)?bu(e,t,n,r):o&&a==="none"?t[n]="transparent":t[n]=a},i,e,!1),im(e,t,r)}function ra(t,i){var e=Dc(i);e&&(e.each(function(r,n){r!=null&&(t[(sl+n).toLowerCase()]=r+"")}),i.isSilent()&&(t[sl+"silent"]="true"))}function hl(t){return et(t[0]-1)&&et(t[1])&&et(t[2])&&et(t[3]-1)}function Ky(t){return et(t[4])&&et(t[5])}function na(t,i,e){if(i&&!(Ky(i)&&hl(i))){var r=1e4;t.transform=hl(i)?"translate("+ri(i[4]*r)/r+" "+ri(i[5]*r)/r+")":Tc(i)}}function dl(t,i,e){for(var r=t.points,n=[],a=0;a<r.length;a++)n.push(ri(r[a][0]*e)/e),n.push(ri(r[a][1]*e)/e);i.points=n.join(" ")}function pl(t){return!t.smooth}function qy(t){var i=H(t,function(e){return typeof e=="string"?[e,e]:e});return function(e,r,n){for(var a=0;a<i.length;a++){var o=i[a],l=e[o[0]];l!=null&&(r[o[1]]=ri(l*n)/n)}}}var Qy={circle:[qy(["cx","cy","r"])],polyline:[dl,pl],polygon:[dl,pl]};function Jy(t){for(var i=t.animators,e=0;e<i.length;e++)if(i[e].targetName==="shape")return!0;return!1}function xu(t,i){var e=t.style,r=t.shape,n=Qy[t.type],a={},o=i.animation,l="path",s=t.style.strokePercent,u=i.compress&&ls(t)||4;if(n&&!i.willUpdate&&!(n[1]&&!n[1](r))&&!(o&&Jy(t))&&!(s<1)){l=t.type;var f=Math.pow(10,u);n[0](r,a,f)}else{var c=!t.path||t.shapeChanged();t.path||t.createPathProxy();var v=t.path;c&&(v.beginPath(),t.buildPath(v,t.shape),t.pathUpdated());var h=v.getVersion(),d=t,p=d.__svgPathBuilder;(d.__svgPathVersion!==h||!p||s!==d.__svgPathStrokePercent)&&(p||(p=d.__svgPathBuilder=new vu),p.reset(u),v.rebuildPath(p,s),p.generateStr(),d.__svgPathVersion=h,d.__svgPathStrokePercent=s),a.d=p.getStr()}return na(a,t.transform),ia(a,e,t,i),ra(a,t),i.animation&&qi(t,a,i),i.emphasis&&Zy(t,a,i),ue(l,t.id+"",a)}function em(t,i){var e=t.style,r=e.image;if(r&&!ie(r)&&(mu(r)?r=r.src:Su(r)&&(r=r.toDataURL())),!!r){var n=e.x||0,a=e.y||0,o=e.width,l=e.height,s={href:r,width:o,height:l};return n&&(s.x=n),a&&(s.y=a),na(s,t.transform),ia(s,e,t,i),ra(s,t),i.animation&&qi(t,s,i),ue("image",t.id+"",s)}}function tm(t,i){var e=t.style,r=e.text;if(r!=null&&(r+=""),!(!r||isNaN(e.x)||isNaN(e.y))){var n=e.font||yc,a=e.x||0,o=mc(e.y||0,Sc(n),e.textBaseline),l=xc[e.textAlign]||e.textAlign,s={"dominant-baseline":"central","text-anchor":l};if(_c(e)){var u="",f=e.fontStyle,c=bc(e.fontSize);if(!parseFloat(c))return;var v=e.fontFamily||wc,h=e.fontWeight;u+="font-size:"+c+";font-family:"+v+";",f&&f!=="normal"&&(u+="font-style:"+f+";"),h&&h!=="normal"&&(u+="font-weight:"+h+";"),s.style=u}else s.style="font: "+n;return r.match(/\s/)&&(s["xml:space"]="preserve"),a&&(s.x=a),o&&(s.y=o),na(s,t.transform),ia(s,e,t,i),ra(s,t),i.animation&&qi(t,s,i),ue("text",t.id+"",s,void 0,r)}}function gl(t,i){if(t instanceof ut)return xu(t,i);if(t instanceof bt)return em(t,i);if(t instanceof cc)return tm(t,i)}function im(t,i,e){var r=t.style;if(Cc(r)){var n=Ac(t),a=e.shadowCache,o=a[n];if(!o){var l=t.getGlobalScale(),s=l[0],u=l[1];if(!s||!u)return;var f=r.shadowOffsetX||0,c=r.shadowOffsetY||0,v=r.shadowBlur,h=Kt(r.shadowColor),d=h.opacity,p=h.color,y=v/2/s,S=v/2/u,x=y+" "+S;o=e.zrId+"-s"+e.shadowIdx++,e.defs[o]=ue("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[ue("feDropShadow","",{dx:f/s,dy:c/u,stdDeviation:x,"flood-color":p,"flood-opacity":d})]),a[n]=o}i.filter=Yi(o)}}function _u(t,i,e,r){var n=t[e],a,o={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(vc(n))a="linearGradient",o.x1=n.x,o.y1=n.y,o.x2=n.x2,o.y2=n.y2;else if(hc(n))a="radialGradient",o.cx=ge(n.x,.5),o.cy=ge(n.y,.5),o.r=ge(n.r,.5);else return;for(var l=n.colorStops,s=[],u=0,f=l.length;u<f;++u){var c=dc(l[u].offset)*100+"%",v=l[u].color,h=Kt(v),d=h.color,p=h.opacity,y={offset:c};y["stop-color"]=d,p<1&&(y["stop-opacity"]=p),s.push(ue("stop",u+"",y))}var S=ue(a,"",o,s),x=ta(S),m=r.gradientCache,_=m[x];_||(_=r.zrId+"-g"+r.gradientIdx++,m[x]=_,o.id=_,r.defs[_]=ue(a,_,o,s)),i[e]=Yi(_)}function bu(t,i,e,r){var n=t.style[e],a=t.getBoundingRect(),o={},l=n.repeat,s=l==="no-repeat",u=l==="repeat-x",f=l==="repeat-y",c;if(pc(n)){var v=n.imageWidth,h=n.imageHeight,d=void 0,p=n.image;if(ie(p)?d=p:mu(p)?d=p.src:Su(p)&&(d=p.toDataURL()),typeof Image>"u"){var y="Image width/height must been given explictly in svg-ssr renderer.";Wr(v,y),Wr(h,y)}else if(v==null||h==null){var S=function(I,L){if(I){var M=I.elm,V=v||L.width,P=h||L.height;I.tag==="pattern"&&(u?(P=1,V/=a.width):f&&(V=1,P/=a.height)),I.attrs.width=V,I.attrs.height=P,M&&(M.setAttribute("width",V),M.setAttribute("height",P))}},x=gc(d,null,t,function(I){s||S(w,I),S(c,I)});x&&x.width&&x.height&&(v=v||x.width,h=h||x.height)}c=ue("image","img",{href:d,width:v,height:h}),o.width=v,o.height=h}else n.svgElement&&(c=oe(n.svgElement),o.width=n.svgWidth,o.height=n.svgHeight);if(c){var m,_;s?m=_=1:u?(_=1,m=o.width/a.width):f?(m=1,_=o.height/a.height):o.patternUnits="userSpaceOnUse",m!=null&&!isNaN(m)&&(o.width=m),_!=null&&!isNaN(_)&&(o.height=_);var b=os(n);b&&(o.patternTransform=b);var w=ue("pattern","",o,[c]),D=ta(w),T=r.patternCache,A=T[D];A||(A=r.zrId+"-p"+r.patternIdx++,T[D]=A,o.id=A,w=r.defs[A]=ue("pattern",A,o,[c])),i[e]=Yi(A)}}function rm(t,i,e){var r=e.clipPathCache,n=e.defs,a=r[t.id];if(!a){a=e.zrId+"-c"+e.clipPathIdx++;var o={id:a};r[t.id]=a,n[a]=ue("clipPath",a,o,[xu(t,e)])}i["clip-path"]=Yi(a)}function yl(t){return document.createTextNode(t)}function yt(t,i,e){t.insertBefore(i,e)}function ml(t,i){t.removeChild(i)}function Sl(t,i){t.appendChild(i)}function wu(t){return t.parentNode}function Du(t){return t.nextSibling}function Gr(t,i){t.textContent=i}var xl=58,nm=120,am=ue("","");function pn(t){return t===void 0}function Oe(t){return t!==void 0}function om(t,i,e){for(var r={},n=i;n<=e;++n){var a=t[n].key;a!==void 0&&(r[a]=n)}return r}function Wt(t,i){var e=t.key===i.key,r=t.tag===i.tag;return r&&e}function ni(t){var i,e=t.children,r=t.tag;if(Oe(r)){var n=t.elm=pu(r);if(aa(am,t),B(e))for(i=0;i<e.length;++i){var a=e[i];a!=null&&Sl(n,ni(a))}else Oe(t.text)&&!Me(t.text)&&Sl(n,yl(t.text))}else t.elm=yl(t.text);return t.elm}function Tu(t,i,e,r,n){for(;r<=n;++r){var a=e[r];a!=null&&yt(t,ni(a),i)}}function Gi(t,i,e,r){for(;e<=r;++e){var n=i[e];if(n!=null)if(Oe(n.tag)){var a=wu(n.elm);ml(a,n.elm)}else ml(t,n.elm)}}function aa(t,i){var e,r=i.elm,n=t&&t.attrs||{},a=i.attrs||{};if(n!==a){for(e in a){var o=a[e],l=n[e];l!==o&&(o===!0?r.setAttribute(e,""):o===!1?r.removeAttribute(e):e==="style"?r.style.cssText=o:e.charCodeAt(0)!==nm?r.setAttribute(e,o):e==="xmlns:xlink"||e==="xmlns"?r.setAttributeNS(By,e,o):e.charCodeAt(3)===xl?r.setAttributeNS(Oy,e,o):e.charCodeAt(5)===xl?r.setAttributeNS(du,e,o):r.setAttribute(e,o))}for(e in n)e in a||r.removeAttribute(e)}}function lm(t,i,e){for(var r=0,n=0,a=i.length-1,o=i[0],l=i[a],s=e.length-1,u=e[0],f=e[s],c,v,h,d;r<=a&&n<=s;)o==null?o=i[++r]:l==null?l=i[--a]:u==null?u=e[++n]:f==null?f=e[--s]:Wt(o,u)?(Ct(o,u),o=i[++r],u=e[++n]):Wt(l,f)?(Ct(l,f),l=i[--a],f=e[--s]):Wt(o,f)?(Ct(o,f),yt(t,o.elm,Du(l.elm)),o=i[++r],f=e[--s]):Wt(l,u)?(Ct(l,u),yt(t,l.elm,o.elm),l=i[--a],u=e[++n]):(pn(c)&&(c=om(i,r,a)),v=c[u.key],pn(v)?yt(t,ni(u),o.elm):(h=i[v],h.tag!==u.tag?yt(t,ni(u),o.elm):(Ct(h,u),i[v]=void 0,yt(t,h.elm,o.elm))),u=e[++n]);(r<=a||n<=s)&&(r>a?(d=e[s+1]==null?null:e[s+1].elm,Tu(t,d,e,n,s)):Gi(t,i,r,a))}function Ct(t,i){var e=i.elm=t.elm,r=t.children,n=i.children;t!==i&&(aa(t,i),pn(i.text)?Oe(r)&&Oe(n)?r!==n&&lm(e,r,n):Oe(n)?(Oe(t.text)&&Gr(e,""),Tu(e,null,n,0,n.length-1)):Oe(r)?Gi(e,r,0,r.length-1):Oe(t.text)&&Gr(e,""):t.text!==i.text&&(Oe(r)&&Gi(e,r,0,r.length-1),Gr(e,i.text)))}function sm(t,i){if(Wt(t,i))Ct(t,i);else{var e=t.elm,r=wu(e);ni(i),r!==null&&(yt(r,i.elm,Du(e)),Gi(r,[t],0,0))}return i}var um=0,fm=function(){function t(i,e,r){if(this.type="svg",this.refreshHover=_l(),this.configLayer=_l(),this.storage=e,this._opts=r=O({},r),this.root=i,this._id="zr"+um++,this._oldVNode=ul(r.width,r.height),i&&!r.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=pu("svg");aa(null,this._oldVNode),n.appendChild(a),i.appendChild(n)}this.resize(r.width,r.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var i=this.getViewportRoot();if(i)return{offsetLeft:i.offsetLeft||0,offsetTop:i.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var i=this.renderToVNode({willUpdate:!0});i.attrs.style="position:absolute;left:0;top:0;user-select:none",sm(this._oldVNode,i),this._oldVNode=i}},t.prototype.renderOneToVNode=function(i){return gl(i,dn(this._id))},t.prototype.renderToVNode=function(i){i=i||{};var e=this.storage.getDisplayList(!0),r=this._width,n=this._height,a=dn(this._id);a.animation=i.animation,a.willUpdate=i.willUpdate,a.compress=i.compress,a.emphasis=i.emphasis;var o=[],l=this._bgVNode=cm(r,n,this._backgroundColor,a);l&&o.push(l);var s=i.compress?null:this._mainVNode=ue("g","main",{},[]);this._paintList(e,a,s?s.children:o),s&&o.push(s);var u=H(he(a.defs),function(v){return a.defs[v]});if(u.length&&o.push(ue("defs","defs",{},u)),i.animation){var f=Wy(a.cssNodes,a.cssAnims,{newline:!0});if(f){var c=ue("style","stl",{},[],f);o.push(c)}}return ul(r,n,o,i.useViewBox)},t.prototype.renderToString=function(i){return i=i||{},ta(this.renderToVNode({animation:ge(i.cssAnimation,!0),emphasis:ge(i.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:ge(i.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(i){this._backgroundColor=i},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(i,e,r){for(var n=i.length,a=[],o=0,l,s,u=0,f=0;f<n;f++){var c=i[f];if(!c.invisible){var v=c.__clipPaths,h=v&&v.length||0,d=s&&s.length||0,p=void 0;for(p=Math.max(h-1,d-1);p>=0&&!(v&&s&&v[p]===s[p]);p--);for(var y=d-1;y>p;y--)o--,l=a[o-1];for(var S=p+1;S<h;S++){var x={};rm(v[S],x,e);var m=ue("g","clip-g-"+u++,x,[]);(l?l.children:r).push(m),a[o++]=m,l=m}s=v;var _=gl(c,e);_&&(l?l.children:r).push(_)}}},t.prototype.resize=function(i,e){var r=this._opts,n=this.root,a=this._viewport;if(i!=null&&(r.width=i),e!=null&&(r.height=e),n&&a&&(a.style.display="none",i=Sa(n,0,r),e=Sa(n,1,r),a.style.display=""),this._width!==i||this._height!==e){if(this._width=i,this._height=e,a){var o=a.style;o.width=i+"px",o.height=e+"px"}if(Rn(this._backgroundColor))this.refresh();else{var l=this._svgDom;l&&(l.setAttribute("width",i),l.setAttribute("height",e));var s=this._bgVNode&&this._bgVNode.elm;s&&(s.setAttribute("width",i),s.setAttribute("height",e))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(i){var e=this.renderToString(),r="data:image/svg+xml;";return i?(e=Ic(e),e&&r+"base64,"+e):r+"charset=UTF-8,"+encodeURIComponent(e)},t}();function _l(t){return function(){}}function cm(t,i,e,r){var n;if(e&&e!=="none")if(n=ue("rect","bg",{width:t,height:i,x:"0",y:"0"}),ss(e))_u({fill:e},n.attrs,"fill",r);else if(Rn(e))bu({style:{fill:e},dirty:xt,getBoundingRect:function(){return{width:t,height:i}}},n.attrs,"fill",r);else{var a=Kt(e),o=a.color,l=a.opacity;n.attrs.fill=o,l<1&&(n.attrs["fill-opacity"]=l)}return n}function vm(t){t.registerPainter("svg",fm)}U([Lc]);U([vm]);U([Pc,Mc,Vc,jc,Nc,hv,Ev,mh,Rh,Ec,$h,Dd,Zd,op,bp,Cp,Rc,jp,Fp,Kp,og,Wg]);U(kc);U(zc);U(Tl);U(i0);U(Ls);U(o0);U(p0);U(Bc);U(Oc);U(is);U(V0);U(Gc);U(H0);U(Z0);U(ty);U(ly);U(Hc);U(Wc);U(Fc);U($c);U(Ay);U(uu);U(fu);U(Vy);U(Uc);U(Yc);U(Xc);U(Zc);const hm="https://static1.tuyacn.com/static/tuyav/smart/data-visualization/data/mapData/";let g="";function dm(t){return t.includes("中国")?g="100000_full.json":t.includes("北京")?g="110000_full.json":t.includes("东城")?g="110101.json":t.includes("西城")?g="110102.json":t.includes("朝阳区")?g="110105.json":t.includes("丰台")?g="110106.json":t.includes("石景山")?g="110107.json":t.includes("海淀")?g="110108.json":t.includes("顺义")?g="110113.json":t.includes("通州")?g="110112.json":t.includes("大兴")?g="110115.json":t.includes("房山")?g="110111.json":t.includes("门头沟")?g="110109.json":t.includes("昌平")?g="110114.json":t.includes("平谷")?g="110117.json":t.includes("密云")?g="110118.json":t.includes("怀柔")?g="110116.json":t.includes("延庆")?g="110119.json":t.includes("天津")?g="120000_full.json":t.includes("和平")?g="120101.json":t.includes("河东")?g="120102.json":t.includes("河西")?g="120103.json":t.includes("南开")?g="120104.json":t.includes("河北")?g="120105.json":t.includes("红桥")?g="120106.json":t.includes("东丽")?g="120110.json":t.includes("西青")?g="120111.json":t.includes("津南")?g="120112.json":t.includes("北辰")?g="120113.json":t.includes("武清")?g="120114.json":t.includes("宝坻")?g="120115.json":t.includes("滨海新")?g="120116.json":t.includes("宁河")?g="120117.json":t.includes("静海")?g="120118.json":t.includes("蓟州")?g="120119.json":t.includes("河北")?g="130000_full.json":t.includes("石家庄")?g="130100_full.json":t.includes("唐山")?g="130200_full.json":t.includes("秦皇岛")?g="130300_full.json":t.includes("邯郸")?g="130400_full.json":t.includes("邢台")?g="130500_full.json":t.includes("保定")?g="130600_full.json":t.includes("张家口")?g="130700_full.json":t.includes("承德")?g="130800_full.json":t.includes("沧州")?g="130900_full.json":t.includes("廊坊")?g="131000_full.json":t.includes("衡水")?g="131100_full.json":t.includes("山西")?g="140000_full.json":t.includes("太原")?g="140100_full.json":t.includes("大同")?g="140200_full.json":t.includes("阳泉")?g="140300_full.json":t.includes("长治")?g="140400_full.json":t.includes("晋城")?g="140500_full.json":t.includes("朔州")?g="140600_full.json":t.includes("晋中")?g="140700_full.json":t.includes("运城")?g="140800_full.json":t.includes("忻州")?g="140900_full.json":t.includes("临汾")?g="141000_full.json":t.includes("吕梁")?g="140000_full.json":t.includes("内蒙古")?g="150000_full.json":t.includes("呼和浩特")?g="150100_full.json":t.includes("包头")?g="150200_full.json":t.includes("乌海")?g="150300_full.json":t.includes("赤峰")?g="150400_full.json":t.includes("通辽")?g="150500_full.json":t.includes("鄂尔多斯")?g="150600_full.json":t.includes("呼伦贝尔")?g="150700_full.json":t.includes("巴彦淖尔")?g="150800_full.json":t.includes("乌兰察布")?g="150900_full.json":t.includes("兴安盟")?g="152200_full.json":t.includes("锡林郭勒盟")?g="152500_full.json":t.includes("阿拉善盟")?g="152900_full.json":t.includes("辽宁")?g="210000_full.json":t.includes("沈阳")?g="210100_full.json":t.includes("大连")?g="210200_full.json":t.includes("鞍山")?g="210300_full.json":t.includes("抚顺")?g="210400_full.json":t.includes("本溪")?g="210500_full.json":t.includes("丹东")?g="210600_full.json":t.includes("锦州")?g="210700_full.json":t.includes("营口")?g="210800_full.json":t.includes("阜新")?g="210900_full.json":t.includes("辽阳")?g="211000_full.json":t.includes("盘锦")?g="211100_full.json":t.includes("铁岭")?g="211200_full.json":t.includes("朝阳市")?g="211300_full.json":t.includes("葫芦岛")?g="211400_full.json":t.includes("吉林省")?g="220000_full.json":t.includes("长春")?g="220100_full.json":t.includes("吉林市")?g="220200_full.json":t.includes("四平")?g="220300_full.json":t.includes("辽源")?g="220400_full.json":t.includes("通化")?g="220500_full.json":t.includes("白山")?g="220600_full.json":t.includes("松原")?g="220700_full.json":t.includes("白城")?g="220800_full.json":t.includes("延边朝鲜")?g="222400_full.json":t.includes("黑龙江")?g="230000_full.json":t.includes("哈尔滨")?g="230100_full.json":t.includes("齐齐哈尔")?g="230200_full.json":t.includes("鸡西")?g="230300_full.json":t.includes("鹤岗")?g="230400_full.json":t.includes("双鸭山")?g="230500_full.json":t.includes("大庆市")?g="230600_full.json":t.includes("伊春山")?g="230700_full.json":t.includes("佳木斯")?g="230800_full.json":t.includes("七台河")?g="230900_full.json":t.includes("牡丹江")?g="231000_full.json":t.includes("黑河")?g="231100_full.json":t.includes("绥化")?g="231200_full.json":t.includes("大兴安岭")?g="231700_full.json":t.includes("上海")?g="310000_full.json":t.includes("黄埔")?g="310101.json":t.includes("徐汇")?g="310104.json":t.includes("长宁")?g="310105.json":t.includes("静安")?g="310106.json":t.includes("普陀山")?g="310107.json":t.includes("虹口")?g="310109.json":t.includes("杨浦")?g="310110.json":t.includes("闵行")?g="310112.json":t.includes("宝山")?g="310113.json":t.includes("嘉定")?g="310114.json":t.includes("浦东新区")?g="310115.json":t.includes("金山区")?g="310116.json":t.includes("松江区")?g="310117.json":t.includes("青浦区")?g="310118.json":t.includes("奉贤区")?g="310120.json":t.includes("崇明区")?g="310151.json":t.includes("江苏")?g="320000_full.json":t.includes("南京")?g="320100_full.json":t.includes("无锡")?g="320200_full.json":t.includes("徐州")?g="320300_full.json":t.includes("常州")?g="320400_full.json":t.includes("苏州")?g="320500_full.json":t.includes("南通")?g="320600_full.json":t.includes("连云港")?g="320700_full.json":t.includes("淮安")?g="320800_full.json":t.includes("盐城")?g="320900_full.json":t.includes("扬州")?g="321000_full.json":t.includes("镇江")?g="321100_full.json":t.includes("秦州")?g="321200_full.json":t.includes("宿迁")?g="321300_full.json":t.includes("浙江")?g="330000_full.json":t.includes("杭州")?g="330100_full.json":t.includes("宁波")?g="330200_full.json":t.includes("温州")?g="330300_full.json":t.includes("嘉兴")?g="330400_full.json":t.includes("湖州")?g="330500_full.json":t.includes("绍兴")?g="330600_full.json":t.includes("金华")?g="330700_full.json":t.includes("衢州")?g="330800_full.json":t.includes("舟山")?g="330900_full.json":t.includes("台州")?g="331000_full.json":t.includes("丽水")?g="331100_full.json":t.includes("安徽")?g="340000_full.json":t.includes("合肥")?g="340100_full.json":t.includes("芜湖")?g="340200_full.json":t.includes("蚌埠")?g="340300_full.json":t.includes("淮南")?g="340400_full.json":t.includes("马鞍山")?g="340500_full.json":t.includes("淮北")?g="340600_full.json":t.includes("铜陵")?g="340700_full.json":t.includes("安庆")?g="340800_full.json":t.includes("黄山")?g="341000_full.json":t.includes("滁州")?g="341100_full.json":t.includes("阜阳")?g="341200_full.json":t.includes("宿州")?g="341300_full.json":t.includes("六安")?g="341500_full.json":t.includes("毫州")?g="341600_full.json":t.includes("池州")?g="341700_full.json":t.includes("宣城")?g="341800_full.json":t.includes("福建")?g="350000_full.json":t.includes("福州")?g="350100_full.json":t.includes("厦门")?g="350200_full.json":t.includes("莆田")?g="350300_full.json":t.includes("三明")?g="350400_full.json":t.includes("泉州")?g="350500_full.json":t.includes("漳州")?g="350600_full.json":t.includes("南平")?g="350700_full.json":t.includes("龙岩")?g="350800_full.json":t.includes("宁德")?g="350900_full.json":t.includes("江西")?g="360000_full.json":t.includes("南昌")?g="360100_full.json":t.includes("景德镇")?g="360200_full.json":t.includes("萍乡")?g="360300_full.json":t.includes("九江")?g="360400_full.json":t.includes("新余")?g="360500_full.json":t.includes("鹰潭")?g="360600_full.json":t.includes("赣州")?g="360700_full.json":t.includes("吉安")?g="360800_full.json":t.includes("宜春")?g="360900_full.json":t.includes("抚州")?g="361000_full.json":t.includes("上饶")?g="361100_full.json":t.includes("山东")?g="370000_full.json":t.includes("济南")?g="370100_full.json":t.includes("青岛")?g="370200_full.json":t.includes("淄博")?g="370300_full.json":t.includes("枣庄")?g="370400_full.json":t.includes("东营")?g="370500_full.json":t.includes("烟台")?g="370600_full.json":t.includes("潍坊")?g="370700_full.json":t.includes("济宁")?g="370800_full.json":t.includes("泰安")?g="370900_full.json":t.includes("威海")?g="371000_full.json":t.includes("日照")?g="371100_full.json":t.includes("临沂")?g="371300_full.json":t.includes("德州")?g="371400_full.json":t.includes("菏泽")?g="371700_full.json":t.includes("聊城")?g="371500_full.json":t.includes("滨州")?g="371600_full.json":t.includes("河南")?g="410000_full.json":t.includes("郑州")?g="410100_full.json":t.includes("开封")?g="410200_full.json":t.includes("洛阳")?g="410300_full.json":t.includes("平顶山")?g="410400_full.json":t.includes("安阳")?g="410500_full.json":t.includes("鹤壁")?g="410600_full.json":t.includes("新乡")?g="410700_full.json":t.includes("焦作")?g="410800_full.json":t.includes("濮阳")?g="410900_full.json":t.includes("许昌")?g="411000_full.json":t.includes("漯河")?g="411100_full.json":t.includes("三门峡")?g="411200_full.json":t.includes("南阳")?g="411300_full.json":t.includes("商丘")?g="411400_full.json":t.includes("信阳")?g="411500_full.json":t.includes("周口")?g="411600_full.json":t.includes("驻马店")?g="411700_full.json":t.includes("济源")?g="419001.json":t.includes("湖北")?g="420000_full.json":t.includes("武汉")?g="420100_full.json":t.includes("黄石")?g="420200_full.json":t.includes("十堰")?g="420300_full.json":t.includes("宜昌")?g="420500_full.json":t.includes("襄阳")?g="420600_full.json":t.includes("鄂州")?g="420700_full.json":t.includes("荆门")?g="420800_full.json":t.includes("孝感")?g="420900_full.json":t.includes("荆州")?g="421000_full.json":t.includes("黄冈")?g="421100_full.json":t.includes("咸宁")?g="421200_full.json":t.includes("随州")?g="421300_full.json":t.includes("恩施土")?g="422800_full.json":t.includes("神农")?g="429021.json":t.includes("天门")?g="429006.json":t.includes("潜江")?g="429005.json":t.includes("仙桃")?g="429004.json":t.includes("湖南")?g="430000_full.json":t.includes("长沙")?g="430100_full.json":t.includes("株洲")?g="430200_full.json":t.includes("湘潭")?g="430300_full.json":t.includes("衡阳")?g="430400_full.json":t.includes("邵阳")?g="430500_full.json":t.includes("岳阳")?g="430600_full.json":t.includes("常德")?g="430700_full.json":t.includes("张家界")?g="430800_full.json":t.includes("益阳")?g="430900_full.json":t.includes("郴州")?g="431000_full.json":t.includes("永州")?g="431100_full.json":t.includes("怀化")?g="431200_full.json":t.includes("娄底")?g="431300_full.json":t.includes("湘西")?g="433100_full.json":t.includes("广东")?g="440000_full.json":t.includes("广州")?g="440100_full.json":t.includes("韶关")?g="440200_full.json":t.includes("深圳")?g="440300_full.json":t.includes("珠海")?g="440400_full.json":t.includes("汕头")?g="440500_full.json":t.includes("佛山")?g="440600_full.json":t.includes("江门")?g="440700_full.json":t.includes("湛江")?g="440800_full.json":t.includes("茂名")?g="440900_full.json":t.includes("肇庆")?g="441200_full.json":t.includes("惠州")?g="441300_full.json":t.includes("梅州")?g="441400_full.json":t.includes("汕尾")?g="441500_full.json":t.includes("河源")?g="441600_full.json":t.includes("阳江")?g="441700_full.json":t.includes("清远")?g="441800_full.json":t.includes("东莞")?g="441900.json":t.includes("中山")?g="442000_full.json":t.includes("潮州")?g="445100_full.json":t.includes("揭阳")?g="445200_full.json":t.includes("云浮")?g="445300_full.json":t.includes("广西")?g="450000_full.json":t.includes("南宁")?g="450100_full.json":t.includes("柳州")?g="450200_full.json":t.includes("桂林")?g="450300_full.json":t.includes("梧州")?g="450400_full.json":t.includes("北海")?g="450500_full.json":t.includes("防城港")?g="450600_full.json":t.includes("钦州")?g="450700_full.json":t.includes("贵港")?g="450800_full.json":t.includes("玉林")?g="450900_full.json":t.includes("百色")?g="451000_full.json":t.includes("贺州")?g="451100_full.json":t.includes("河池")?g="451200_full.json":t.includes("来宾")?g="451300_full.json":t.includes("崇左")?g="451400_full.json":t.includes("海南省")?g="460000_full.json":t.includes("海口")?g="460100_full.json":t.includes("三亚")?g="460200_full.json":t.includes("三沙")?g="460300_full.json":t.includes("儋州")?g="460400_full.json":t.includes("五指山")?g="469001_full.json":t.includes("琼海")?g="469002_full.json":t.includes("文昌")?g="469005_full.json":t.includes("万宁")?g="469006_full.json":t.includes("东方")?g="469007_full.json":t.includes("定安")?g="469025_full.json":t.includes("屯昌")?g="469026_full.json":t.includes("澄迈")?g="469023_full.json":t.includes("临高")?g="469024_full.json":t.includes("白沙")?g="469025.json":t.includes("昌江")?g="469026.json":t.includes("乐东")?g="469027.json":t.includes("陵水")?g="469028.json":t.includes("保亭")?g="469029.json":t.includes("琼中")?g="469030.json":t.includes("重庆")?g="500000_full.json":t.includes("万州")?g="500101.json":t.includes("涪陵")?g="500102.json":t.includes("渝中")?g="500103.json":t.includes("大渡口")?g="500104.json":t.includes("江北")?g="500105.json":t.includes("沙坪坝")?g="500106.json":t.includes("九龙坡")?g="500107.json":t.includes("南岸")?g="500108.json":t.includes("北碚")?g="500109.json":t.includes("綦江")?g="500110.json":t.includes("大足")?g="500111.json":t.includes("渝北")?g="500112.json":t.includes("巴南")?g="500113.json":t.includes("黔江")?g="500114.json":t.includes("长寿")?g="500115.json":t.includes("江津")?g="500116.json":t.includes("合川")?g="500117.json":t.includes("永川")?g="500118.json":t.includes("南川")?g="500119.json":t.includes("璧山")?g="500120.json":t.includes("铜梁")?g="500151.json":t.includes("潼南")?g="500152.json":t.includes("荣昌")?g="500153.json":t.includes("开州")?g="500154.json":t.includes("梁平")?g="500155.json":t.includes("武隆")?g="500156.json":t.includes("城口")?g="500229.json":t.includes("丰都")?g="500230.json":t.includes("垫江")?g="500231.json":t.includes("忠县")?g="500233.json":t.includes("云阳")?g="500235.json":t.includes("奉节")?g="500236.json":t.includes("巫山")?g="500237.json":t.includes("巫溪")?g="500238.json":t.includes("石柱")?g="500240.json":t.includes("秀山")?g="500241.json":t.includes("酉阳")?g="500242.json":t.includes("彭水")?g="500243.json":t.includes("四川")?g="510000_full.json":t.includes("成都")?g="510100_full.json":t.includes("自贡")?g="510300_full.json":t.includes("攀枝花")?g="510400_full.json":t.includes("泸州")?g="510500_full.json":t.includes("德阳")?g="510600_full.json":t.includes("绵阳")?g="510700_full.json":t.includes("广元")?g="510800_full.json":t.includes("遂宁")?g="510900_full.json":t.includes("内江")?g="511000_full.json":t.includes("乐山")?g="511100_full.json":t.includes("南充")?g="511300_full.json":t.includes("眉山")?g="511400_full.json":t.includes("宜宾")?g="511500_full.json":t.includes("广安")?g="511600_full.json":t.includes("达州")?g="511700_full.json":t.includes("雅安")?g="511800_full.json":t.includes("巴中")?g="511900_full.json":t.includes("资阳")?g="512000_full.json":t.includes("阿坝")?g="513200_full.json":t.includes("甘孜")?g="513300_full.json":t.includes("凉山")?g="513400_full.json":t.includes("贵州")?g="520000_full.json":t.includes("贵阳")?g="520100_full.json":t.includes("六盘水")?g="520200_full.json":t.includes("遵义")?g="520300_full.json":t.includes("安顺")?g="520400_full.json":t.includes("毕节")?g="520500_full.json":t.includes("铜仁")?g="520600_full.json":t.includes("黔西")?g="522300_full.json":t.includes("黔东")?g="522600_full.json":t.includes("黔南")?g="522700_full.json":t.includes("云南")?g="530000_full.json":t.includes("昆明")?g="530100_full.json":t.includes("曲靖")?g="530300_full.json":t.includes("玉溪")?g="530400_full.json":t.includes("保山")?g="530500_full.json":t.includes("昭通")?g="530600_full.json":t.includes("丽江")?g="530700_full.json":t.includes("普洱")?g="530800_full.json":t.includes("临沧")?g="530900_full.json":t.includes("楚雄")?g="532300_full.json":t.includes("红河")?g="532500_full.json":t.includes("文山")?g="532600_full.json":t.includes("西双版纳")?g="532800_full.json":t.includes("大理")?g="532900_full.json":t.includes("德宏")?g="533100_full.json":t.includes("怒江")?g="533300_full.json":t.includes("迪庆")?g="533400_full.json":t.includes("西藏")?g="540000_full.json":t.includes("拉萨")?g="540100_full.json":t.includes("日喀")?g="540200_full.json":t.includes("昌都")?g="540300_full.json":t.includes("林芝")?g="540400_full.json":t.includes("山南")?g="540500_full.json":t.includes("那曲")?g="540600_full.json":t.includes("阿里")?g="542500_full.json":t.includes("陕西")?g="610000_full.json":t.includes("西安")?g="610100_full.json":t.includes("铜川")?g="610200_full.json":t.includes("宝鸡")?g="610300_full.json":t.includes("咸阳")?g="610400_full.json":t.includes("渭南")?g="610500_full.json":t.includes("延安")?g="610600_full.json":t.includes("汉中")?g="610700_full.json":t.includes("榆林")?g="610800_full.json":t.includes("安康")?g="610900_full.json":t.includes("商洛")?g="611000_full.json":t.includes("甘肃")?g="620000_full.json":t.includes("兰州")?g="620100_full.json":t.includes("嘉峪关")?g="620200_full.json":t.includes("金昌")?g="620300_full.json":t.includes("白银")?g="620400_full.json":t.includes("天水")?g="620500_full.json":t.includes("武威")?g="620600_full.json":t.includes("张掖")?g="620700_full.json":t.includes("平凉")?g="620800_full.json":t.includes("酒泉")?g="620900_full.json":t.includes("庆阳")?g="621000_full.json":t.includes("定西")?g="621100_full.json":t.includes("陇南")?g="621200_full.json":t.includes("临夏")?g="622900.json":t.includes("甘南")?g="623000_full.json":t.includes("青海")?g="630000_full.json":t.includes("西宁")?g="630100_full.json":t.includes("海东")?g="630200_full.json":t.includes("海北")?g="632200_full.json":t.includes("黄南")?g="632300_full.json":t.includes("海南藏族")?g="632500_full.json":t.includes("果洛")?g="632600_full.json":t.includes("玉树")?g="632700_full.json":t.includes("海西")?g="632800_full.json":t.includes("宁夏")?g="640000_full.json":t.includes("银川")?g="640100_full.json":t.includes("石嘴山")?g="640200_full.json":t.includes("吴忠")?g="640300_full.json":t.includes("固原")?g="640400_full.json":t.includes("中卫")?g="640500_full.json":t.includes("新疆")?g="650000_full.json":t.includes("乌鲁木齐")?g="650100_full.json":t.includes("克拉玛依")?g="650200_full.json":t.includes("吐鲁番")?g="650400_full.json":t.includes("哈密")?g="650500_full.json":t.includes("昌吉")?g="652300_full.json":t.includes("博尔")?g="652700_full.json":t.includes("巴音")?g="652800_full.json":t.includes("阿克苏")?g="652900_full.json":t.includes("克孜勒苏")?g="653000_full.json":t.includes("喀什")?g="653100_full.json":t.includes("和田")?g="653200_full.json":t.includes("伊犁")?g="654000_full.json":t.includes("塔城")?g="654200_full.json":t.includes("阿勒泰")?g="654300_full.json":t.includes("石河子")?g="659001.json":t.includes("阿拉尔")?g="659002.json":t.includes("图木舒克")?g="659003.json":t.includes("五家渠")?g="659004_full.json":t.includes("北屯")?g="659005.json":t.includes("铁门关")?g="659006.json":t.includes("双河市")?g="659007.json":t.includes("可克达拉")?g="659008.json":t.includes("昆玉")?g="659009.json":t.includes("胡杨河")?g="659010.json":t.includes("台湾")?g="710000.json":t.includes("香港")?g="810000_full.json":t.includes("中西")?g="810001.json":t.includes("湾仔")?g="810002.json":t.includes("东区")?g="810003.json":t.includes("南区")?g="810004.json":t.includes("油尖旺")?g="810005.json":t.includes("深水埗")?g="810006.json":t.includes("九龙城")?g="810007.json":t.includes("黄大仙")?g="810008.json":t.includes("观塘")?g="810009.json":t.includes("荃湾")?g="810010.json":t.includes("屯门")?g="810011.json":t.includes("元朗")?g="810012.json":t.includes("北区")?g="810013.json":t.includes("大埔区")?g="810014.json":t.includes("西贡")?g="810015.json":t.includes("沙田")?g="810016.json":t.includes("葵青")?g="810017.json":t.includes("离岛")?g="810018.json":t.includes("澳门")?g="820000_full.json":t.includes("花地玛堂")?g="820001.json":t.includes("花王堂")?g="820002.json":t.includes("望德堂")?g="820003.json":t.includes("大堂")?g="820004.json":t.includes("风顺堂")?g="820005.json":t.includes("嘉模堂")?g="820006.json":t.includes("路凼填海")?g="820007.json":t.includes("圣方济")&&(g="820008.json"),Jc.get(hm+g)}const pm={class:"chart_map_wrap"},gm={__name:"MapChart",props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"100%"},chartFontColor:{type:String,default:"#000"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0},txtFontSize:{type:Number,default:15}},emits:["selectCity"],setup(t,{emit:i}){const e=i,r=ci(null),n=ci(null),a=ci("中国"),o=ci("中国"),l=d=>{n.value&&(n.value.dispose(),n.value=null,d&&d())},s=()=>{l(()=>{a.value="中国",o.value="中国",f(a.value),v()})},u=d=>{o.value!==a.value&&(o.value=a.value),a.value=d.name,f(a.value),e("selectCity",{pro:o.value,place:a.value})},f=d=>{dm(d).then(p=>{n.value.hideLoading(),qc("cityMap",p.data),c(p.data)})},c=d=>{if(JSON.stringify(d)==="[]")return;let p={tooltip:{textStyle:{fontSize:12,color:"#fff"},trigger:"item",backgroundColor:"rgba(0,0,0,0.5)",formatter:y=>`${y.name}<br/>下设区域：${y.data.value}`},series:[{type:"map",map:"cityMap",layoutCenter:["50%","66%"],layoutSize:"135%",data:d.features.map(y=>({name:y.properties.name,value:y.properties.childrenNum})),roam:!0,itemStyle:{borderColor:"rgba(0, 178, 255, 1)",borderWidth:1,areaColor:new Pn(0,1,0,0,[{offset:0,color:"rgba(0, 137, 208, 0.32)"},{offset:1,color:"rgba(0, 66, 164, 0.32)"}],!1),shadowColor:"RGBA(7, 59, 115, .1)",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10},emphasis:{itemStyle:{areaColor:"#78defd",borderColor:"#00ade0",borderWidth:1},label:{show:!0,color:"#fff",fontSize:13}},select:{label:{color:"#fff"},itemStyle:{color:"#fff",areaColor:"#00ade0",borderColor:"#00ade0",borderWidth:3}},label:{show:!0,color:"#fff",fontSize:11,fontWeight:600}}]};n.value.setOption(p)},v=()=>{n.value=Kc(r.value),n.value.showLoading(),f(a.value),n.value.on("click",u),window.onresize=()=>{n.value.resize()}};ev(()=>{v()}),tv(()=>{l()});const h=()=>{f(o.value),o.value,a.value};return(d,p)=>{const y=iv("el-button");return rv(),nv("section",pm,[nr("ul",null,[nr("li",null,[xa(y,{onClick:s},{default:_a(()=>p[0]||(p[0]=[ba("重置地图到中国")])),_:1}),xa(y,{onClick:h},{default:_a(()=>p[1]||(p[1]=[ba("返回上一级")])),_:1})])]),nr("div",{ref_key:"refChart",ref:r,class:av(["chart_wrap",t.className]),style:ov({height:t.height,width:t.width})},null,6)])}}},bm=lv(gm,[["__scopeId","data-v-bcb33fc9"]]);export{bm as default};
